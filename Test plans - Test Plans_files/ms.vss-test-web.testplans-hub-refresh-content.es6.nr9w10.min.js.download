"use strict";define("Test/TestPlansHubRefresh/TestHub",["require","exports","redux/Utils/ActionHelper","redux-saga","VSS/Core/Util/String","VSS/Platform/Feature","react","VSSUI/Utilities/TreeItemProvider","react-redux","Reselect","VSS/Core/Observable","VSS/Features/PlatformUI/ContributedMenu","VSS/Platform/Layout","VSSUI/Header","VSSUI/Icon","VSSUI/List","VSSUI/Menu","VSSUI/Observer","VSSUI/ReduxHeaderCommandBar","VSSUI/Table","VSSUI/TextField","VSSUI/TooltipEx","VSSUI/TreeEx","VSSUI/Utilities/Dispatch","VSS/Features/PlatformUI/ContributedTab","VSS/Platform/FPS","VSS/Platform/Util/Url","VSSUI/Button","VSSUI/Link","VSSUI/Page","VSSUI/Spinner","VSSUI/Splitter","VSSUI/Tabs","VSSUI/Utilities/ScreenSize","immer","VSS/Legacy/Legacy","Test/TestPlansHubRefresh/Pivots/ColumnOptions/DefineColumnOptionUtils","Test/TestPlansHubRefresh/Pivots/ColumnOptions/ExecuteColumnOptionUtils","VSS/Platform/Location","VSS/Redux/RootProvider","VSSUI/Utilities/Filter","VSSUI/ZeroData","VSSUI/Utilities/DropdownSelection"],(function(e,t,s,i,a,n,o,l,r,d,u,c,p,S,T,h,f,I,m,y,C,g,b,E,A,P,R,_,v,x,w,H,D,N,F,M,O,L,U,V,G,k,B){var W,q,j,K,Y,Q,X,z,Z,J,$,ee,te,se,ie,ae,ne,oe,le;W=t.Resources={},t.Resources.TestPlansText="Test Plans",t.Resources.ID="ID",t.Resources.Loading="Loading",t.Resources.Suites="Test Suites",t.Resources.NewStaticSuiteDefaultName="New Suite",t.Resources.Items="items",t.Resources.Item="item",t.Resources.CloneOperationFailed="Clone Operation failed.",t.Resources.SuiteImportInitiated="Import suites initiated, it may take a while...",t.Resources.SuiteImportCompleted="Import suites completed.",t.Resources.TestCasesCloneInitiated="Copy test case(s) initiated, it may take a while...",t.Resources.TestCasesCloneCompleted="Copy test case(s) completed",t.Resources.GoToDestinationSuite="Go to suite",t.Resources.Filter="Filters",t.Resources.UnassignedString="Unassigned",t.Resources.ConfigurationUpdated="Configuration(s) updated successfully.",t.Resources.AtMeString="@Me",t.Resources.PlanDoesNotExist="Selected test plan does not exist",t.Resources.PlanDoesNotExistSecondaryText="Or its area path is not owned by this project's default team.",t.Resources.TestPlanPage="View all test plans",t.Resources.CloseGrid="Close Grid",t.Resources.ColumnOptions="Column Options",t.Resources.GridView="Grid View",t.Resources.SuiteEntityCountWithFilter="({0} of {1})",t.Resources.SuiteEntityCountNoFilter="({0})",t.Resources.CanDropOnStaticSuite="Test suite can be dropped only on static suite",t.Resources.UnsavedChangesMessage="Changes you made may not be saved. Do you want to continue and lose changes?",t.Resources.Help="Help",t.Resources.HelpLinkAriaLabelForNewTestPlansPage="Help on new test plans page",t.Resources.ExpandAll="Expand All",t.Resources.CollapseAll="Collapse All",t.Resources.Refresh="Refresh",t.Resources.HoldCursor="Hold the test case(s) on the suite until the target suite is highlighted to move them.",t.Resources.CannotDragDropOnQBS="Cannot move test case(s) from or to a query based suite.",t.Resources.ShowTestsFromChildSuites="Show test points from child suites",t.Resources.DisableShowTestsFromChildSuites="Reordering of suites is not supported when show test points from child suites is enabled.",t.Resources.ToggleFullScreenMode="Toggle full screen mode",t.Resources.TogglePreviewPane="Toggle test case preview pane",t.Resources.ExportTestCases="Export test cases to CSV",t.Resources.ImportTestCases="Import test cases from CSV",t.Resources.LargeDataSetToast_singleSuite="Suite with Id {0} has more than 10,000 points. Please modify your data shape for better performance.",t.Resources.LargeDataSetToast_multipleSuites="Multiple Suites in this plan contain more than 10,000 points. Please modify your data shape for better performace.",function(e){q=t.Constants={};class s{}t.Constants.TelemetryConstants=s,s.GET_TEST_SUITES_FOR_PLAN="GetTestSuitesForPlan",s.GET_TEST_POINTS_FOR_SUITE="GetTestPointsForSuite",s.OPEN_TEST_RESULT="OpenTestResult",s.OPEN_TEST_CASE_RESULTS_PANEL="OpenTestCaseResultsPanel",s.OPEN_TEST_EXECUTION_HISTORY="OpenTestExecutionHistory",s.EDIT_TEST_SUITE_USING_FORM="EditTestSuiteUsingForm",s.OEPN_TEST_SUITE_USING_FORM="OpenTestSuiteUsingForm",s.GET_TEST_CASES_FOR_SUITE="GetTestCasesForSuite",s.ADD_TEST_CASE_USING_FORM="AddTestCaseUsingForm",s.EDIT_TEST_CASE_USING_FORM="EditTestCaseUsingForm",s.BULK_EDIT_TEST_CASES="BulkEditTestCases",s.ADD_EXISTING_TEST_CASES="AddExistingTestCases",s.REORDER_TEST_CASES="ReorderTestCases",s.BULK_MARK_TEST_OUTCOME="BulkMarkTestOutcome",s.BULK_MARK_ASSIGN_TESTER="BulkMarkAssignTester",s.LAUNCH_APPLICATION_TEST_RUNNER="LaunchApplicationTestRunner",s.LAUNCH_APPLICATION_TEST_RUNNER_FAILURE="LaunchApplicationTestRunnerFailure",s.LAUNCH_APPLICATION_TEST_RUNNER_TO_RESUME_TEST="LaunchApplicationTestRunnerToResumeTest",s.LAUNCH_WEB_RUNNER="LaunchWebRunner",s.LAUNCH_RUN_WITH_OPTIONS_WEB_RUNNER="LaunchRunWithOptionsWebRunner",s.RESUME_TEST="ResumeTest",s.PIVOT_CHANGED="PivotChanged",s.ASSIGN_CONFIGURATION_TO_TEST_CASE="AssignConfigurationToTestCase",s.TOGGLE_FAVORITE="ToggleFavorite",s.FETCH_FAVORITE="FetchFavorites",s.CHANGE_TEST_PLAN="ChangeTestPlan",s.NEW_SUITE="NewSuite",s.REORDER_TEST_SUITE="ReorderTestSuite",s.MOVE_TEST_CASES_TO_SUITE="MoveTestCasesToSuite",s.EXPORT_HTML="ExportHTML",s.EDIT_SUITE_QUERY="EditQuery",s.DELETE_SUITE="DeleteSuite",s.RENAME_TEST_SUITE="RenameTestSuite",s.RENAME_TEST_SUITE_KEYBOARD="RenameTestSuiteKeyboard",s.CLICK_COPY_TEST_PLAN_OPTION="ClickCopyTestPlanOption",s.COPY_TEST_PLAN="CopyTestPlan",s.CLONE_TEST_CASES="CloneTestCases",s.IMPORT_TEST_SUITE="ImportTestSuite",s.CLICK_TEST_PLAN_SETTINGS="ClickTestPlanSettings",s.CHANGE_TEST_PLAN_SETTINGS="ChangeTestPlanSettings",s.RESUME_WITH_WEB_RUNNER="ResumeTestWithWebRunner",s.AUTOMATED_TEST_RUN="AutomatedTestRun",s.RUN_WITH_OLD_MTM="RunTestUsingOldMTM",s.RUN_WITH_NEW_MTM="RunTestUsingNewMTM",s.COLUMN_OPTIONS_EDIT="ColumnOptionsEdit",s.FILTER_TOGGLED="FilterToggled",s.FILTER_VALUES_CHANGED="FilterValuesChanged",s.TEST_HUB_FEATURE_AREA_NAME="TestManagement",s.AUTHOR_PIVOT_PAGE_LOAD_TTI_SCENARIO="TestPlansAuthorPivotTTI",s.EXECUTE_PIVOT_PAGE_LOAD_TTI_SCENARIO="TestPlansExecutePivotTTI",s.TESTPLAN_CHANGE_TTI_SCENARIO="TestPlanChangeTTI",s.REMOVE_TEST_CASES="RemoveTestCasesFromSuite",s.NAVIGATE_TO_PROGRESS_REPORT_FROM_TEST_HUB_REFRESH="NavigateToProgressReportFromTestHubRefresh",s.NAVIGATE_TO_PROGRESS_REPORT_FROM_TEST_HUB_REFRESH_ERROR="NavigateToProgressReportFromTestHubRefreshError",s.ADD_EXISTING_TEST_CASES_USING_KEYBOARD="AddExistingTestCasesUsingKeyboard",s.ADD_TEST_CASES_USING_KEYBOARD="AddTestCasesUsingKeyboard",s.GRID_VIEW_SELECTED="GridViewSelected",s.AUTHOR_PIVOT_TEST_CASE_FIELDS_MISSING="AuthorPivotTestCaseFieldsMissing",s.TEST_CASE_LINKED_ITEMS="Show Test Case Linked Items",s.ASSIGN_TESTERS_TO_SUITE="Assign testers to run all tests",s.HELP_TEST_PLANS_PAGE="HelpButtonClicked",s.TEST_CASE_LINKED_WORKITEMS="ShowTestCaseLinkedRequirementsAndBugs",s.SAGA_ERROR="RootSagaError",s.EXPORT_TESTCASES="ExportTestCases",s.CLICK_IMPORT_TESTCASES="ClickImportTestCases",s.IMPORT_TESTCASES_COMPLETED="ImportTestCasesCompleted",s.IMPORT_TESTCASES_ERROR="ImportTestCasesError",s.TOGGLE_TEST_CASE_PREVIEW="ToggleTestCasePreview";class i{}t.Constants.TestHubRefreshConstants=i,i.PIVOT_ID="pivots",i.DEFINE_TAB_ID="define",i.EXECUTE_TAB_ID="execute",i.CHART_TAB_ID="charts",i.AUTHOR_TEXT_FILTER_ITEM_KEY="authorFilterText",i.AUTHOR_ASSIGNEDTO_FILTER_ITEM_KEY="authorAssignedToFilter",i.AUTHOR_STATE_FILTER_ITEM_KEY="authorStateFilter",i.EXECUTE_TEXT_FILTER_ITEM_KEY="executeFilterText",i.EXECUTE_OUTCOME_FILTER_ITEM_KEY="executeOutcomeFilter",i.EXECUTE_TESTER_FILTER_ITEM_KEY="executeTesterFilter",i.EXECUTE_CONFIGURATION_FILTER_ITEM_KEY="executeConfigurationFilter",i.EXECUTE_ASSIGNEDTO_FILTER_ITEM_KEY="executeAssignedToFilter",i.EXECUTE_STATE_FILTER_ITEM_KEY="executeStateFilter",i.QUERY_PARAM_PLAN_ID="planId",i.QUERY_PARAM_SUITE_ID="suiteId",i.QUERY_PARAM_OP_ID="opId",i.SETTINGS_PATH="TestPlansHubRefresh",i.PREVIEW_SPLITTER_STATUS_KEY=`${i.SETTINGS_PATH}/PreviewSplitterStatus`,i.PREVIEW_SPLITTER_SIZE_KEY=`${i.SETTINGS_PATH}/PreviewSplitterSize`,i.SETTINGS_KEY="setting",i.INITIAL_PAGE_SIZE="25",i.INT_MIN_VALUE="-2147483648",i.PAGE_SIZE="1000",i.FETCH_TESTPLANS_PAGE_SIZE=200,i.TOAST_MESSAGE_DURATION=3e3,i.ERROR_TOAST_DURATION=8e3,i.LONG_TOAST_MESSAGE_DURATION=5e3,i.LARGE_DATASET_COUNT_THRESHOLD=1e4,i.DEFAULT_SUITE_COUNT_THRESHOLD=500,i.RIGHT_MOUSE_BUTTON=2,i.BREADCRUMB_PRIRORITY=5,i.WorkItemField_State="System.State",i.WorkItemField_AssignedTo="System.AssignedTo",i.WorkItemField_Ttile="System.Title",i.WorkItemField_Id="System.Id",i.SharedStepWorkItemType="Shared Steps",i.TestCaseWorkItemType="Test Case",i.WorkItemField_Tags="System.Tags",i.EmptyGuid="00000000-0000-0000-0000-000000000000",i.NoPlanImagePath="ms.vss-test-web/testplan-hub-refresh-assets/zero-data-no-plan-image.png",i.testPlanAll="all",i.allMineRouteContributionId="ms.vss-test-web.test-mine-directory-route",i.DocLinkNewTestPlansPage="https://aka.ms/newtestplanspage",i.RenameTestSuite="RenameTestSuite",i.EnableThirdPartyTabContributionsFF="WebAccess.TestManagement.TestPlansHubRefresh.EnableThirdPartyTabContributions",i.EnableThirdPartyMenuContributionsFF="WebAccess.TestManagement.TestPlansHubRefresh.EnableThirdPartyMenuContributions",i.ShowTestPointsFromChildSuitesFF="WebAccess.TestManagement.TestPlansHubRefresh.ShowTestPointsFromChildSuites",i.EnableCopyTestCasesFF="WebAccess.TestManagement.TestPlansHubRefresh.EnableCopyTestCases",i.EnableExportImportTestCasesFF="WebAccess.TestManagement.TestPlansHubRefresh.EnableExportImportTestCases",i.EnableToastNotificationsForSagaErrorFF="WebAccess.TestManagement.TestPlansHubRefresh.EnableToastNotificationsForSagaError",i.BulkCreateRequirementBasedSuitesFF="WebAccess.TestManagement.TestPlansHubRefresh.BulkCreateRequirementBasedSuites",i.ShowLargeDatasetToastFF="WebAccess.TestManagement.TestPlansHubRefresh.ShowLargeDatasetToast",i.FetchTestPointColumnOptionsRecursively="WebAccess.TestManagement.TestPlansHubRefresh.FetchTestPointColumnOptionsRecursively",i.DisableEntityCountFF="WebAccess.TestManagement.TestPlansHubRefresh.DisableEntityCountFeature",i.SortPlansAndSuitesAlphabeticallyFF="WebAccess.TestManagement.SortPlansAndSuitesAlphabetically",i.EnableResumeTestRunUsingTestRunnerFF="WebAccess.TestManagement.TestPlansHubRefresh.EnableResumeTestRunUsingTestRunner",function(e){e.RIGHT="Right",e.OFF="Off"}(t.Constants.PreviewSplitterOptions||(t.Constants.PreviewSplitterOptions={})),function(e){e.ContributionId="ms.vss-test-web.test-mine-directory-route",e.Pivot="all",e.queryParams="?showFilters=true"}(t.Constants.RouteParametersMineAllPage||(t.Constants.RouteParametersMineAllPage={}));class a{}t.Constants.SuitesConstants=a,a.SUITE_TREE="Suite Tree",a.TestSuitesLimit=75,a.TestCaseDragItemType="test-case-item",a.TestSuiteDragItemType="test-suite-item"}(),j=t[le="ReduxTelemetryActions"]={},t[le].TelemetryActions={publishTelemetry:(e,t)=>(0,s.trackedAction)((0,s.createAction)("TestHubRefresh"),Object.assign({action:e},t)),publishErrorTelemetry:(e,t)=>(0,s.trackedErrorAction)((0,s.createAction)("TestHubRefresh",Object.assign({action:e},t)))},function(e){K=t[e]={},t[e].SuitesActions={loadInitialTestData:()=>(0,s.createAction)("Suites/loadInitialTestData"),getMineAllPageUrl:()=>(0,s.createAction)("Suites/getMineAllPageUrl",{}),loadInitialTestDataSucceeded:e=>(0,s.createAction)("Suites/loadInitialTestDataSucceeded",e),changeSelectedSuite:(e,t,i)=>(0,s.createAction)("Suites/changeSelectedSuite",{planId:e,selectedSuiteId:t,selectedSuiteName:i}),openTestSuiteWitForm:(e,t,i,a)=>(0,s.createAction)("Suites/openTestSuiteWitForm",{testPlanId:e,testSuiteId:t,testSuiteTitle:i,rootSuiteId:a}),updateTestSuiteName:(e,t,i)=>(0,s.createAction)("Suites/updateTestSuiteName",{testSuiteId:e,testSuiteTitle:t,rootSuiteId:i}),loadTestPlan:e=>(0,s.createAction)("Suites/loadTestPlan",{testPlan:e}),loadTestSuites:e=>(0,s.createAction)("Suites/loadTestSuites",{testSuites:e}),updateLoadingStatus:e=>(0,s.createAction)("Suites/updateLoadingStatus",{loadingStatus:e}),updateReloadState:e=>(0,s.createAction)("Suites/updateReloadState",{state:e}),loadNewSuites:(e,t,i,a)=>(0,s.createAction)("Suites/loadNewSuites",{testSuites:e,parentSuiteId:t,rootSuiteId:i,editableSuiteId:a}),removeSuite:(e,t)=>(0,s.createAction)("Suites/removeSuite",{suiteId:e,rootSuiteId:t}),createNewReqSuite:(e,t,i,a,n,o,l)=>(0,s.createAction)("Suites/createNewReqSuite",{planId:e,parentSuiteId:t,parentSuiteTitle:i,suiteType:a,rootSuiteId:n,requirementIds:o,selection:l}),createNewQuerySuite:(e,t,i,a,n,o,l,r,d)=>(0,s.createAction)("Suites/createNewQuerySuite",{testSuite:e,planId:t,parentSuiteId:i,parentSuiteTitle:a,suiteType:n,rootSuiteId:o,queryName:l,queryText:r,selection:d}),openCreateEditSuiteQueryForm:(e,t,i,a,n,o,l,r)=>(0,s.createAction)("Suites/openCreateEditSuiteQueryForm",{areaPath:e,createSave:t,queryText:i,planId:a,parentSuiteId:n,parentSuiteTitle:o,rootSuiteId:l,selection:r}),editQueryForQueryBasedSuite:(e,t,i,a)=>(0,s.createAction)("Suites/editQueryForQueryBasedSuite",{queryText:e,planId:t,suiteId:i,suiteTitle:a}),queryEdited:(e,t)=>(0,s.createAction)("Suites/queryEdited",{queryText:e,suiteId:t}),reloadTestPlanAndSuites:e=>(0,s.createAction)("Suites/reloadTestPlanAndSuites",{planId:e}),createStaticSuite:(e,t,i,a,n)=>(0,s.createAction)("Suites/createStaticSuite",{planId:e,parentSuiteId:t,parentSuiteTitle:i,suiteType:a,rootSuiteId:n}),changeTreeItemExpandableState:(e,t)=>(0,s.createAction)("Suites/changeTreeItemExpandableState",{suiteId:e,expandedState:t}),editTestSuiteName:(e,t)=>(0,s.createAction)("Suites/editTestSuiteName",{suiteId:e,suiteTitle:t}),openDeleteTestSuiteDialog:(e,t,i,a,n,o,l)=>(0,s.createAction)("Suites/openDeleteTestSuiteDialog",{planId:e,suiteId:t,rootSuiteId:i,suiteName:a,suiteType:n,selection:o,dispatch:l}),deleteTestSuite:(e,t,i,a,n,o)=>(0,s.createAction)("Suites/deleteTestSuite",{planId:e,suiteId:t,rootSuiteId:i,suiteName:a,suiteType:n,selection:o}),saveTestSuiteName:(e,t,i,a,n)=>(0,s.createAction)("Suites/saveTestSuiteName",{planId:e,suiteId:t,oldSuiteTitle:i,newSuiteTitle:a,rootSuiteId:n}),showToastNotifications:(e,t,i,a,n)=>(0,s.createAction)("Suites/showToastNotifications",{toastMessage:e,toastDurationMs:t,callToActionText:i,callToActionTextCallback:a,className:n}),getSuitePointCount:(e,t,i,a,n,o)=>(0,s.createAction)("Suites/getSuitePointCount",{planId:e,states:t,configurations:i,testers:a,assignedTo:n,outcome:o}),getSuiteTestCasesCount:(e,t,i)=>(0,s.createAction)("Suites/getSuiteTestCasesCount",{planId:e,states:t,assignedTo:i}),showSuitePointsCount:(e,t,i)=>(0,s.createAction)("Suites/showSuitePointsCount",{planId:e,suitePointCount:t,showTestsFromChildSuitesEnabled:i}),showSuiteTestCasesCount:(e,t)=>(0,s.createAction)("Suites/showSuiteTestCasesCount",{planId:e,suiteTestCasesCount:t}),reorderTestSuite:(e,t,i,a,n)=>(0,s.createAction)("Suites/reorderTestSuite",{planId:e,targetParentSuiteId:t,suiteId:i,targetSuiteId:a,dropAtEnd:n}),reorderTestSuiteSucceeded:(e,t,i)=>(0,s.createAction)("Suites/reorderTestSuiteSucceeded",{suiteId:e,targetSuiteId:t,dropAtEnd:i}),updateTestSuiteParent:(e,t,i)=>(0,s.createAction)("Suites/updateTestSuiteParent",{planId:e,suiteId:t,targetParentSuiteId:i}),updateTestSuiteParentSucceeded:(e,t)=>(0,s.createAction)("Suites/updateTestSuiteParentSucceeded",{suiteId:e,targetParentSuiteId:t}),updateParentAndReorderSuite:(e,t,i,a,n)=>(0,s.createAction)("Suites/updateParentAndReorderSuite",{planId:e,targetParentSuiteId:t,suiteId:i,targetSuiteId:a,dropAtEnd:n}),loadTestPointsForSelectedSuite:(e,t,i)=>(0,s.createAction)("Suites/loadTestPointsForSelectedSuite",{testPlanId:e,testSuiteId:t,continuationToken:i}),assignTestersToSuite:(e,t)=>(0,s.createAction)("Suites/assignTestersToSuite",{planId:e,suite:t}),openExportHTMLDialog:(e,t,i,a,n)=>(0,s.createAction)("Suites/openExportHTMLDialog",{planId:e,suiteId:t,pointCount:i,rootSuiteId:a,totalPointCount:n}),expandCollapseAllSuites:e=>(0,s.createAction)("Suites/expandCollapseAllSuites",{expandCollapseBool:e}),fetchSplitterWidth:()=>(0,s.createAction)("Suites/fetchSplitterWidth",{}),getSuiteCloneOpState:(e,t,i,a)=>(0,s.createAction)("Suites/getSuiteCloneOpState",{planId:e,opId:t,initialCall:i,project:a}),moveTestCaseToSuite:(e,t,i,a,n,o)=>(0,s.createAction)("Suites/moveTestCaseToSuite",{testPlanId:e,sourceSuiteId:t,sourceSuiteRevision:i,destinationSuiteId:a,destinationSuiteRevision:n,testCaseIds:o}),moveTestCaseToSuiteSucceeded:e=>(0,s.createAction)("Suites/moveTestCaseToSuiteSucceeded",{testCaseIds:e}),saveSplitterWidth:e=>(0,s.createAction)("Suites/saveSplitterWidth",{splitterWidth:e}),exportTestCasesToCSV:(e,t,i,a,n)=>(0,s.createAction)("Suites/exportTestCasesToCSV",{planId:e,suiteId:t,planName:i,suiteName:a,testCaseIds:n}),openRequirementWorkItemForm:e=>(0,s.createAction)("Suites/openRequirementWorkItemForm",{requirementId:e})}}("ReduxSuitesSuitesActions"),t.ReduxTestHubRefreshTestHubRefreshContracts={},t.ReduxSuitesSuitesContract={},function(e){Y=t[e]={},t[e].TestHubRefreshActions={updateTestPlan:(e,t,i,a,n,o)=>(0,s.createAction)("TestHubRefreshActions/updateTestPlan",{planId:e,testPlanName:t,testPlanStartDate:i,testPlanFinishDate:a,testPlanAreaPath:n,testPlanIterationPath:o}),setGridView:e=>(0,s.createAction)("TestHubRefreshActions/setGridView",{isInGridView:e}),updateBusyViewStatus:e=>(0,s.createAction)("TestHubRefreshActions/updateBusyViewStatus",{isBusy:e}),editColumnOptionFieldsClicked:(e,t)=>(0,s.createAction)("TestHubRefreshActions/editColumnOptionFieldsClicked",{planId:e,suiteId:t}),loadExecuteColumnOptionFieldsSucceeded:e=>(0,s.createAction)("TestHubRefreshActions/loadExecuteColumnOptionFieldsSucceeded",{executeColumnOptionFields:e}),loadDefineColumnOptionFieldsSucceeded:e=>(0,s.createAction)("TestHubRefreshActions/loadDefineColumnOptionFieldsSucceeded",{defineColumnOptionFields:e}),showSuiteLevelGrid:(e,t,i,a,n)=>(0,s.createAction)("TestHubRefreshActions/showSuiteLevelGrid",{planId:e,suiteId:t,planName:i,areaPath:a,iterationPath:n}),updatePagingStatus:e=>(0,s.createAction)("TestHubRefreshActions/updatePagingStatus",{isPagingInProgress:e}),setIsGridDirty:e=>(0,s.createAction)("TestHubRefreshActions/setIsGridDirty",{isGridDirty:e}),changeDefineColumnWidths:(e,t,i)=>(0,s.createAction)("TestHubRefreshActions/changeDefineColumnWidths",{columnId:e,width:t,columnAndWidthObj:i}),changeExecuteColumnWidths:(e,t,i)=>(0,s.createAction)("TestHubRefreshActions/changeExecuteColumnWidths",{columnId:e,width:t,columnAndWidthObj:i}),changeSplitterWidth:e=>(0,s.createAction)("TestHubRefreshActions/changeSplitterWidth",{splitterWidth:e}),updateSelectedBuild:(e,t)=>(0,s.createAction)("TestHubRefreshActions/updateSelectedBuild",{selectedBuildId:e,selectedBuildDefnId:t}),updateSelectedRelease:(e,t)=>(0,s.createAction)("TestHubRefreshActions/updateSelectedRelease",{selectedReleaseId:e,selectedReleaseEnvironmentId:t}),showTestsFromChildSuitesClick:(e,t,i,a)=>(0,s.createAction)("Suites/showTestsFromChildSuitesClick",{testPlanId:e,testSuiteId:t,isShowTestsFromChildSuitesEnabled:i,continuationToken:a}),loadMineAllPageUrl:e=>(0,s.createAction)("TestHubRefreshActions/loadMineAllPageUrl",{mineAllPageUrl:e}),closeGrid:(e,t)=>(0,s.createAction)("TestHubRefreshActions/closeGrid",{planId:e,selectedSuiteId:t}),saveTestCasePreviewStatus:e=>(0,s.createAction)("TestHubRefreshActions/saveTestCasePreviewStatus",{previewStatus:e}),changeTestCasePreviewStatus:e=>(0,s.createAction)("TestHubRefreshActions/changeTestCasePreviewStatus",{previewStatus:e}),fetchTestCasePreviewStatus:()=>(0,s.createAction)("TestHubRefreshActions/fetchTestCasePreviewStatus",{}),updateDefineTabCustomColumnFieldMap:e=>(0,s.createAction)("TestHubRefreshActions/updateDefineTabCustomColumnFieldMap",{customColumnFieldMap:e}),updateExecuteTabCustomColumnFieldMap:e=>(0,s.createAction)("TestHubRefreshActions/updateExecuteTabCustomColumnFieldMap",{customColumnFieldMap:e})}}("ReduxTestHubRefreshTestHubRefreshActions"),Q=t.Util={},t.Util.errorHandledSaga=function(e){return function*(t,s,a,o,l,r,...d){try{yield i.effects.call(e,t,s,a,o,l,r,d)}catch(e){yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1));const s={errorMessage:e.message,saga:t.type};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.SAGA_ERROR,s));const a=yield i.effects.getContext("pageContext");(0,n.isFeatureFlagEnabled)(a,q.TestHubRefreshConstants.EnableToastNotificationsForSagaErrorFF,!1)&&(yield i.effects.put(K.SuitesActions.showToastNotifications(e.message,q.TestHubRefreshConstants.ERROR_TOAST_DURATION)))}}},t.Util.getDataProviderContent=function(e){return e.getService("IVssContributionService").getData("ms.vss-test-web.test-plans-hub-refresh-data-provider")},t.Util.getSelectionSuiteIndexFromSuiteId=function e(t,s,i,a){for(let n=0;n<s.length;n++){if(s[n].id===t)return{index:++i,found:!0};if(i++,a.get(s[n].id)){const o=e(t,s[n].children,i,a);if(i=o.index,o.found)return{index:i,found:!0}}}return{index:i,found:!1}},t.Util.getSuiteIdFromSelectedSuiteIndex=function e(t,s,i){for(let a=0;a<s.length;a++){if(0===t)return{suiteId:s[a].id,index:t};if(t--,i.get(s[a].id)){const n=e(t,s[a].children,i);if(t=n.index,n.suiteId)return{suiteId:n.suiteId,index:t}}}return{suiteId:0,index:t}},t.Util.showErrorToast=function(e,t,s,i,a){let n;n=i?1e4:5e3,e.getService("IGlobalMessagesService").addToast({duration:n,message:t,callToAction:i,onCallToActionClick:a}),s&&console.error(s)},t.Util.checkIfIsIE=function(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0},t.Util.compareColumnWidthsMaps=function(e,t){if(e&&t){if(e.size!==t.size)return!1;for(let s in e){let i=e[s];if(!t[s])return!1;if(i!==t[s])return!1}return!0}return!e&&!t},t.Util.getSelectedBuildObject=function(e){let t="0",s="";return e&&"0"!==e&&(t=e,s="vstfs:///Build/Build/"+e),{url:a.format(s,t),id:t,name:""}},function(e){X=t[e]={},t[e].TestHubRefreshLocalContext=o.createContext({});t[e].initializeTestHubLocalContext=s=>{t[e].testHubRefreshLocalContextData={_isPageLoad:!0,isPageLoad:()=>t[e].testHubRefreshLocalContextData._isPageLoad,setPageLoad:s=>{t[e].testHubRefreshLocalContextData._isPageLoad=s},_currentSelectedPivot:s,getCurrentPivot:()=>t[e].testHubRefreshLocalContextData._currentSelectedPivot,setCurrentPivot:s=>{t[e].testHubRefreshLocalContextData._currentSelectedPivot=s},_webRunnerPointIds:[],getWebRunnerPointIds:()=>t[e].testHubRefreshLocalContextData._webRunnerPointIds,setWebRunnerPointIds:s=>{t[e].testHubRefreshLocalContextData._webRunnerPointIds=Object.assign([],s)},_selectedTestCaseIds:[],getSelectedTestCaseIds:()=>t[e].testHubRefreshLocalContextData._selectedTestCaseIds,setSelectedTestCaseIds:s=>{t[e].testHubRefreshLocalContextData._selectedTestCaseIds=Object.assign([],s)},_isJsonIslandDataDirty:!1,isJsonIslandDataDirty:()=>t[e].testHubRefreshLocalContextData._isJsonIslandDataDirty,makeJsonIslandDataDirty:()=>{t[e].testHubRefreshLocalContextData._isJsonIslandDataDirty=!0},_isAuthorFilterActiveOrSet:!1,isAuthorFilterActiveOrSet:()=>t[e].testHubRefreshLocalContextData._isAuthorFilterActiveOrSet,setIsAuthorFilterActiveOrSet:s=>{t[e].testHubRefreshLocalContextData._isAuthorFilterActiveOrSet=s},_isExecuteFilterActiveOrSet:!1,isExecuteFilterActiveOrSet:()=>t[e].testHubRefreshLocalContextData._isExecuteFilterActiveOrSet,setIsExecuteFilterActiveOrSet:s=>{t[e].testHubRefreshLocalContextData._isExecuteFilterActiveOrSet=s}}}}("UtilsTestPlansHubRefreshLocalContextProvider"),function(e){z=t[e]={};t[e].TestSuiteTreeItemDataProvider=class{constructor(){}populateItems(e,t,s,i,a,n=!1){return this._populateItemsInternal(e,t,s,i,a,n)}_sortItems(e){e.sort(((e,t)=>a.localeComparer(e.name,t.name)))}_populateItemsInternal(e,t,s,i,a,n=!1){const o=[],l=e.length;n&&e.length>1&&this._sortItems(e);for(let r=0;r<l;r++){const l={title:e[r].name?e[r].name:a,id:e[r].id,type:e[r].suiteType,hasParent:e[r].id!==t,isInEditMode:i===e[r].id,pointCount:e[r].pointCount,totalPointCount:e[r].totalPointCount,testCaseCount:e[r].testCaseCount,totalTestCaseCount:e[r].totalTestCaseCount,requirementId:e[r].requirementId};let d,u=!1;s.get(e[r].id)&&(u=!0),e[r].children&&e[r].children.length>0&&(d=this._populateItemsInternal(e[r].children,t,s,i,void 0,n)),o.push({childItems:d,data:l,expanded:u})}return o}};class s extends l.TreeItemProvider{constructor(e){super(e)}}t[e].TestSuiteTreeItemProvider=s}("ComponentTestSuiteTreeItemProvider"),function(e){Z=t[e]={};class s extends p.VssComponent{constructor(e,t){super(e,t),this._textField=o.createRef(),this._suiteNameObservable=new u.ObservableValue(""),this._onSelectedItemsChanged=(e,t)=>{let s=!0;if(this.props.isInGridView&&this.props.isGridDirty&&(s=confirm(W.UnsavedChangesMessage)),this.props.isInGridView&&this.props.isGridDirty&&!s){const e=(0,Q.getSelectionSuiteIndexFromSuiteId)(this.props.selectedSuiteId,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap);this.selection.select(e.index)}else{if(this.props.testhubRefreshContext){const e=this.props.testhubRefreshContext.getCurrentPivot();if(e){let t;if(0===(0,a.localeIgnoreCaseComparer)(e,q.TestHubRefreshConstants.DEFINE_TAB_ID)?t=q.TelemetryConstants.AUTHOR_PIVOT_PAGE_LOAD_TTI_SCENARIO:0===(0,a.localeIgnoreCaseComparer)(e,q.TestHubRefreshConstants.EXECUTE_TAB_ID)&&(t=q.TelemetryConstants.EXECUTE_PIVOT_PAGE_LOAD_TTI_SCENARIO),t){const e={ttiScenario:"SuiteTreeSelectionChanged"};this.context.pageContext.getService("IVssPerformanceService").startScenario(t,!0,void 0,e)}}}this.props.onSelectedSuite(this.props.testPlanId,e,t)}this.props.isInGridView&&s&&this.props.closeGrid(this.props.testPlanId,this.props.selectedSuiteId)},this._renderCell=(e,t,s,i)=>{const{underlyingItem:n}=i,l=n.data.title;let r,d="",u=l;const c=this.props.testhubRefreshContext?this.props.testhubRefreshContext.getCurrentPivot():void 0;let p=0,S=0,h=!1;c===q.TestHubRefreshConstants.DEFINE_TAB_ID?(p=n.data.testCaseCount?n.data.testCaseCount:0,S=n.data.totalTestCaseCount?n.data.totalTestCaseCount:0,h=this.props.testhubRefreshContext&&this.props.testhubRefreshContext.isAuthorFilterActiveOrSet()):c===q.TestHubRefreshConstants.EXECUTE_TAB_ID&&(p=n.data.pointCount?n.data.pointCount:0,S=n.data.totalPointCount?n.data.totalPointCount:0,h=this.props.testhubRefreshContext&&this.props.testhubRefreshContext.isExecuteFilterActiveOrSet());let f="";S&&h?f=(0,a.format)(W.SuiteEntityCountWithFilter,p,S):S&&!h&&(f=(0,a.format)(W.SuiteEntityCountNoFilter,S));const I=f?l+" "+f:l;n.data.isInEditMode&&(""===this._suiteNameObservable.value.trim()&&(this._suiteNameObservable.value=l),u=o.createElement(C.TextField,{value:this._suiteNameObservable,ref:this._textField,onChange:(e,t)=>this._suiteNameObservable.value=t,autoFocus:!0,onKeyDown:e=>e.stopPropagation(),onKeyPress:e=>{this._onKeyPress(e,l,n.data.id)},onBlur:()=>{""===this._suiteNameObservable.value.trim()&&(this._suiteNameObservable.value=l),this.props.saveTestSuiteName(this.props.testPlanId,n.data.id,l,this._suiteNameObservable.value,this.props.rootSuiteId);const e=(0,Q.getSelectionSuiteIndexFromSuiteId)(n.data.id,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap);n.data.id!==this.props.selectedSuiteId&&(this.selection.select(e.index),this.props.onSelectedSuite(this.props.testPlanId,n.data.id,this._suiteNameObservable.value)),this._suiteNameObservable.value=""}})),n.data.hasParent&&(d=1===n.data.type?"FolderQuery":2===n.data.type?"FolderHorizontal":"FolderList",r=o.createElement(T.Icon,{iconName:d,className:"test-suite-folder-icon"}));const m=o.createElement("span",{className:"test-suite-content"},r,o.createElement(g.Tooltip,{overflowOnly:!0,text:I},o.createElement("div",{className:"text-ellipsis"},o.createElement("span",null,u))),o.createElement(g.Tooltip,{overflowOnly:!0,text:I},o.createElement("div",{className:"text-ellipsis"},"Â ",f&&!n.data.isInEditMode&&o.createElement("span",{className:"suite-entity-count"},f))));return(0,b.ExpandableTreeCell)({children:m,columnIndex:t,contentClassName:void 0,treeColumn:s,treeItem:i})},this._onKeyPress=(e,t,s)=>{if(13===e.which){""===this._suiteNameObservable.value.trim()&&(this._suiteNameObservable.value=t),this.props.saveTestSuiteName(this.props.testPlanId,s,t,this._suiteNameObservable.value,this.props.rootSuiteId);const e=(0,Q.getSelectionSuiteIndexFromSuiteId)(s,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap),i=s!==this.props.selectedSuiteId;e.found&&i&&(this.selection.select(e.index),this.props.onSelectedSuite(this.props.testPlanId,s,this._suiteNameObservable.value)),this._suiteNameObservable.value=""}},this._getContextualSuitesItems=e=>{const t=new u.ObservableCollection,s={planId:this.props.testPlanId,rootSuiteId:this.props.rootSuiteId,suite:e,dispatch:this.props.dispatch,planAreaPath:this.props.testPlanAreaPath,selection:this.selection,testSuiteImportPanelOpen:this._testSuiteImportPanelOpen};if(this.contextMenuSuiteId=e.id,this.props.isAdvancedLicenseEnabled&&(!0===s.suite.hasParent?t.push((0,c.getMenuItems)(this.context.pageContext,"ms.vss-test-web.suite-list-menu",s)):t.push((0,c.getMenuItems)(this.context.pageContext,"ms.vss-test-web.root-suite-list-menu",s)),(0,n.isFeatureFlagEnabled)(this.context.pageContext,q.TestHubRefreshConstants.EnableThirdPartyMenuContributionsFF,!1))){const s=this.props.idToTestSuiteMap.get(e.id);if(s){const e={plan:{id:this.props.testPlanId,name:this.props.testPlanName,area:{name:this.props.testPlanAreaPath},iteration:this.props.testPlanIterationPath,owner:null,revision:0,rootSuite:{id:this.props.rootSuiteId},areaPath:this.props.testPlanAreaPath,text:(0,a.format)("{0} ({1}: {2})",this.props.testPlanName,W.ID,this.props.testPlanId),rootSuiteId:this.props.rootSuiteId,buildUri:"",buildDefinitionId:this.props.selectedBuildDefnId,releaseEnvironmentDefinition:null},suite:{id:s.id,revision:s.revision,name:s.name,pointCount:s.pointCount,suiteType:s.suiteType,requirementId:s.requirementId,parentSuiteId:s.parentSuite?s.parentSuite.id:0,queryText:s.queryString,configurations:s.defaultConfigurations,children:s.children,totalPointCount:s.totalPointCount,type:s.suiteType,title:s.name}};t.push((0,c.getMenuItems)(this.context.pageContext,"ms.vss-test-web.test-plans-suites-context",e))}}return t},this._viewActions=()=>{const e=[];if(this.props.testhubRefreshContext){this.props.testhubRefreshContext.getCurrentPivot()===q.TestHubRefreshConstants.EXECUTE_TAB_ID&&(0,n.isFeatureFlagEnabled)(this.context.pageContext,q.TestHubRefreshConstants.ShowTestPointsFromChildSuitesFF,!1)&&e.push({ariaLabel:W.ShowTestsFromChildSuites,id:"show-test-child-suites",iconProps:{iconName:"RowsChild"},subtle:!this.props.isShowTestsFromChildSuitesEnabled,onActivate:()=>{this.props.showTestsFromChildSuitesClick(this.props.testPlanId,this.props.selectedSuiteId,!this.props.isShowTestsFromChildSuitesEnabled)},className:this.props.isShowTestsFromChildSuitesEnabled?"show-test-child-suites":"",tooltipProps:{text:W.ShowTestsFromChildSuites}})}return e.push({ariaLabel:W.ExpandAll,id:"expand-all",iconProps:{iconName:"ExploreContent"},subtle:!0,onActivate:()=>{this.props.expandCollapseAllSuites(!0)},className:"",tooltipProps:{text:W.ExpandAll}},{ariaLabel:W.CollapseAll,id:"collapse-all",iconProps:{iconName:"SemanticZoom"},subtle:!0,onActivate:()=>{this.props.expandCollapseAllSuites(!1)},className:"",tooltipProps:{text:W.CollapseAll}}),e},this._testSuiteImportPanelOpen=()=>{this._showPanel.value=!0},this._onDragStart=e=>{if(this.props.isShowTestsFromChildSuitesEnabled&&this.props.testhubRefreshContext){const t=this.props.testhubRefreshContext.getCurrentPivot();t&&0===(0,a.localeIgnoreCaseComparer)(t,q.TestHubRefreshConstants.EXECUTE_TAB_ID)&&(e.detail.dataTransfer.effectAllowed="none",this.props.showToastNotifications(W.DisableShowTestsFromChildSuites,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION))}else{if(e.detail.dataTransfer.data.underlyingItem.data.id===this.props.rootSuiteId&&(e.detail.dataTransfer.effectAllowed="none"),e.detail.dataTransfer.secondaryData&&0!==e.detail.dataTransfer.secondaryData.index){const t=e.detail.dataTransfer.secondaryData.index;this.selection.select(t)}}},this._onDrop=(e,t)=>{var s;const i=e.detail.dataTransfer.data,a=t.index;let n=!1,o=(0,Q.getSuiteIdFromSelectedSuiteIndex)(a,this.props.testSuites,this.props.idToTreeItemExpandableStateMap);if(e.detail.dataTransfer.type===q.SuitesConstants.TestCaseDragItemType)if(this.selection.selectedCount){const t=this.props.idToTestSuiteMap.get(this.props.selectedSuiteId),s=this.props.idToTestSuiteMap.get(o.suiteId);if(t&&1===t.suiteType||s&&1===s.suiteType)e.detail.dataTransfer.effectAllowed="none",this.props.showToastNotifications(W.CannotDragDropOnQBS,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION);else{let e=[];this.props.testhubRefreshContext&&(e=this.props.testhubRefreshContext.getSelectedTestCaseIds()),this.props.moveTestCaseToSuite(this.props.testPlanId,this.props.selectedSuiteId,t.revision,o.suiteId,s.revision,e);const i=(0,Q.getSelectionSuiteIndexFromSuiteId)(this.props.selectedSuiteId,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap);i.found&&this.selection.select(i.index)}}else e.detail.dataTransfer.effectAllowed="none",this.props.showToastNotifications(W.HoldCursor,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION);else{const e=i.underlyingItem.data.id;o.suiteId||(o=(0,Q.getSuiteIdFromSelectedSuiteIndex)(a-1,this.props.testSuites,this.props.idToTreeItemExpandableStateMap),n=!0);const l=this.props.idToTestSuiteMap.get(o.suiteId);if(this.selection.selectedCount)o.suiteId&&(l&&2===l.suiteType?(this.selection.select(t.index),this.props.updateTestSuiteParent(this.props.testPlanId,e,o.suiteId)):this.props.showToastNotifications(W.CanDropOnStaticSuite,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION));else{const t=this.props.idToTestSuiteMap.get(e);if(l.parentSuite.id===t.parentSuite.id)this.props.reorderTestSuite(this.props.testPlanId,l.parentSuite.id,e,l.id,n);else{let i=(0,Q.getSuiteIdFromSelectedSuiteIndex)(a-1,this.props.testSuites,this.props.idToTreeItemExpandableStateMap);const o=this.props.idToTestSuiteMap.get(i.suiteId);(null===(s=null==o?void 0:o.parentSuite)||void 0===s?void 0:s.id)===t.parentSuite.id&&l.parentSuite.id!==(null==o?void 0:o.id)?this.props.reorderTestSuite(this.props.testPlanId,o.parentSuite.id,e,o.id,!0):this.props.updateParentAndReorderSuite(this.props.testPlanId,l.parentSuite.id,e,l.id,n)}}}},this._onDragOver=(e,t)=>{clearTimeout(this._dragDropTimerId),this.selection.clear();const s=this.selection;this._dragDropTimerId=setTimeout((function(){!function(e,t){t.select(e)}(t.index,s)}),700)},this._selectTextField=()=>{this._textField.current&&this._textField.current.select()},this.selection=new h.ListSelection,this._eventDispatch=new E.EventDispatch,this._registerKeyboardShortcuts(this.props),this._setInitialSelection(),this._context=t.pageContext,this._dragDropBehavior=new h.ListDragDropBehavior({allowedTypes:[q.SuitesConstants.TestSuiteDragItemType,q.SuitesConstants.TestCaseDragItemType],id:"test-suite-tree",onDragStart:this._onDragStart,onDrop:this._onDrop,onDragOver:this._onDragOver,renderDragImage:e=>{const t=e.detail.dataTransfer.data.underlyingItem.data;return o.createElement(h.ListDragImage,{text:t.title})},type:q.SuitesConstants.TestSuiteDragItemType}),this._showPanel=new u.ObservableValue(!1),this._onRightClick=this._onRightClick.bind(this),this._eventDispatch.addEventListener("contextmenu",this._onRightClick),this._isSuitesSortEnabled=(0,n.isFeatureFlagEnabled)(this._context,q.TestHubRefreshConstants.SortPlansAndSuitesAlphabeticallyFF,!1)}shouldComponentUpdate(e){return this.props.selectedSuiteId!==e.selectedSuiteId&&this._registerKeyboardShortcuts(e),e.isReload&&(this.props.testSuites&&this.props.testSuites.length>0&&(this.props.testSuites[0].children&&this.props.testSuites[0].children.length>0?this.selection.select(1):this.selection.select(0)),this.props.onUpdateReloadState(!1)),!0}componentWillUnmount(){this.context.pageContext.getService("SuiteTreeKeyboardShortcutProvider").unregisterKeyboardShortcuts()}componentDidUpdate(){this._selectTextField()}render(){let s=[],i="",a=-1,n=-1,l=new Map;this.props.testSuites&&(i=this.props.testPlanName,a=this.props.rootSuiteId,s=this.props.testSuites,l=this.props.idToTreeItemExpandableStateMap,n=this.props.editableSuiteId);let r={};if(s){const d=(new z.TestSuiteTreeItemDataProvider).populateItems(s,a,l,n,i,this._isSuitesSortEnabled);if(this._isSuitesSortEnabled){const e=(0,Q.getSelectionSuiteIndexFromSuiteId)(this.props.selectedSuiteId,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap);e&&e.found&&!this.selection.selected(e.index)&&this.selection.select(e.index)}const u=new z.TestSuiteTreeItemProvider(d);r=o.createElement("div",{className:"suite-tree-segment"},o.createElement("div",{className:"suite-tree-parent-container flex-grow flex-column left-tabs"},o.createElement("div",{className:"testhub-refresh-tree-container"},o.createElement(S.Header,{className:"testplans-hub-refresh-near-content-header title-s",title:W.Suites,titleSize:0},o.createElement("div",{className:"suite-tree-header-command-bar"},o.createElement(m.ConnectedHeaderCommandBar,{showFilter:!1,commandsSelector:t[e].CommandSelector,viewActionsSelector:this._viewActions}))),o.createElement(b.Tree,{eventDispatch:this._eventDispatch,containerClassName:"testhub-refresh-tree custom-scrollbar",className:"testhub-refresh-tree",showHeader:!1,columns:this._getColumns(),itemProvider:u,showLines:!1,singleClickActivation:!1,onToggle:(e,t)=>{this._onToggleTreeItem(u,t)},onSelect:(e,t)=>{this._onSelectedItemsChanged(t.data.underlyingItem.data.id,t.data.underlyingItem.data.title)},selection:this.selection,scrollable:!0,behaviors:[this._dragDropBehavior]}))),o.createElement(I.Observer,{showPanel:this._showPanel},(e=>e.showPanel&&o.createElement(p.WrappedComponent,{dependencies:["ms.vss-test-web.testsuite-import-panel"],wrappedType:"import-test-suite-panel",wrappedProps:{showPanel:this._showPanel,destinationSuiteId:this.contextMenuSuiteId,destinationPlanId:this.props.testPlanId,destinationAreaPath:this.props.testPlanAreaPath,destinationIterationPath:this.props.testPlanIterationPath}}))))}return r}_getColumns(){const e=[];if(e.push({id:"title",renderCell:this._renderCell,width:-150}),-1===this.props.editableSuiteId&&this.props.isAdvancedLicenseEnabled){const t=new y.ColumnMore((e=>({id:"list-context-menu",items:this._getContextualSuitesItems(e.underlyingItem.data)})));e.push(t)}return e}_onToggleTreeItem(e,t){e.toggle(t.underlyingItem);const s=t.underlyingItem.data.id,i=t.underlyingItem.expanded;this.props.changeTreeItemExpandableState(s,i)}_registerKeyboardShortcuts(e){this.context.pageContext.getService("IVssContributionService").getContributionAsync("ms.vss-test-web.keyboard-shortcuts-module").then((()=>{const t=this.context.pageContext.getService("SuiteTreeKeyboardShortcutProvider"),s=e.selectedSuiteId,i=e.idToTestSuiteMap.get(s);if(i){const e=!!i.parentSuite,s={title:i.name,type:i.suiteType,id:i.id,hasParent:e,isInEditMode:!0},a={planId:this.props.testPlanId,rootSuiteId:this.props.rootSuiteId,suite:s,dispatch:this.props.dispatch,planAreaPath:this.props.testPlanAreaPath,selection:this.selection};t.registerKeyboardShortcuts(a)}}))}_setInitialSelection(){const e=(0,Q.getSelectionSuiteIndexFromSuiteId)(this.props.selectedSuiteId,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap);this.selection.select(e.index);const t=this.props.idToTestSuiteMap.get(this.props.selectedSuiteId);if(t){const e=t.name;this.props.updateTestSuiteName(this.props.selectedSuiteId,e,this.props.rootSuiteId)}}_onRightClick(e){if(e.button===q.TestHubRefreshConstants.RIGHT_MOUSE_BUTTON){e.preventDefault();const{cellElement:t,rowIndex:s}=(0,h.cellFromEvent)(e);if(s>=0){const t=(new z.TestSuiteTreeItemDataProvider).populateItems(this.props.testSuites,this.props.rootSuiteId,this.props.idToTreeItemExpandableStateMap,this.props.editableSuiteId,this.props.testPlanName,this._isSuitesSortEnabled);if(this._isSuitesSortEnabled){const e=(0,Q.getSelectionSuiteIndexFromSuiteId)(this.props.selectedSuiteId,this.props.testSuites,-1,this.props.idToTreeItemExpandableStateMap);e&&e.found&&!this.selection.selected(e.index)&&this.selection.select(e.index)}const i=new z.TestSuiteTreeItemProvider(t);this.context.pageContext.getService("IVssLayoutManager").renderCallout((t=>o.createElement(f.ContextualMenu,{menuProps:{id:"test-suite-context-menu-column",items:this._getContextualSuitesItems(i.value[s].underlyingItem.data)},anchorElement:e.currentTarget,anchorPoint:{x:e.pageX,y:e.pageY},onDismiss:t},null)))}}}}function i(e){const t=o.useContext(X.TestHubRefreshLocalContext);return o.createElement(s,Object.assign({},e,{testhubRefreshContext:t}))}t[e].SuiteTreeView=s,t[e].CommandSelector=d.createSelector([()=>{}],(()=>[])),t[e].SuiteTreeFunctionalComponent=i,t[e].SuiteTreeConnectedView=(0,r.connect)((function(e){return{testPlanName:e.testHubRefreshState.testPlanName,testPlanId:e.testHubRefreshState.testPlanId,selectedSuiteId:e.testHubRefreshState.selectedSuiteId,testSuites:e.suiteState.testSuites,rootSuiteId:e.testHubRefreshState.rootSuiteId,isAdvancedLicenseEnabled:e.testHubRefreshState.isAdvancedExtensionEnabled,testPlanAreaPath:e.testHubRefreshState.testPlanAreaPath,testPlanIterationPath:e.testHubRefreshState.testPlanIteration,idToTreeItemExpandableStateMap:e.suiteState.idToTreeItemExpandableStateMap,idToTestSuiteMap:e.suiteState.idToTestSuiteMap,editableSuiteId:e.suiteState.editableSuiteId,isReload:e.testHubRefreshState.isReload,selectedBuildDefnId:e.testHubRefreshState.selectedBuildDefnId,isShowTestsFromChildSuitesEnabled:e.testHubRefreshState.isShowTestsFromChildSuitesEnabled,isInGridView:e.testHubRefreshState.isInGridView,isGridDirty:e.testHubRefreshState.isGridDirty}}),(function(e){return{onSelectedSuite:(t,s,i)=>e(K.SuitesActions.changeSelectedSuite(t,s,i)),updateTestSuiteName:(t,s,i)=>e(K.SuitesActions.updateTestSuiteName(t,s,i)),changeTreeItemExpandableState:(t,s)=>e(K.SuitesActions.changeTreeItemExpandableState(t,s)),saveTestSuiteName:(t,s,i,a,n)=>e(K.SuitesActions.saveTestSuiteName(t,s,i,a,n)),onUpdateReloadState:t=>e(K.SuitesActions.updateReloadState(t)),updateTestSuiteParent:(t,s,i)=>e(K.SuitesActions.updateTestSuiteParent(t,s,i)),reorderTestSuite:(t,s,i,a,n)=>e(K.SuitesActions.reorderTestSuite(t,s,i,a,n)),updateParentAndReorderSuite:(t,s,i,a,n)=>e(K.SuitesActions.updateParentAndReorderSuite(t,s,i,a,n)),showToastNotifications:(t,s)=>e(K.SuitesActions.showToastNotifications(t,s)),expandCollapseAllSuites:t=>e(K.SuitesActions.expandCollapseAllSuites(t)),moveTestCaseToSuite:(t,s,i,a,n,o)=>e(K.SuitesActions.moveTestCaseToSuite(t,s,i,a,n,o)),showTestsFromChildSuitesClick:(t,s,i)=>e(Y.TestHubRefreshActions.showTestsFromChildSuitesClick(t,s,i)),fetchTestCasesCount:t=>e(K.SuitesActions.getSuiteTestCasesCount(t,[],[])),closeGrid:(t,s)=>e(Y.TestHubRefreshActions.closeGrid(t,s)),dispatch:e}}))(i)}("ComponentSuiteTreeConnectedView"),function(e){J=t[e]={};class s extends p.VssComponent{constructor(e){super(e)}render(){return o.createElement("div",{className:"testplans-hub-left-view v-scroll-auto custom-scrollbar"},o.createElement(p.RegionComponent,{className:"testplans-segment",componentRegion:"testplans-segment-region"}),o.createElement(Z.SuiteTreeConnectedView,null))}}t[e].TestPlansHubRefreshLeftView=s}("ComponentTestPlansHubRefreshLeftView"),function(e){$=t[e]={};class s extends p.VssComponent{constructor(e,t){super(e,t),this._handleNavigateAway=e=>{if(this.props.isInGridView&&this.props.isGridDirty){const t=e.detail;if(t&&t.href){if(t.data&&t.data.isPageSwitchConfirmed)return;e.preventDefault(),confirm(W.UnsavedChangesMessage)&&(this._closeGrid(),t.data=t.data||{},t.data.isPageSwitchConfirmed=!0,(0,P.FastPageSwitch)(t.pageContext,t.href,t.recordHistoryEntry,t.data))}else e.returnValue=!0}},this._onSelectedTabChanged=e=>{if(!this.props.isInGridView||!this.props.isGridDirty||confirm(W.UnsavedChangesMessage)){this.props.selectedTab.value=e,X.testHubRefreshLocalContextData.setCurrentPivot(e);const t={newPivot:e,isAdvancedLicenseEnabled:(0,Q.getDataProviderContent)(this.context.pageContext).isAdvancedExtensionEnabled};this.props.publishTelemetry(q.TelemetryConstants.PIVOT_CHANGED,t),this.props.setGridView(!1);let s={SelectedPivotId:e};const i=this.context.pageContext.getService("ISettingsService"),n=this.context.pageContext.getService("ITfsPageService").getData();if(n&&n.project&&i.setEntries(s,0,"project",n.project.id),e!==q.TestHubRefreshConstants.DEFINE_TAB_ID&&e!==q.TestHubRefreshConstants.EXECUTE_TAB_ID&&e!==q.TestHubRefreshConstants.CHART_TAB_ID){const t=this.context.pageContext.getService("IVssHistoryService"),s=t.getState();s[q.TestHubRefreshConstants.PIVOT_ID]=e,t.pushState(s),this._setContributedProvider()}let o;if(0===(0,a.localeIgnoreCaseComparer)(e,q.TestHubRefreshConstants.DEFINE_TAB_ID)?o=q.TelemetryConstants.AUTHOR_PIVOT_PAGE_LOAD_TTI_SCENARIO:0===(0,a.localeIgnoreCaseComparer)(e,q.TestHubRefreshConstants.EXECUTE_TAB_ID)&&(o=q.TelemetryConstants.EXECUTE_PIVOT_PAGE_LOAD_TTI_SCENARIO),o){const e={ttiScenario:"PivotChanged"};this.context.pageContext.getService("IVssPerformanceService").startScenario(o,!0,void 0,e)}}this.props.isInGridView&&e===q.TestHubRefreshConstants.DEFINE_TAB_ID&&this._closeGrid()},this._viewActions=()=>{const e=[];return X.testHubRefreshLocalContextData.getCurrentPivot()===q.TestHubRefreshConstants.DEFINE_TAB_ID&&((0,n.isFeatureFlagEnabled)(this.context.pageContext,q.TestHubRefreshConstants.EnableExportImportTestCasesFF,!1)&&e.push({id:"export-test-cases",iconProps:{iconName:"Download",className:"export-icon"},subtle:!0,onActivate:()=>{this.props.onExportTestCasesClick(this.props.testPlanId,this.props.selectedSuiteId,this.props.testPlanName,this.props.selectedSuiteName)},tooltipProps:{text:W.ExportTestCases},important:!0}),1!==this.props.suiteType&&((0,n.isFeatureFlagEnabled)(this.context.pageContext,q.TestHubRefreshConstants.EnableExportImportTestCasesFF,!1)&&e.push({id:"import-test-cases",iconProps:{iconName:"Upload",className:"import-icon"},subtle:!0,onActivate:()=>{this._showImportPanel.value=!0;const e={planId:this.props.testPlanId,suiteId:this.props.selectedSuiteId,areaPath:this.props.areaPath,iterationPath:this.props.iterationPath};this.props.publishTelemetry(q.TelemetryConstants.CLICK_IMPORT_TESTCASES,e)},tooltipProps:{text:W.ImportTestCases},important:!0}),e.push({ariaLabel:W.GridView,id:"view-toggle",iconProps:{iconName:"GridViewSmall"},subtle:!0,onActivate:()=>{this.props.setGridView(!0),this.props.showSuiteLevelGrid(this.props.testPlanId,this.props.selectedSuiteId,this.props.testPlanName,this.props.areaPath,this.props.iterationPath)},className:"view-toggle-button",tooltipProps:{text:W.GridView},important:!0}))),0!==(0,a.localeIgnoreCaseComparer)(this.props.selectedTab.value,q.TestHubRefreshConstants.DEFINE_TAB_ID)&&0!==(0,a.localeIgnoreCaseComparer)(this.props.selectedTab.value,q.TestHubRefreshConstants.EXECUTE_TAB_ID)||((0,n.isFeatureEnabled)(this.context.pageContext,"ms.vss-work-web.new-boards-hub-feature",!1)&&e.push({ariaLabel:W.TogglePreviewPane,id:"preview-pane",iconProps:{iconName:"DockRight"},subtle:!this.props.isPreviewEnabled,onActivate:()=>{this.props.isPreviewEnabled?this.props.togglePreview(q.PreviewSplitterOptions.OFF):this.props.togglePreview(q.PreviewSplitterOptions.RIGHT)},className:"toggle-preview-button",tooltipProps:{text:W.TogglePreviewPane},important:!0}),e.push({ariaLabel:W.ColumnOptions,id:"column-options",iconProps:{iconName:"TripleColumnEdit"},subtle:!0,onActivate:()=>{this.props.editColumnOptions(this.props.testPlanId,this.props.selectedSuiteId)},className:"column-options-button",tooltipProps:{text:W.ColumnOptions},important:!0})),e.push({ariaLabel:W.ToggleFullScreenMode,iconProps:{render:e=>{const t=this.context.pageContext.getService("IVssLayoutManager");return o.createElement(I.Observer,{fullScreenMode:t.getFullScreenMode()},(t=>o.createElement(T.Icon,{className:(0,p.css)(e,"medium"),iconName:t.fullScreenMode?"BackToWindow":"FullScreen"})))}},id:"fullscreen",onActivate:()=>{const e=this.context.pageContext.getService("IVssLayoutManager");e.setFullScreenMode(!e.getFullScreenMode().value)},subtle:!0,tooltipProps:{text:W.ToggleFullScreenMode},important:!0}),e},this._openHelpInfo=()=>{let e=window.open(q.TestHubRefreshConstants.DocLinkNewTestPlansPage,"_blank");e&&e.opener&&(e.opener=null);const t={currentPivot:this.props.selectedTab.value,isAdvancedLicenseEnabled:this.props.isAdvancedLicenseEnabled,testPlanId:this.props.testPlanId};this.props.publishTelemetry(q.TelemetryConstants.HELP_TEST_PLANS_PAGE,t)},(0,X.initializeTestHubLocalContext)(this.props.selectedTab.value),this._setContributedProvider(),this._showImportPanel=new u.ObservableValue(!1),this._isExtraSmallWidth=new u.ObservableValue(!0),this._showCloneProgressToast=new u.ObservableValue(!1),this._handleNavigateAway=this._handleNavigateAway.bind(this)}componentDidMount(){document.body.addEventListener("fpsStarting",this._handleNavigateAway),window.addEventListener("beforeunload",this._handleNavigateAway),this.props.getMineAllPageUrl();this.context.pageContext.getService("IVssContributionService").getContributionAsync("ms.vss-test-web.breadcrumb-service").then((()=>{const e=this.context.pageContext.getService("testplans-hub-refresh-breadcrumb-service");e.addBreadCrumb("HubGroup","Test Plans",this.props.mineAllPageUrl,q.TestHubRefreshConstants.BREADCRUMB_PRIRORITY),e.addBreadCrumb("Hub",this.props.testPlanName,void 0,q.TestHubRefreshConstants.BREADCRUMB_PRIRORITY)}))}componentDidUpdate(){this._adjustSuiteTreeHeight()}componentWillUnmount(){document.body.removeEventListener("fpsStarting",this._handleNavigateAway),window.removeEventListener("beforeunload",this._handleNavigateAway)}render(){const{selectedTab:e}=this.props,t=this.context.pageContext.getService("IVssLayoutManager");this.props.opId&&this.props.opId>0&&(this._showCloneProgressToast.value=!0);let s=o.createElement(o.Fragment,null);return this.props.isBusy&&(s=o.createElement("div",{className:"testplans-hub-refresh-busy-view"},o.createElement(w.Spinner,{className:"testplans-spinner-pos flex-grow",size:"large"}))),o.createElement(o.Fragment,null,o.createElement(X.TestHubRefreshLocalContext.Provider,{value:X.testHubRefreshLocalContextData},o.createElement(o.Fragment,null,o.createElement(x.Page,{className:"testplans-hub-refresh-page",tabProviders:this._pivotProvider,selectedTabId:e},o.createElement(I.Observer,{fullScreenMode:t.getFullScreenMode(),isExtraSmallWidth:this._isExtraSmallWidth},(e=>o.createElement(N.ScreenSizeObserver,null,(t=>{const s=0===t.screenSize;return this._isExtraSmallWidth.value=s,this._adjustSuiteTreeHeight(),o.createElement(H.Splitter,{splitterDirection:s?1:0,nearElementClassName:"flex flex-column",farElementClassName:"test-hub-refresh-far-content",fixedElement:0,fixedSize:void 0!==this.props.splitterWidth?this.props.splitterWidth:320,minFixedSize:s?.3*window.innerHeight:.04*window.innerWidth,maxFixedSize:s?.4*window.innerHeight:.8*window.innerWidth,className:"test-plans-hub-refresh-splitter",onRenderFarElement:this._renderFarContent.bind(this),onRenderNearElement:e.fullScreenMode?void 0:this._renderNearContent.bind(this),onFixedSizeChanged:e=>{s?this._adjustSuiteTreeHeight():this._adjustTestplanDropdownMaxWidth(e),this.props.saveSplitterWidth(e)}})})))),o.createElement(I.Observer,{showToast:this._showCloneProgressToast},(e=>e.showToast&&o.createElement(p.WrappedComponent,{dependencies:["ms.vss-test-web.testplan-clone-progress"],wrappedType:"testplan-clone-progress",wrappedProps:{opId:this.props.opId,planId:this.props.testPlanId}})))),s)))}shouldComponentUpdate(e){const t=this.context.pageContext.getService("IVssHistoryService"),s=t.getState();return s&&(s[q.TestHubRefreshConstants.QUERY_PARAM_PLAN_ID]===e.testPlanId.toString()&&s[q.TestHubRefreshConstants.QUERY_PARAM_SUITE_ID]===e.selectedSuiteId.toString()&&s[q.TestHubRefreshConstants.PIVOT_ID]===e.selectedTab.value||(s[q.TestHubRefreshConstants.QUERY_PARAM_PLAN_ID]=e.testPlanId.toString(),s[q.TestHubRefreshConstants.QUERY_PARAM_SUITE_ID]=e.selectedSuiteId.toString(),s[q.TestHubRefreshConstants.PIVOT_ID]=e.selectedTab.value,t.pushState(s),this._setContributedProvider())),!0}_renderNearContent(){return o.createElement(J.TestPlansHubRefreshLeftView,null)}_renderFarContent(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"testplans-hub-refresh-rhs-container flex-grow"},o.createElement(S.Header,{className:"testplans-hub-refresh-far-content-header title-s",title:this.props.selectedSuiteName+" ("+W.ID+": "+this.props.selectedSuiteId+")",titleSize:0},o.createElement(v.Link,{className:"help-link-button",onClick:this._openHelpInfo,ariaLabel:W.HelpLinkAriaLabelForNewTestPlansPage,role:"link"},o.createElement("span",{className:"help-link-icon bowtie-icon bowtie-status-help-outline"}),o.createElement("span",null,W.Help))),o.createElement(D.TabBar,{className:"testplans-hub-refresh-tab-bar",onSelectedTabChanged:this._onSelectedTabChanged,tabSize:"tall",renderAdditionalContent:this._getPivotBarItems.bind(this)}),o.createElement(D.TabContent,null)),o.createElement(I.Observer,{showPanel:this._showImportPanel},(e=>e.showPanel&&o.createElement(p.WrappedComponent,{dependencies:["ms.vss-test-web.testcases-import-module"],wrappedType:"testcases-import-panel",wrappedProps:{showPanel:this._showImportPanel,planId:this.props.testPlanId,areaPath:this.props.areaPath,iterationPath:this.props.iterationPath,suite:this.props.idToTestSuiteMap.get(this.props.selectedSuiteId)}}))))}_getPivotBarItems(){const s=0===(0,a.localeIgnoreCaseComparer)(this.props.selectedTab.value,q.TestHubRefreshConstants.DEFINE_TAB_ID)||0===(0,a.localeIgnoreCaseComparer)(this.props.selectedTab.value,q.TestHubRefreshConstants.EXECUTE_TAB_ID);return 1==this.props.isInGridView?o.createElement(_.Button,{className:"testplans-header-command-bar",text:W.CloseGrid,primary:!0,onClick:()=>{!0===this.props.isGridDirty?confirm(W.UnsavedChangesMessage)&&this._closeGrid():this._closeGrid()}}):o.createElement("div",{className:"testplans-header-command-bar flex-row h-scroll-auto custom-scrollbar"},o.createElement(m.ConnectedHeaderCommandBar,{showFilter:s,commandsSelector:t[e].CommandSelector,viewActionsSelector:this._viewActions}))}_closeGrid(){this.props.closeGrid(this.props.testPlanId,this.props.selectedSuiteId),this.props.reloadTestCasesForSelectedSuite(this.props.testPlanId,this.props.selectedSuiteId,this.props.selectedSuiteName)}_setContributedProvider(){const e=this.context.pageContext.getService("IVssNavigationService").getCurrentRoute().routeValues,t=new R.Uri(window.location.href).queryParameters,s={};t&&t.length>0&&t.forEach((e=>{e.name&&e.value&&(s[e.name]=e.value)}));const i=Object.assign({project:e.project},s);let a;a=(0,Q.getDataProviderContent)(this.context.pageContext).isAdvancedExtensionEnabled?"ms.vss-test-web.testplans-hub-refresh:pivots":"ms.vss-test-web.testplans-hub-refresh:pivots-limited";const o=new u.ObservableCollection;if((0,A.addTabs)(this.context.pageContext,o,a,{routeValues:i,updateUrlOnPivotChange:!0}),(0,n.isFeatureFlagEnabled)(this.context.pageContext,q.TestHubRefreshConstants.EnableThirdPartyTabContributionsFF,!1)){let t=this.props.selectedSuiteId;s.suiteId&&(t=Number(s.suiteId));const i=this.props.idToTestSuiteMap.get(t);if(i){const t={updateUrlOnPivotChange:!0,contextualData:{selectedPlan:{id:this.props.testPlanId,name:this.props.testPlanName,areaPath:this.props.areaPath,iteration:this.props.iterationPath,rootSuiteId:this.props.rootSuiteId},selectedSuite:{id:i.id,name:i.name,suiteType:this.props.suiteType,pointCount:i.pointCount,parentSuiteId:i.parentSuite?i.parentSuite.id:0,queryText:i.queryString,requirementId:i.requirementId,revision:i.revision},showChildSuites:this.props.isShowTestsFromChildSuitesEnabled},preProcessTabContribution:t=>{t.render=void 0,t.content="legacyContributionContent",t.routeId="ms.vss-test-web.testplans-hub-refresh-route",t.routeValues={project:e.project,pivots:this.props.selectedTab.value}}};(0,A.addTabs)(this.context.pageContext,o,"ms.vss-test-web.test-plan-pivot-tabs",t)}}this._pivotProvider=o}_adjustTestplanDropdownMaxWidth(e){const t=document.getElementsByClassName("testplan-dropdown-button");t&&t[0]&&t[0].children&&t[0].children[0]&&t[0].children[0].setAttribute("style","max-width: "+(e-135)+"px")}_adjustSuiteTreeHeight(){var e,t,s;const i=document.getElementsByClassName("testplans-hub-left-view"),a=document.getElementsByClassName("testplans-segment"),n=document.getElementsByClassName("suite-tree-segment");if(i&&i[0]&&a&&a[0]){const s=i[0].offsetHeight,o=a[0].offsetHeight;!1===this._isExtraSmallWidth.value?null===(e=n[0])||void 0===e||e.setAttribute("style","height: "+(s-o)+"px"):null===(t=n[0])||void 0===t||t.setAttribute("style","height: auto")}const o=document.getElementsByClassName("testhub-refresh-tree-container"),l=document.getElementsByClassName("testplans-hub-refresh-near-content-header");if(o&&o[0]&&l&&l[0]){const e=document.getElementsByClassName("testhub-refresh-tree"),t=o.offsetHeight,i=l[0].offsetHeight;e&&e[0]&&(null===(s=e[0])||void 0===s||s.setAttribute("style","max-height: "+(t-i)+"px"))}}}t[e].TestPlansHubRefreshView=s,t[e].CommandSelector=d.createSelector([()=>{}],(()=>[])),t[e].TestPlansHubRefreshConnectedView=(0,r.connect)((function(e,t){let s=e.suiteState.idToTestSuiteMap.get(e.testHubRefreshState.selectedSuiteId),i=0,a=e.testHubRefreshState.testCasePreviewStatus;return s&&(i=s.suiteType),{testPlanId:e.testHubRefreshState.testPlanId,testPlanName:e.testHubRefreshState.testPlanName,areaPath:e.testHubRefreshState.testPlanAreaPath,iterationPath:e.testHubRefreshState.testPlanIteration,rootSuiteId:e.testHubRefreshState.rootSuiteId,suiteType:i,testSuites:e.suiteState.testSuites,selectedSuiteId:e.testHubRefreshState.selectedSuiteId,selectedSuiteName:e.testHubRefreshState.selectedSuiteName,isLoading:e.testHubRefreshState.isLoading,isBusy:e.testHubRefreshState.isBusy,isAdvancedLicenseEnabled:e.testHubRefreshState.isAdvancedExtensionEnabled,isInGridView:e.testHubRefreshState.isInGridView,isGridDirty:e.testHubRefreshState.isGridDirty,splitterWidth:e.testHubRefreshState.splitterWidth,idToTestSuiteMap:e.suiteState.idToTestSuiteMap,isShowTestsFromChildSuitesEnabled:e.testHubRefreshState.isShowTestsFromChildSuitesEnabled,mineAllPageUrl:e.testHubRefreshState.mineAllPageUrl,isPreviewEnabled:a===q.PreviewSplitterOptions.RIGHT}}),(function(e){return{publishTelemetry:(t,s)=>e(j.TelemetryActions.publishTelemetry(t,s)),setGridView:t=>e(Y.TestHubRefreshActions.setGridView(t)),editColumnOptions:(t,s)=>e(Y.TestHubRefreshActions.editColumnOptionFieldsClicked(t,s)),togglePreview:t=>e(Y.TestHubRefreshActions.saveTestCasePreviewStatus(t)),reloadTestCasesForSelectedSuite:(t,s,i)=>e(K.SuitesActions.changeSelectedSuite(t,s,i)),showSuiteLevelGrid:(t,s,i,a,n)=>e(Y.TestHubRefreshActions.showSuiteLevelGrid(t,s,i,a,n)),saveSplitterWidth:t=>e(K.SuitesActions.saveSplitterWidth(t)),onExportTestCasesClick:(t,s,i,a)=>e(K.SuitesActions.exportTestCasesToCSV(t,s,i,a)),closeGrid:(t,s)=>e(Y.TestHubRefreshActions.closeGrid(t,s)),getMineAllPageUrl:()=>e(K.SuitesActions.getMineAllPageUrl())}}))(s)}("ComponentTestPlansHubRefreshConnectedView"),function(e){function s(e){const t=[];if(e){const i=e.length;for(let a=0;a<i;a++){t.push(e[a].id);const i=s(e[a].children);t.push(...i)}}return t}function i(e,t,s){const a=e.length;for(let n=0;n<a;n++)e[n].children&&e[n].children.length>0&&(t.set(e[n].id,s),i(e[n].children,t,s));return t}function a(e,t){t||(t=new Map);const s=e.length;for(let i=0;i<s;i++)e[i].hasChildren&&a(e[i].children,t),t.set(e[i].id,e[i]);return t}function n(e,t){if(!e)return{pointCount:0,totalPointCount:0};let s={pointCount:e.pointCount?e.pointCount:0,totalPointCount:e.totalPointCount?e.totalPointCount:0};for(let i=0;e.children&&i<e.children.length;i++){const a=e.children[i].id,o=n(t.get(a),t);s.pointCount+=o.pointCount,s.totalPointCount+=o.totalPointCount}return s}ee=t[e]={},t[e].SuitesReducer=function(e,t){return e=e||{},(0,F.default)(e,(o=>{switch(t.type){case"Suites/loadInitialTestDataSucceeded":o.testSuites=t.payload.testSuites,o.idToTestSuiteMap=a(t.payload.testSuites),o.idToTreeItemExpandableStateMap=new Map,o.editableSuiteId=-1,o.idToTreeItemExpandableStateMap=function(e,t,s){const i=new Map,a=[];i.set(e,!0);for(;t!==e;){const e=s.get(t);if(!e)break;{const s=e.parentSuite.id;a.unshift(s),t=s}}for(let e=0;e<a.length;e++)i.set(a[e],!0);return i}(t.payload.testSuites[0].id,t.payload.selectedSuiteId,o.idToTestSuiteMap);break;case"Suites/updateTestSuiteName":o.editableSuiteId=-1;o.idToTestSuiteMap.get(t.payload.testSuiteId).name=t.payload.testSuiteTitle,o.testSuites=[e.idToTestSuiteMap.get(t.payload.rootSuiteId)];break;case"Suites/loadNewSuites":o.editableSuiteId=t.payload.editableSuiteId;for(let s=0;s<t.payload.testSuites.length;s++){const i=o.idToTestSuiteMap.get(t.payload.parentSuiteId);i.hasChildren||(i.hasChildren=!0,i.children=[]),i.children.unshift(t.payload.testSuites[s]),o.idToTestSuiteMap.set(t.payload.testSuites[s].id,t.payload.testSuites[s]),o.idToTreeItemExpandableStateMap.set(t.payload.parentSuiteId,!0),o.testSuites=[e.idToTestSuiteMap.get(t.payload.rootSuiteId)]}break;case"Suites/removeSuite":const l=e.idToTestSuiteMap.get(t.payload.suiteId);let r=o.idToTestSuiteMap.get(l.parentSuite.id),d=[];d=function(e){return s(e.children)}(l);for(let e=0;e<r.children.length;e++)if(r.children[e].id===t.payload.suiteId){r.children.splice(e,1);break}0==r.children.length&&(r.hasChildren=!1,o.idToTreeItemExpandableStateMap.set(r.id,!1)),o.idToTestSuiteMap.delete(t.payload.suiteId),o.idToTreeItemExpandableStateMap.delete(t.payload.suiteId);const u=d.length;for(let e=0;e<u;e++)o.idToTestSuiteMap.delete(d[e]),o.idToTreeItemExpandableStateMap.delete(d[e]);o.testSuites=[e.idToTestSuiteMap.get(t.payload.rootSuiteId)];break;case"Suites/showSuitePointsCount":const c=t.payload.suitePointCount,p=e.testSuites[0].id;o.idToTestSuiteMap.forEach(((e,t)=>{e.pointCount=0,e.totalPointCount=0}));for(let e=0;e<c.length;e++){const t=o.idToTestSuiteMap.get(c[e].testSuiteId);t&&(t.pointCount=c[e].count,t.totalPointCount=c[e].totalCount)}if(t.payload.showTestsFromChildSuitesEnabled){let e=new Map(JSON.parse(JSON.stringify(Array.from(o.idToTestSuiteMap))));for(let t=0;t<c.length;t++){const s=o.idToTestSuiteMap.get(c[t].testSuiteId);if(s){let t=n(s,e);t&&(s.pointCount=t.pointCount,s.totalPointCount=t.totalPointCount)}}o.idToTestSuiteMap.forEach(((t,s)=>{if(0===t.totalPointCount){let s=n(t,e);s&&(t.pointCount=s.pointCount,t.totalPointCount=s.totalPointCount)}}))}o.testSuites=[e.idToTestSuiteMap.get(p)];break;case"Suites/showSuiteTestCasesCount":const S=t.payload.suiteTestCasesCount,T=e.testSuites[0].id;o.idToTestSuiteMap.forEach(((e,t)=>{e.testCaseCount=0,e.totalTestCaseCount=0}));for(let e=0;e<S.length;e++){const t=o.idToTestSuiteMap.get(S[e].testSuiteId);t&&(t.testCaseCount=S[e].count,t.totalTestCaseCount=S[e].totalCount)}o.testSuites=[e.idToTestSuiteMap.get(T)];break;case"Suites/changeTreeItemExpandableState":o.idToTreeItemExpandableStateMap.set(t.payload.suiteId,t.payload.expandedState);break;case"Suites/editTestSuiteName":o.editableSuiteId=t.payload.suiteId;break;case"Suites/loadTestSuites":o.testSuites=t.payload.testSuites,o.idToTestSuiteMap=a(t.payload.testSuites),o.idToTreeItemExpandableStateMap.set(t.payload.testSuites[0].id,!0);break;case"TestHubRefreshActions/updateTestPlan":const h=e.testSuites[0].id;o.idToTestSuiteMap.get(h).name=t.payload.testPlanName,o.testSuites=[e.idToTestSuiteMap.get(h)];break;case"Suites/queryEdited":o.editableSuiteId=-1;o.idToTestSuiteMap.get(t.payload.suiteId).queryString=t.payload.queryText,o.testSuites=[e.idToTestSuiteMap.get(e.testSuites[0].id)];break;case"Suites/reorderTestSuiteSucceeded":let f=o.idToTestSuiteMap.get(t.payload.suiteId),I=o.idToTestSuiteMap.get(f.parentSuite.id);for(let e=0;e<I.children.length;e++)I.children[e].id===t.payload.targetSuiteId?(t.payload.dropAtEnd?I.children.splice(e+1,0,f):I.children.splice(e,0,f),e++):I.children[e].id===t.payload.suiteId&&(I.children.splice(e,1),e--);o.testSuites=[e.idToTestSuiteMap.get(e.testSuites[0].id)];break;case"Suites/updateTestSuiteParentSucceeded":let m=o.idToTestSuiteMap.get(t.payload.suiteId),y=o.idToTestSuiteMap.get(m.parentSuite.id);for(let e=0;e<y.children.length;e++)if(y.children[e].id===t.payload.suiteId){y.children.splice(e,1);break}0==y.children.length&&(y.hasChildren=!1,o.idToTreeItemExpandableStateMap.set(y.id,!1));let C=o.idToTestSuiteMap.get(t.payload.targetParentSuiteId);null!=C.hasChildren&&0!=C.hasChildren||(C.hasChildren=!0,C.children=[]),m.parentSuite.id=C.id,m.parentSuite.name=C.name,C.children.unshift(m),o.idToTreeItemExpandableStateMap.set(C.id,!0),o.testSuites=[e.idToTestSuiteMap.get(e.testSuites[0].id)];break;case"Suites/expandCollapseAllSuites":o.idToTreeItemExpandableStateMap=i(o.testSuites,new Map,t.payload.expandCollapseBool)}}))}}("ReduxSuitesSuitesReducer"),function(e){te=t[e]={};t[e].isAdvancedLicenseEnabled=e=>e.testHubRefreshState.isAdvancedExtensionEnabled;t[e].isShowTestsFromChildSuitesEnabled=e=>e.testHubRefreshState.isShowTestsFromChildSuitesEnabled;t[e].getPlanId=e=>e.testHubRefreshState.testPlanId;t[e].getSelectedSuiteId=e=>e.testHubRefreshState.selectedSuiteId;t[e].getInitiallySelectedSuiteId=e=>e.testHubRefreshState.initialSelectedSuiteId;t[e].getTestCasePageSize=e=>e.testHubRefreshState.testCasePageSize;t[e].getTestPointPageSize=e=>e.testHubRefreshState.testPointPageSize,t[e].getIdentityDisplayString=function(e){let t=W.UnassignedString;if(!e||e.trim().length<=0)return t;t=e;const s=e.indexOf("<");return e&&s>0&&(t=e.substr(0,s-1)),t};t[e].getExecuteColumnOptionFields=e=>e.testHubRefreshState.executeColumnOptionFields;t[e].getDefineColumnOptionFields=e=>e.testHubRefreshState.defineColumnOptionFields;t[e].getDefineTabCustomColumnFieldMap=e=>e.testHubRefreshState.defineTabCustomColumnFieldMap;t[e].getExecuteTabCustomColumnFieldMap=e=>e.testHubRefreshState.executeTabCustomColumnFieldMap}("ReduxTestHubRefreshTestHubRefreshSelector"),function(e){se=t[e]={};t[e].getIdToTreeItemExpandableStateMap=e=>e.suiteState.idToTreeItemExpandableStateMap;t[e].getIdToTestSuiteMap=e=>e.suiteState.idToTestSuiteMap;t[e].getTestSuites=e=>e.suiteState.testSuites;t[e].getTestSuiteById=(e,t)=>e.suiteState.idToTestSuiteMap.get(t)}("ReduxSuitesSuitesSelector"),function(e){ie=t[e]={};let s=!0;function*l(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService"),a=yield i.effects.call([s,s.getTestPlanById],e.payload.planId);yield i.effects.put(K.SuitesActions.loadTestPlan(a));const n=yield i.effects.call([s,s.getTestSuitesForPlan],e.payload.planId,1,"",!0);yield i.effects.put(K.SuitesActions.loadTestSuites(n));let o=a.rootSuite.id,l=a.rootSuite.name;n[0].hasChildren&&(o=n[0].children[0].id,l=n[0].children[0].name),yield i.effects.put(K.SuitesActions.updateReloadState(!0)),yield i.effects.put(K.SuitesActions.changeSelectedSuite(a.id,o,l)),yield i.effects.put(K.SuitesActions.fetchSplitterWidth());const r=yield i.effects.call([t,t.getService],"IVssContributionService");yield i.effects.call([r,r.getContributionsAsync],["ms.vss-test-web.breadcrumb-service"]);const d=yield i.effects.call([t,t.getService],"testplans-hub-refresh-breadcrumb-service");d&&(d.clearTestPlanNameBreadcrumb(),d.addBreadCrumb("Hub",a.name,void 0,q.TestHubRefreshConstants.BREADCRUMB_PRIRORITY)),X.testHubRefreshLocalContextData.getCurrentPivot()===q.TestHubRefreshConstants.DEFINE_TAB_ID?yield i.effects.put(K.SuitesActions.getSuiteTestCasesCount(e.payload.planId,[],[])):X.testHubRefreshLocalContextData.getCurrentPivot()===q.TestHubRefreshConstants.EXECUTE_TAB_ID&&(yield i.effects.put(K.SuitesActions.getSuitePointCount(e.payload.planId,[],[],[],[])))}function*r(e){try{const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService");e.payload.initialCall&&(yield i.effects.put(K.SuitesActions.showToastNotifications(W.SuiteImportInitiated,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION)));let a=yield i.effects.call([s,s.getSuiteCloneInformation],e.payload.opId,e.payload.project),n=0;if(a&&a.cloneOperationResponse&&(n=a.cloneOperationResponse.state),3!==n)yield i.effects.delay(5e3),yield i.effects.put(K.SuitesActions.getSuiteCloneOpState(e.payload.planId,e.payload.opId,!1,e.payload.project));else{const t=yield i.effects.call(i.channel);for(yield i.effects.put(K.SuitesActions.showToastNotifications(W.SuiteImportCompleted,5e3,W.Refresh,(()=>{!function(e,t){e.put({planId:t})}(t,e.payload.planId)})));;){const e=yield i.effects.take(t);yield i.effects.put(K.SuitesActions.reloadTestPlanAndSuites(e.planId))}}}catch(e){yield i.effects.put(K.SuitesActions.showToastNotifications(e.message,5e3))}}function*d(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ISettingsService"),a=yield i.effects.call([t,t.getService],"ITfsPageService"),n=yield i.effects.call([a,a.getData]),o=(0,Q.getDataProviderContent)(t);yield i.effects.put(K.SuitesActions.loadInitialTestDataSucceeded(o));const l=performance.now(),r=yield i.effects.call(V,o.testSuites),d=performance.now();if(o.testPlan&&o.testPlan.id>0){let e;e={SelectedPlanId:o.testPlan.id},yield i.effects.call([s,s.setEntries],e,0,"project",n.project.id)}if(o.selectedSuiteId>0){let e;e={SelectedSuiteId:o.selectedSuiteId},yield i.effects.call([s,s.setEntries],e,0,"project",n.project.id)}const u=yield i.effects.call([t,t.getService],"ITestHubDataService"),c=yield i.effects.call([u,u.getTestPlanById],o.testPlan.id);let p=c.buildId?c.buildId:"0",S=c.buildDefinition&&c.buildDefinition.id?c.buildDefinition.id:0;yield i.effects.put(Y.TestHubRefreshActions.updateSelectedBuild(p,S));let T=c.releaseEnvironmentDefinition&&c.releaseEnvironmentDefinition.definitionId?c.releaseEnvironmentDefinition.definitionId:0,h=c.releaseEnvironmentDefinition&&c.releaseEnvironmentDefinition.environmentDefinitionId?c.releaseEnvironmentDefinition.environmentDefinitionId:0;yield i.effects.put(Y.TestHubRefreshActions.updateSelectedRelease(T,h));const f={suitesCount:{RBS:r.rbs,QBS:r.qbs,Static:r.static},suitesHierarchy:r.hierarchy,planId:o.testPlan.id,selectedSuiteId:o.selectedSuiteId,timeElapsed:d-l,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.GET_TEST_SUITES_FOR_PLAN,f)),yield i.effects.put(K.SuitesActions.fetchSplitterWidth()),yield i.effects.put(Y.TestHubRefreshActions.fetchTestCasePreviewStatus())}function*u(e){if(X.testHubRefreshLocalContextData.getCurrentPivot()===q.TestHubRefreshConstants.EXECUTE_TAB_ID){const t=yield i.effects.getContext("pageContext"),o=yield i.effects.call([t,t.getService],"ITestHubDataService");let l;if((0,n.isFeatureFlagEnabled)(t,q.TestHubRefreshConstants.DisableEntityCountFF,!1))l=[];else try{l=yield i.effects.call([o,o.fetchTestEntityCount],e.payload.planId,e.payload.states,e.payload.configurations,e.payload.testers,e.payload.assignedTo,e.payload.outcome,1)}catch(e){l=[],console.error(e)}const r=yield i.effects.select(te.isShowTestsFromChildSuitesEnabled);yield i.effects.put(K.SuitesActions.showSuitePointsCount(e.payload.planId,l,r));if((yield i.effects.select(te.isAdvancedLicenseEnabled))&&(0,n.isFeatureFlagEnabled)(t,q.TestHubRefreshConstants.ShowLargeDatasetToastFF,!1)&&s){let e=[];for(let t=0;t<l.length;t++)l[t].totalCount>q.TestHubRefreshConstants.LARGE_DATASET_COUNT_THRESHOLD&&e.push(l[t].testSuiteId);e.length>0&&(s=!1,1===e.length?yield i.effects.put(K.SuitesActions.showToastNotifications((0,a.format)(W.LargeDataSetToast_singleSuite,e[0]),q.TestHubRefreshConstants.LONG_TOAST_MESSAGE_DURATION)):yield i.effects.put(K.SuitesActions.showToastNotifications(W.LargeDataSetToast_multipleSuites,q.TestHubRefreshConstants.LONG_TOAST_MESSAGE_DURATION)))}}}function*c(e){if(X.testHubRefreshLocalContextData.getCurrentPivot()===q.TestHubRefreshConstants.DEFINE_TAB_ID){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService");let a;if((0,n.isFeatureFlagEnabled)(t,q.TestHubRefreshConstants.DisableEntityCountFF,!1))a=[];else try{a=yield i.effects.call([s,s.fetchTestEntityCount],e.payload.planId,e.payload.states,null,null,e.payload.assignedTo,null,0)}catch(e){a=[],console.error(e)}yield i.effects.put(K.SuitesActions.showSuiteTestCasesCount(e.payload.planId,a))}}function*S(e){const t=yield i.effects.call(i.channel),s=yield i.effects.getContext("pageContext"),n=yield i.effects.call([s,s.getService],"IVssContributionService");yield i.effects.call([n,n.getContributionsAsync],["ms.vss-features.ui-responsive-viewport-content","ms.vss-work-web.common-content"]);const o=yield i.effects.call([s,s.getService],"work-item-service");if(!o)throw new Error("Unable to fetch workitem service instance.");yield i.effects.call([o,o.openWorkItem],e.payload.testSuiteId,{save:s=>{const i=s.getTitle();t.put({suiteId:e.payload.testSuiteId,suiteTitle:i,rootSuiteId:e.payload.rootSuiteId})}});const l={suiteId:e.payload.testSuiteId,planId:e.payload.testPlanId,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.OEPN_TEST_SUITE_USING_FORM,l));const r=yield i.effects.take(t);a.localeComparer(r.suiteTitle,e.payload.testSuiteTitle)&&(yield i.effects.put(K.SuitesActions.saveTestSuiteName(e.payload.testPlanId,r.suiteId,e.payload.testSuiteTitle,r.suiteTitle,r.rootSuiteId)));const d={suiteId:r.suiteId,planId:e.payload.testPlanId,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.EDIT_TEST_SUITE_USING_FORM,d))}function*T(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService");let a=[],o=[];yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));const l=yield i.effects.select(se.getIdToTestSuiteMap),r=[];if((0,n.isFeatureFlagEnabled)(t,q.TestHubRefreshConstants.BulkCreateRequirementBasedSuitesFF,!1)){for(let t=0;t<e.payload.requirementIds.length;t++){const s={suiteType:e.payload.suiteType,requirementId:e.payload.requirementIds[t]};r.push(s)}r.length>0&&(o=yield i.effects.call([s,s.createBulkTestSuites],r,e.payload.planId,e.payload.parentSuiteId))}else for(let t=0;t<e.payload.requirementIds.length;t++){const a={suiteType:e.payload.suiteType,name:e.payload.requirementIds[t].toString(),requirementId:e.payload.requirementIds[t],parentSuite:{id:e.payload.parentSuiteId,name:e.payload.parentSuiteTitle}},n=yield i.effects.call([s,s.createTestSuite],a,e.payload.planId);o.push(n)}for(let t=0;t<o.length;t++){const s=o[t];let i;l.has(e.payload.parentSuiteId)&&(i=l.get(e.payload.parentSuiteId));let n=!1;if(i&&i.hasChildren){i.children.findIndex((e=>e.id===s.id))>=0&&(n=!0)}n||a.push(s)}if(a.length>0){const t=-1;yield i.effects.put(K.SuitesActions.loadNewSuites(a,e.payload.parentSuiteId,e.payload.rootSuiteId,t));const s=yield i.effects.select(se.getTestSuites),n=yield i.effects.select(se.getIdToTreeItemExpandableStateMap),o=(0,Q.getSelectionSuiteIndexFromSuiteId)(a[0].id,s,-1,n);o.found&&(e.payload.selection.select(o.index),yield i.effects.put(K.SuitesActions.changeSelectedSuite(e.payload.planId,a[0].id,a[0].name)));const l={planId:e.payload.planId,parentSuiteId:e.payload.parentSuiteId,requirementIds:e.payload.requirementIds,suiteType:e.payload.suiteType,createdSuiteIds:a.map((e=>e.id)),isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.NEW_SUITE,l))}yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1))}function*h(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"IVssLayoutManager"),a=(yield i.effects.select(se.getIdToTestSuiteMap)).get(e.payload.suiteId);let n=0;a&&(n=G(a,!1)),yield i.effects.call([s,s.renderCallout],(t=>o.createElement(p.WrappedComponent,{wrappedType:"DeleteTestSuiteConfirmationDialog",dependencies:["ms.vss-test-web.delete-test-suite-confirmation-dialog"],wrappedProps:{planId:e.payload.planId,suiteId:e.payload.suiteId,rootSuiteId:e.payload.rootSuiteId,suiteName:e.payload.suiteName,suiteType:e.payload.suiteType,selection:e.payload.selection,dispatch:e.payload.dispatch,childSuitesCount:n,onDismiss:t}},null)))}function*f(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService");yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));const a=yield i.effects.select(se.getIdToTreeItemExpandableStateMap),n=yield i.effects.select(se.getIdToTestSuiteMap),o=yield i.effects.select(se.getTestSuites),l=yield i.effects.select(te.getSelectedSuiteId),r=n.get(e.payload.suiteId);let d=-1,u="";r&&r.parentSuite&&(d=r.parentSuite.id,u=r.parentSuite.name),yield i.effects.call([s,s.deleteTestSuite],e.payload.planId,e.payload.suiteId),yield i.effects.put(K.SuitesActions.removeSuite(e.payload.suiteId,e.payload.rootSuiteId)),yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1));const c={planId:e.payload.planId,suiteId:e.payload.suiteId,suiteType:e.payload.suiteType,suiteName:e.payload.suiteName,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};if(n.get(l)){const t=(0,Q.getSelectionSuiteIndexFromSuiteId)(l,o,-1,a),s=!e.payload.selection.value[0]||t.index!==e.payload.selection.value[0].beginIndex;t.found&&s&&e.payload.selection.select(t.index)}else if(d&&u){const t=(0,Q.getSelectionSuiteIndexFromSuiteId)(d,o,-1,a),s=!e.payload.selection.value[0]||t.index!==e.payload.selection.value[0].beginIndex;t.found&&s&&(e.payload.selection.select(t.index),yield i.effects.put(K.SuitesActions.changeSelectedSuite(e.payload.planId,d,u)))}yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.DELETE_SUITE,c))}function*I(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService");yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));const a={suiteType:e.payload.suiteType,name:W.NewStaticSuiteDefaultName,parentSuite:{id:e.payload.parentSuiteId,name:e.payload.parentSuiteTitle}},n=yield i.effects.call([s,s.createTestSuite],a,e.payload.planId);yield i.effects.put(K.SuitesActions.loadNewSuites([n],e.payload.parentSuiteId,e.payload.rootSuiteId,n.id)),yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1));const o={planId:e.payload.planId,suiteType:e.payload.suiteType,suiteId:n.id,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.NEW_SUITE,o))}function*m(e){if(yield i.effects.put(K.SuitesActions.updateTestSuiteName(e.payload.suiteId,e.payload.newSuiteTitle,e.payload.rootSuiteId)),e.payload.oldSuiteTitle!=e.payload.newSuiteTitle){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService"),a={name:e.payload.newSuiteTitle};yield i.effects.call([s,s.updateTestSuite],a,e.payload.planId,e.payload.suiteId);const n={planId:e.payload.planId,suiteType:e.payload.suiteId,oldSuiteTitle:e.payload.oldSuiteTitle,newSuiteTitle:e.payload.newSuiteTitle,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.RENAME_TEST_SUITE,n))}}function*y(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"IVssLayoutManager"),a=yield i.effects.call(i.channel),n={areaPath:e.payload.areaPath,createSave:e.payload.createSave,queryText:e.payload.queryText,onSuccess:(s,i)=>{e.payload.createSave?function(e,t,s,i,a,n,o,l,r){const d=e.getService("ITestHubDataService");if(!d)throw new Error("Unable to fetch hub data service instance.");{const e={suiteType:s,name:i,queryString:a,parentSuite:{id:n,name:o}};d.createTestSuite(e,l).then((e=>{t.put({testSuite:e,planId:l,parentSuiteId:n,parentSuiteTitle:o,suiteType:s,rootSuiteId:r,queryName:i,queryText:a})}))}}(t,a,1,s,i,e.payload.parentSuiteId,e.payload.parentSuiteTitle,e.payload.planId,e.payload.rootSuiteId):function(e,t,s,i,a){const n=e.getService("ITestHubDataService");if(!n)throw new Error("Unable to fetch hub data service instance.");{const e={queryString:s};n.updateTestSuite(e,i,a).then((e=>{t.put({testSuite:e,planId:i,parentSuiteId:a,parentSuiteTitle:"",suiteType:1,rootSuiteId:0,queryName:"",queryText:s})}))}}(t,a,i,e.payload.planId,e.payload.parentSuiteId)}};yield i.effects.call([s,s.renderCallout],(e=>{const t={modules:["TestManagement/Scripts/Shared/CreateNewQBSProxy"],wrappedType:"create-qbs-dialog-proxy",wrappedProps:n,loadingComponent:()=>o.createElement(w.Spinner,{className:"spinner-pos",size:"medium"})};return o.createElement(M.LegacyComponent,t)}));const l=yield i.effects.take(a);e.payload.createSave&&e.payload.selection?yield i.effects.put(K.SuitesActions.createNewQuerySuite(l.testSuite,l.planId,l.parentSuiteId,l.parentSuiteTitle,l.suiteType,l.rootSuiteId,l.queryName,l.queryText,e.payload.selection)):yield i.effects.put(K.SuitesActions.editQueryForQueryBasedSuite(l.queryText,l.planId,l.parentSuiteId,l.parentSuiteTitle))}function*C(e){const t=e.payload.testSuite;yield i.effects.put(K.SuitesActions.loadNewSuites([t],e.payload.parentSuiteId,e.payload.rootSuiteId,-1));const s=yield i.effects.select(se.getTestSuites),a=yield i.effects.select(se.getIdToTreeItemExpandableStateMap),n=(0,Q.getSelectionSuiteIndexFromSuiteId)(t.id,s,-1,a);n.found&&(e.payload.selection.select(n.index),yield i.effects.put(K.SuitesActions.changeSelectedSuite(e.payload.planId,t.id,t.name)));const o={planId:e.payload.planId,parentSuiteId:e.payload.parentSuiteId,suiteType:e.payload.suiteType,createdSuiteId:e.payload.testSuite.id,queryName:e.payload.queryName,queryText:e.payload.queryText,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.NEW_SUITE,o))}function*g(e){yield i.effects.put(K.SuitesActions.changeSelectedSuite(e.payload.planId,e.payload.suiteId,e.payload.suiteTitle)),yield i.effects.put(K.SuitesActions.queryEdited(e.payload.queryText,e.payload.suiteId));const t={planId:e.payload.planId,suiteType:1,editedSuiteId:e.payload.suiteId,queryText:e.payload.queryText,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.EDIT_SUITE_QUERY,t))}function*b(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService");yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));const a={parentSuite:{id:e.payload.targetParentSuiteId}};try{yield i.effects.call([s,s.updateTestSuite],a,e.payload.planId,e.payload.suiteId);yield i.effects.put(K.SuitesActions.updateTestSuiteParentSucceeded(e.payload.suiteId,e.payload.targetParentSuiteId))}catch(e){yield i.effects.put(K.SuitesActions.showToastNotifications(e.message,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION))}yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1));const n={planId:e.payload.planId,suiteId:e.payload.suiteId,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.REORDER_TEST_SUITE,n))}function*E(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITestHubDataService"),a=yield i.effects.select(se.getTestSuiteById,e.payload.targetParentSuiteId);yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));let n=[],o=0;for(let t=0;t<a.children.length;t++)a.children[t].id===e.payload.targetSuiteId?(e.payload.dropAtEnd?(n.push({id:e.payload.targetSuiteId,sequenceNumber:t+o,suiteEntryType:1}),n.push({id:e.payload.suiteId,sequenceNumber:t+o+1,suiteEntryType:1})):(n.push({id:e.payload.suiteId,sequenceNumber:t+o,suiteEntryType:1}),n.push({id:e.payload.targetSuiteId,sequenceNumber:t+o+1,suiteEntryType:1})),o=0===o?1:0):a.children[t].id===e.payload.suiteId?o=0===o?-1:0:n.push({id:a.children[t].id,sequenceNumber:t+o,suiteEntryType:1});yield i.effects.call([s,s.reorderSuiteEntries],n,e.payload.targetParentSuiteId),yield i.effects.put(K.SuitesActions.reorderTestSuiteSucceeded(e.payload.suiteId,e.payload.targetSuiteId,e.payload.dropAtEnd)),yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1));const l={planId:e.payload.planId,suiteId:e.payload.suiteId,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.REORDER_TEST_SUITE,l))}function*A(e){yield i.effects.call(b,{payload:{planId:e.payload.planId,suiteId:e.payload.suiteId,targetParentSuiteId:e.payload.targetParentSuiteId},type:"Suites/updateTestSuiteParent"}),yield i.effects.call(E,{payload:{planId:e.payload.planId,targetParentSuiteId:e.payload.targetParentSuiteId,suiteId:e.payload.suiteId,targetSuiteId:e.payload.targetSuiteId,dropAtEnd:e.payload.dropAtEnd},type:"Suites/reorderTestSuite"})}function*P(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call(i.channel);yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));const a=yield i.effects.call([t,t.getService],"ITfsPageService"),n=yield i.effects.call([a,a.getData]),l=yield i.effects.call([t,t.getService],"IVssLayoutManager"),r={tfsContext:n,planId:e.payload.testPlanId,sourceSuiteId:e.payload.sourceSuiteId,sourceSuiteRevision:e.payload.sourceSuiteRevision,destinationSuiteId:e.payload.destinationSuiteId,destinationSuiteRevision:e.payload.destinationSuiteRevision,testCaseIds:e.payload.testCaseIds,successCallBack:e=>{s.put({testSuites:e})},errorCallBack:e=>{s.put({error:e})}};yield i.effects.call([l,l.renderCallout],(e=>{const t={modules:["TestManagement/Scripts/Shared/MoveTestCaseToSuiteProxy"],wrappedType:"move-test-case-to-suite-proxy",wrappedProps:r};return o.createElement(M.LegacyComponent,t)}));const d=yield i.effects.take(s);if(d)if(d.testSuites){yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1)),yield i.effects.put(K.SuitesActions.moveTestCaseToSuiteSucceeded(e.payload.testCaseIds));const t={planId:e.payload.testPlanId,sourceSuiteId:e.payload.sourceSuiteId,destinationSuiteId:e.payload.destinationSuiteId,testCaseIds:e.payload.testCaseIds,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.MOVE_TEST_CASES_TO_SUITE,t))}else yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1)),yield i.effects.put(K.SuitesActions.showToastNotifications(d.error.message,q.TestHubRefreshConstants.TOAST_MESSAGE_DURATION))}function*R(e){const t=yield i.effects.call(i.channel),s=yield i.effects.getContext("pageContext"),a=yield i.effects.call([s,s.getService],"IVssLayoutManager"),n={planId:e.payload.planId,suite:e.payload.suite,dialogClosedCallBack:e=>{e&&function(e,t){e&&t.put({changesSaved:e})}(e,t)}};yield i.effects.call([a,a.renderCallout],(e=>{const t={modules:["TestManagement/Scripts/Shared/AssignTestersToSuiteProxy"],wrappedType:"assign-testers-dialog-proxy",wrappedProps:n,loadingComponent:()=>o.createElement(w.Spinner,{className:"spinner-pos",size:"medium"})};return o.createElement(M.LegacyComponent,t)}));if(yield i.effects.take(t)){yield i.effects.put(K.SuitesActions.loadTestPointsForSelectedSuite(e.payload.planId,e.payload.suite.id));const t={planId:e.payload.planId,suiteId:e.payload.suite.id,suiteType:e.payload.suite.type,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.ASSIGN_TESTERS_TO_SUITE,t))}}function*_(e){const t=yield i.effects.getContext("pageContext");yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!0));const s=yield i.effects.call([t,t.getService],"ITestHubDataService"),a=yield i.effects.call([s,s.getTestPlanById],e.payload.planId),n=yield i.effects.call([t,t.getService],"IVssLayoutManager"),l=yield i.effects.select(se.getIdToTestSuiteMap),r=l.get(e.payload.suiteId),d=l.get(e.payload.rootSuiteId);let u=yield i.effects.select(te.getDefineColumnOptionFields),c=(0,O.getAllColumnFields)(u),p=yield i.effects.select(te.getExecuteColumnOptionFields),S=function(e,t){let s,i=e.length,a=t.length;for(let n=0;n<a;n++){s=!1;for(let a=0;a<i;a++)if(e[a].id==t[n].id){s=!0;break}s||e.push(t[n])}return e}(c,(0,L.getAllColumnFields)(p)),T=[];for(const e of S)T.push({fieldId:e.id,text:e.name});if(r&&d){const t=function(e){let t=e.children||[],s=t.length;if(0===s)return[];let i=[];for(let e=0;e<s;e++)i.concat(t[e].id);return i}(r);let s=function(e){let t=!1;G(e,!0)>=q.SuitesConstants.TestSuitesLimit&&(t=!0);return t}(r);const l={currentPlan:{area:{name:a.areaPath},automatedTestEnvironment:a.automatedTestEnvironment,automatedTestSettings:a.automatedTestEnvironment,build:{id:a.buildId},buildDefinition:a.buildDefinition,description:a.description,endDate:a.endDate,id:a.id,iteration:a.iteration,manualTestEnvironment:a.manualTestEnvironment,manualTestSettings:a.manualTestSettings,name:a.name,owner:a.owner,previousBuild:{id:a.previousBuildId},project:a.project,releaseEnvironmentDefinition:a.releaseEnvironmentDefinition,revision:a.revision,rootSuite:a.rootSuite,startDate:a.startDate,state:a.state,testOutcomeSettings:a.testOutcomeSettings,updatedBy:a.updatedBy,updatedDate:a.updatedDate},id:e.payload.suiteId,revision:r.revision,title:r.name,childSuiteIds:t,pointCount:e.payload.pointCount,type:r.suiteType,requirementId:r.requirementId,parentSuiteId:r.parentSuite?r.parentSuite.id:0,queryText:r.queryString,status:"",totalPointCount:e.payload.totalPointCount,configurations:r.defaultConfigurations,isChildSuitesCountExceededForExportFeature:s,rootSuite:d,savedColumns:T};yield i.effects.call([n,n.renderCallout],(e=>{const t={modules:["TestManagement/Scripts/Shared/ExportHTMLDialogProxy"],wrappedType:"export-html-dialog-proxy",wrappedProps:l};return o.createElement(M.LegacyComponent,t)}))}yield i.effects.put(Y.TestHubRefreshActions.updateBusyViewStatus(!1));const h={planId:e.payload.planId,suiteId:e.payload.suiteId,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.EXPORT_HTML,h))}function*v(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ISettingsService");if(e.payload&&e.payload.previewStatus){let t;t={[`${q.TestHubRefreshConstants.PREVIEW_SPLITTER_STATUS_KEY}/${q.TestHubRefreshConstants.SETTINGS_KEY}`]:e.payload.previewStatus},yield i.effects.call([s,s.setEntries],t,0)}const a={previewStatus:e.payload.previewStatus,isAdvancedLicenseEnabled:yield i.effects.select(te.isAdvancedLicenseEnabled)};yield i.effects.put(j.TelemetryActions.publishTelemetry(q.TelemetryConstants.TOGGLE_TEST_CASE_PREVIEW,a)),yield i.effects.put(Y.TestHubRefreshActions.changeTestCasePreviewStatus(e.payload.previewStatus))}function*x(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ISettingsService"),a=yield i.effects.call([t,t.getService],"ITfsPageService"),n=yield i.effects.call([a,a.getData]);if(e.payload&&e.payload.splitterWidth){let t;t={splitterWidth:e.payload.splitterWidth},yield i.effects.call([s,s.setEntries],t,0,"project",n.project.id)}yield i.effects.put(Y.TestHubRefreshActions.changeSplitterWidth(e.payload.splitterWidth))}function*H(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ISettingsService");let a=yield i.effects.call([s,s.getEntry],q.TestHubRefreshConstants.PREVIEW_SPLITTER_STATUS_KEY,0);a&&a[q.TestHubRefreshConstants.SETTINGS_KEY]&&(yield i.effects.put(Y.TestHubRefreshActions.changeTestCasePreviewStatus(a[q.TestHubRefreshConstants.SETTINGS_KEY])))}function*D(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ISettingsService"),a=yield i.effects.call([t,t.getService],"ITfsPageService"),n=yield i.effects.call([a,a.getData]);let o=yield i.effects.call([s,s.getEntriesAsync],"",0,"project",n.project.id);o&&o.splitterWidth&&(yield i.effects.put(Y.TestHubRefreshActions.changeSplitterWidth(o.splitterWidth)))}function*N(e){try{const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"IGlobalMessagesService");yield i.effects.call([s,s.addToast],{duration:e.payload.toastDurationMs,message:e.payload.toastMessage,callToAction:e.payload.callToActionText,onCallToActionClick:e.payload.callToActionTextCallback,className:e.payload.className})}catch(e){}}function*F(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"IVssContributionService");yield i.effects.call([s,s.getContributionsAsync],["ms.vss-features.ui-responsive-viewport-content","ms.vss-work-web.common-content"]);const a=yield i.effects.call([t,t.getService],"work-item-service");a&&(yield i.effects.call([a,a.openWorkItem],e.payload.requirementId))}function*U(e){const t=yield i.effects.getContext("pageContext"),s=yield i.effects.call([t,t.getService],"ITfsPageService"),a=yield i.effects.call([s,s.getData]),n={pivot:q.RouteParametersMineAllPage.Pivot,project:a.project.name},o=yield i.effects.call([t,t.getService],"IVssLocationService");let l=yield i.effects.call([o,o.routeUrl],q.RouteParametersMineAllPage.ContributionId,n);l+=q.RouteParametersMineAllPage.queryParams,yield i.effects.put(Y.TestHubRefreshActions.loadMineAllPageUrl(l))}function V(e){const t={rbs:0,qbs:0,static:0,hierarchy:[]},s=e.length;t.hierarchy[0]=s;for(let i=0;i<s;i++){let s={rbs:0,qbs:0,static:0,hierarchy:[]};switch(e[i].hasChildren&&(s=V(e[i].children)),e[i].suiteType){case 1:t.qbs+=1;break;case 3:t.rbs+=1;break;default:t.static+=1}t.qbs+=s.qbs,t.rbs+=s.rbs,t.static+=s.static;for(let e=0;e<s.hierarchy.length;e++)t.hierarchy[e+1]||(t.hierarchy[e+1]=0),t.hierarchy[e+1]+=s.hierarchy[e]?s.hierarchy[e]:0}return t}function G(e,t){if(!e)return 0;let s=e.children||[],i=s.length;for(let e=0;e<s.length;e++)if(i+=G(s[e],t),t&&i>=q.SuitesConstants.TestSuitesLimit)return i;return i}t[e].SuitesSaga=function*(){yield i.effects.takeLatest("Suites/reloadTestPlanAndSuites",k),yield i.effects.takeLatest("TestHubRefreshActions/saveTestCasePreviewStatus",B),yield i.effects.takeLatest("TestHubRefreshActions/fetchTestCasePreviewStatus",z),yield i.effects.takeLatest("Suites/getSuiteCloneOpState",Z),yield i.effects.takeLatest("Suites/loadInitialTestData",J),yield i.effects.takeLatest("Suites/getMineAllPageUrl",$),yield i.effects.takeLatest("Suites/getSuitePointCount",ee),yield i.effects.takeLatest("Suites/getSuiteTestCasesCount",ae),yield i.effects.takeLatest("Suites/openTestSuiteWitForm",ne),yield i.effects.takeLatest("Suites/createNewReqSuite",oe),yield i.effects.takeLatest("Suites/openDeleteTestSuiteDialog",le),yield i.effects.takeLatest("Suites/deleteTestSuite",re),yield i.effects.takeLatest("Suites/createStaticSuite",de),yield i.effects.takeLatest("Suites/saveTestSuiteName",ue),yield i.effects.takeLatest("Suites/openCreateEditSuiteQueryForm",ce),yield i.effects.takeLatest("Suites/createNewQuerySuite",pe),yield i.effects.takeLatest("Suites/editQueryForQueryBasedSuite",Se),yield i.effects.takeLatest("Suites/updateTestSuiteParent",Te),yield i.effects.takeLatest("Suites/reorderTestSuite",he),yield i.effects.takeLatest("Suites/updateParentAndReorderSuite",fe),yield i.effects.takeLatest("Suites/moveTestCaseToSuite",Ie),yield i.effects.takeLatest("Suites/assignTestersToSuite",me),yield i.effects.takeLatest("Suites/openExportHTMLDialog",ye),yield i.effects.takeLatest("Suites/saveSplitterWidth",Ce),yield i.effects.takeLatest("Suites/fetchSplitterWidth",ge),yield i.effects.takeLatest("Suites/showToastNotifications",N),yield i.effects.takeLatest("Suites/openRequirementWorkItemForm",be)},t[e].reloadTestPlanAndSuites=l,t[e].getSuiteCloneOpState=r,t[e].loadTestData=d,t[e].getSuitePointCount=u,t[e].getSuiteTestCasesCount=c,t[e].openTestSuiteWitForm=S,t[e].createNewReqSuite=T,t[e].openDeleteTestSuiteDialog=h,t[e].deleteTestSuite=f,t[e].createStaticSuite=I,t[e].saveTestSuiteName=m,t[e].openCreateEditSuiteQueryForm=y,t[e].createNewQuerySuite=C,t[e].editQueryForQueryBasedSuite=g,t[e].updateTestSuiteParent=b,t[e].reorderTestSuite=E,t[e].updateParentAndReorderSuite=A,t[e].moveTestCaseToSuite=P,t[e].assignTestersToSuite=R,t[e].openExportHTMLDialog=_,t[e].saveTestCasePreviewStatus=v,t[e].saveSplitterWidth=x,t[e].fetchTestCasePreviewStatus=H,t[e].fetchSplitterWidth=D,t[e].showToastNotifications=N,t[e].openRequirementWorkItemForm=F,t[e].getAllPageUrl=U;const k=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(l,e)})),B=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(v,e)})),z=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(H,e)})),Z=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(r,e)})),J=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(d,e)})),$=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(U,e)})),ee=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(u,e)})),ae=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(c,e)})),ne=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(S,e)})),oe=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(T,e)})),le=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(h,e)})),re=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(f,e)})),de=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(I,e)})),ue=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(m,e)})),ce=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(y,e)})),pe=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(C,e)})),Se=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(g,e)})),Te=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(b,e)})),he=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(E,e)})),fe=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(A,e)})),Ie=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(P,e)})),me=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(R,e)})),ye=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(_,e)})),Ce=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(x,e)})),ge=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(D,e)})),be=(0,Q.errorHandledSaga)((function*(e){yield i.effects.call(F,e)}))}("ReduxSuitesSuitesSaga"),function(e){ae=t[e]={},t[e].TestHubRefreshReducer=function(e,t){return e=e||{},(0,F.default)(e,(e=>{switch(t.type){case"TestHubRefreshActions/changeTestCasePreviewStatus":t.payload&&t.payload.previewStatus&&(e.testCasePreviewStatus=t.payload.previewStatus);break;case"Suites/loadInitialTestDataSucceeded":e.testPlanId=t.payload.testPlan.id,e.rootSuiteId=t.payload.testPlan.rootSuiteId,e.selectedSuiteId=t.payload.selectedSuiteId,e.testPlanIteration=t.payload.testPlan.iteration,e.testPlanAreaPath=t.payload.testPlan.areaPath,e.testPlanStartDate=t.payload.testPlan.startDate,e.testPlanEndDate=t.payload.testPlan.endDate,e.testPlanName=t.payload.testPlan.name,e.initialSelectedSuiteId=t.payload.selectedSuiteId,e.isAdvancedExtensionEnabled=t.payload.isAdvancedExtensionEnabled,e.testCasePageSize=t.payload.testCasePageSize,e.testPointPageSize=t.payload.testPointPageSize,e.defineColumnOptionFields=t.payload.defineColumnOptionFields,e.executeColumnOptionFields=t.payload.executeColumnOptionFields,e.isShowTestsFromChildSuitesEnabled=!1;break;case"Suites/changeSelectedSuite":e.selectedSuiteId=t.payload.selectedSuiteId,e.selectedSuiteName=t.payload.selectedSuiteName,e.isInGridView=!1;break;case"Suites/updateTestSuiteName":e.selectedSuiteId==t.payload.testSuiteId&&(e.selectedSuiteName=t.payload.testSuiteTitle);break;case"Suites/loadTestPlan":e.testPlanId=t.payload.testPlan.id,e.rootSuiteId=t.payload.testPlan.rootSuite.id,e.testPlanIteration=t.payload.testPlan.iteration,e.testPlanAreaPath=t.payload.testPlan.areaPath,e.testPlanStartDate=t.payload.testPlan.startDate,e.testPlanEndDate=t.payload.testPlan.endDate,e.testPlanName=t.payload.testPlan.name,e.isShowTestsFromChildSuitesEnabled=!1;break;case"Suites/updateLoadingStatus":e.isLoading=t.payload.loadingStatus;break;case"Suites/updateReloadState":e.isReload=t.payload.state;break;case"TestHubRefreshActions/updateBusyViewStatus":e.isBusy=t.payload.isBusy;break;case"TestHubRefreshActions/updatePagingStatus":e.isPagingInProgress=t.payload.isPagingInProgress;break;case"TestHubRefreshActions/updateTestPlan":e.testPlanName=t.payload.testPlanName,e.testPlanStartDate=t.payload.testPlanStartDate,e.testPlanEndDate=t.payload.testPlanFinishDate,e.testPlanAreaPath=t.payload.testPlanAreaPath,e.testPlanIteration=t.payload.testPlanIterationPath,e.rootSuiteId==e.selectedSuiteId&&(e.selectedSuiteName=t.payload.testPlanName);break;case"TestHubRefreshActions/setGridView":e.isInGridView=t.payload.isInGridView;break;case"TestHubRefreshActions/setIsGridDirty":e.isGridDirty=t.payload.isGridDirty;break;case"TestHubRefreshActions/loadExecuteColumnOptionFieldsSucceeded":e.executeColumnOptionFields=t.payload.executeColumnOptionFields;break;case"TestHubRefreshActions/loadDefineColumnOptionFieldsSucceeded":e.defineColumnOptionFields=t.payload.defineColumnOptionFields;break;case"TestHubRefreshActions/changeDefineColumnWidths":t.payload.columnId&&t.payload.width&&(e.defineColumnAndWidthMap||(e.defineColumnAndWidthMap={}),e.defineColumnAndWidthMap[t.payload.columnId]=t.payload.width),t.payload.columnAndWidthObj&&(e.defineColumnAndWidthMap=t.payload.columnAndWidthObj);break;case"TestHubRefreshActions/changeExecuteColumnWidths":t.payload.columnId&&t.payload.width&&(e.executeColumnAndWidthMap||(e.executeColumnAndWidthMap={}),e.executeColumnAndWidthMap[t.payload.columnId]=t.payload.width),t.payload.columnAndWidthObj&&(e.executeColumnAndWidthMap=t.payload.columnAndWidthObj);break;case"TestHubRefreshActions/changeSplitterWidth":t.payload&&t.payload.splitterWidth&&(e.splitterWidth=t.payload.splitterWidth);break;case"TestHubRefreshActions/updateSelectedBuild":e.selectedBuildId=t.payload.selectedBuildId,e.selectedBuildDefnId=t.payload.selectedBuildDefnId;break;case"TestHubRefreshActions/updateSelectedRelease":e.selectedReleaseId=t.payload.selectedReleaseId,e.selectedReleaseEnvironmentId=t.payload.selectedReleaseEnvironmentId;break;case"Suites/showTestsFromChildSuitesClick":e.isShowTestsFromChildSuitesEnabled=t.payload.isShowTestsFromChildSuitesEnabled;break;case"TestHubRefreshActions/loadMineAllPageUrl":e.mineAllPageUrl=t.payload.mineAllPageUrl;break;case"TestHubRefreshActions/updateDefineTabCustomColumnFieldMap":e.defineTabCustomColumnFieldMap=t.payload.customColumnFieldMap;break;case"TestHubRefreshActions/updateExecuteTabCustomColumnFieldMap":e.executeTabCustomColumnFieldMap=t.payload.customColumnFieldMap}}))}}("ReduxTestHubRefreshTestHubRefreshReducer"),function(e){ne=t[e]={},t[e].getSuitesModule=function(e){const t=[];return e&&!e.errorMessage&&t.push(K.SuitesActions.loadInitialTestData()),{id:"suites",reducerMap:{testHubRefreshState:ae.TestHubRefreshReducer,suiteState:ee.SuitesReducer},initialActions:t,sagas:[ie.SuitesSaga]}}}("ReduxSuitesSuitesModule"),function(e){oe=t[e]={},t[e].TestHubRefreshModule={id:"suites",reducerMap:{testHubRefreshState:ae.TestHubRefreshReducer}}}("ReduxTestHubRefreshTestHubRefreshModule"),function(e){t[e]={};class s extends p.VssComponent{constructor(e,t){super(e,t),this._mineAllPageUrl="",this._data=(0,Q.getDataProviderContent)(t.pageContext);let s="";if(this._data&&!this._data.errorMessage){s=this._data.selectedPivotId;let e={SelectedPivotId:s};const i=t.pageContext.getService("ISettingsService"),a=t.pageContext.getService("ITfsPageService").getData();a&&a.project&&i.setEntries(e,0,"project",a.project.id)}else{const e=t.pageContext,s=e.getService("ITfsPageService").getData();let i="";s&&s.project&&(i=s.project.name);const a={pivot:q.TestHubRefreshConstants.testPlanAll,project:i},n=e.getService("IVssLocationService");this._mineAllPageUrl=n.routeUrl(q.TestHubRefreshConstants.allMineRouteContributionId,a)}this._selectedTab=new u.ObservableValue(s),this._rootProviderProps=this._getRootProviderProps()}render(){this._filterArgs||(this._filterArgs={filter:new G.Filter,filterToggled:new u.ObservableValue(!1)});const e={filterArgs:this._filterArgs,selectedTab:this._selectedTab};let t=o.createElement(o.Fragment,null);if(this._data)if(this._data.errorMessage){const e=(0,U.getAssetLocation)(this.context.pageContext,q.TestHubRefreshConstants.NoPlanImagePath);t=o.createElement(k.ZeroData,{imagePath:e,className:"testplans-hub-no-plans",imageAltText:this._data.errorMessage,primaryText:this._data.errorMessage,secondaryText:W.PlanDoesNotExistSecondaryText,actionType:0,actionText:W.TestPlanPage,onActionClick:e=>{const t=window.open(this._mineAllPageUrl,"_self");t&&(t.opener=null)}})}else t=o.createElement($.TestPlansHubRefreshConnectedView,{selectedTab:this._selectedTab,opId:this._opId});else{const e=(0,U.getAssetLocation)(this.context.pageContext,q.TestHubRefreshConstants.NoPlanImagePath);t=o.createElement(k.ZeroData,{imagePath:e,className:"testplans-hub-no-plans",imageAltText:W.PlanDoesNotExist,primaryText:W.PlanDoesNotExist,secondaryText:W.PlanDoesNotExistSecondaryText,actionType:0,actionText:W.TestPlanPage,onActionClick:e=>{const t=window.open(this._mineAllPageUrl,"_self");t&&(t.opener=null)}})}return o.createElement(V.RootProvider,Object.assign({},this._rootProviderProps,{contentViewObserverModuleArgs:e}),o.createElement(G.FilterContext.Provider,{value:this._filterArgs},o.createElement("div",{className:"testplans-hub-refresh-portal-component flex justify-center flex-grow flex-column"},t)))}_getRootProviderProps(){const e=new R.Uri(window.location.href),t=[(0,ne.getSuitesModule)(this._data),oe.TestHubRefreshModule],s=e.getQueryParam(q.TestHubRefreshConstants.QUERY_PARAM_OP_ID);return s&&(this._opId=parseInt(s)),{initialState:{},sagaContext:{pageContext:this.context.pageContext},scenarioName:"TestManagement",modules:t,postTTIModules:[{contributionId:"ms.vss-test-web.testhub-refresh-post-tti",reduxModuleId:"test-hub-refresh-post-tti-module"}]}}}t[e].TestPlansHubRefreshPortalComponent=s,p.VssComponent.register("testPlansHubRefreshPortalComponent",s)}("ComponentTestPlansHubRefreshPortalComponent"),function(e){t[e]={},function(e){e.assignedToFilterValues=new u.ObservableArray,e.stateFilterValues=new u.ObservableArray,e.outcomeFilterValues=new u.ObservableArray,e.testerFilterValues=new u.ObservableArray,e.configurationFilterValues=new u.ObservableArray,e.assignedToFilterSelection=new B.DropdownMultiSelection,e.stateFilterSelection=new B.DropdownMultiSelection,e.outcomeFilterSelection=new h.ListSelection(!1),e.testerFilterSelection=new B.DropdownMultiSelection,e.configurationFilterSelection=new B.DropdownMultiSelection,e.getDefaultAtMeTesterData=function(t){if(!e.defaultAtMeTesterData){const s=t.getService("IVssPageService").getData();s&&s.user&&s.user.id&&(e.defaultAtMeTesterData={key:s.user.displayName,value:{displayName:s.user.displayName,id:s.user.id}})}return e.defaultAtMeTesterData}}(t[e].TestHubRefreshFilterCommon||(t[e].TestHubRefreshFilterCommon={}))}("UtilsTestHubRefreshFilterCommon")}),["Resources","Constants","Redux/TelemetryActions","Redux/Suites/SuitesActions","Redux/TestHubRefresh/TestHubRefreshContracts","Redux/Suites/SuitesContract","Redux/TestHubRefresh/TestHubRefreshActions","Util","Utils/TestPlansHubRefreshLocalContextProvider","Component/TestSuiteTreeItemProvider","Component/SuiteTreeConnectedView","Component/TestPlansHubRefreshLeftView","Component/TestPlansHubRefreshConnectedView","Redux/Suites/SuitesReducer","Redux/TestHubRefresh/TestHubRefreshSelector","Redux/Suites/SuitesSelector","Redux/Suites/SuitesSaga","Redux/TestHubRefresh/TestHubRefreshReducer","Redux/Suites/SuitesModule","Redux/TestHubRefresh/TestHubRefreshModule","Component/TestPlansHubRefreshPortalComponent","Utils/TestHubRefreshFilterCommon"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-test-web.testplans-hub-refresh-content"}}));