"use strict";define("Agile/Common",["require","exports","VSS/Platform/Context","VSS/Platform/RestClientBase","immer","redux/Utils/ActionHelper","redux-saga","Reselect","VSS/Core/Util/String","VSS/Platform/Layout","VSS/Platform/Location","VSSUI/Link","react","VSSUI/Components/ZeroData/index"],(function(e,t,s,r,a,o,i,n,u,c,d,l,g,p){var m,f,y,h,b,R,T,C,_,S,k,v,B,E,I,w,q,x,D,U,P,N,L,j,A,V;m=t.Resources={},t.Resources.ConfigurationRequired="Configuration required",t.Resources.GeneralErrorTitle="Sorry, something went wrong",t.BoardsHubConstants={},t.BoardsHubConstants.BoardPivotName="board",t.BoardsHubConstants.DirectoryPivotName="directory",function(e){t[e]={};class a extends r.RestClientBase{constructor(e){super(e)}async createBoard(e,t){return this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/boards/boards/{id}",routeValues:{project:t},body:e})}async deleteBoard(e,t){return this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/boards/boards/{id}",routeValues:{project:e,id:t}})}async getBoard(e,t){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{id}",routeValues:{project:e,id:t}})}async getBoards(e,t,s){const r={$top:t,$skip:s};return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{id}",routeValues:{project:e},queryParams:r})}async updateBoard(e,t,s,r){return this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/boards/boards/{id}",routeValues:{project:t,id:s},customHeaders:{ETag:r},body:e})}async createBoardColumn(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/boards/boards/{board}/columns/{id}",routeValues:{project:t,board:s},body:e})}async deleteBoardColumn(e,t,s,r){const a={forceRemoveItems:r};return this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/boards/boards/{board}/columns/{id}",routeValues:{project:e,board:t,id:s},queryParams:a})}async getBoardColumn(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{board}/columns/{id}",routeValues:{project:e,board:t,id:s}})}async getBoardColumns(e,t){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{board}/columns/{id}",routeValues:{project:e,board:t}})}async updateBoardColumn(e,t,s,r,a){return this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/boards/boards/{board}/columns/{id}",routeValues:{project:t,board:s,id:r},customHeaders:{ETag:a},body:e})}async addBoardItem(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/boards/boards/{board}/items/{*id}",routeValues:{project:t,board:s},body:e})}async getBoardItem(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{board}/items/{*id}",routeValues:{project:e,board:t,id:s}})}async getBoardItems(e,t){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{board}/items/{*id}",routeValues:{project:e,board:t}})}async removeBoardItem(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/boards/boards/{board}/items/{*id}",routeValues:{project:e,board:t,id:s}})}async updateBoardItem(e,t,s,r,a){return this.beginRequest({apiVersion:"5.0-preview.1",method:"PUT",routeTemplate:"{project}/_apis/boards/boards/{board}/items/{*id}",routeValues:{project:t,board:s,id:r},customHeaders:{ETag:a},body:e})}async updateBoardItems(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/boards/boards/{board}/itemsbatch",routeValues:{project:t,board:s},body:e})}async createBoardRow(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/boards/boards/{board}/rows/{id}",routeValues:{project:t,board:s},body:e})}async deleteBoardRow(e,t,s,r){const a={forceRemoveItems:r};return this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/boards/boards/{board}/rows/{id}",routeValues:{project:e,board:t,id:s},queryParams:a})}async getBoardRow(e,t,s){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{board}/rows/{id}",routeValues:{project:e,board:t,id:s}})}async getBoardRows(e,t){return this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/boards/boards/{board}/rows/{id}",routeValues:{project:e,board:t}})}async updateBoardRow(e,t,s,r,a){return this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/boards/boards/{board}/rows/{id}",routeValues:{project:t,board:s,id:r},customHeaders:{ETag:a},body:e})}async createBoardSyncAction(e,t,s,r){return this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/boards/boards/{board}/columns/{column}/syncActions/{id}",routeValues:{project:t,board:s,column:r},body:e})}}t[e].BoardsClientName="IBoardsRestClient",t[e].getBoardsClient=function(s,r){return s.getRestClient(t[e].BoardsClientName,r)},s.RestClients.add(t[e].BoardsClientName,{factory:a,options:{serviceInstanceType:"00025394-6065-48ca-87d9-7f5672854ef7"}})}("ClientRestClientBoards"),t[A="ConstantsBacklogsHubTelemetryConstants"]={},(j=t[A].BacklogsHubTelemetryConstants||(t[A].BacklogsHubTelemetryConstants={})).PLANNING_NAVIGATE_TO_BACKLOG="Planning_Navigate_To_Backlog",j.PLANNING_NAVIGATE_TO_ITERATION="Planning_Navigate_To_Iteration",j.PLANNING_NEW_SPRINT_OPENED="Planning_NewSprint_Opened",j.PLANNING_ITEM_DROPPED="Planning_ItemDropped",j.PLANNING_ITEM_DROPPED_BACKLOG="Planning_ItemDropped_Backlog",function(e){f=t[e]={},function(e){e.Name="name",e.Project="project",e.Team="team",e.Pivot="pivot",e.Iteration="iteration",e.TeamName="teamName",e.BacklogLevel="backlogLevel",e.ViewName="viewname"}(t[e].RouteParameters||(t[e].RouteParameters={})),function(e){e.SprintsContentRoute="ms.vss-work-web.sprints-content-route",e.BacklogHubRoute="ms.vss-work-web.backlogs-content-route",e.SprintDirectoryRoute="ms.vss-work-web.sprints-directory-route"}(t[e].RouteContributions||(t[e].RouteContributions={})),function(e){e.Taskboard="taskboard"}(t[e].SprintPivots||(t[e].SprintPivots={}))}("ConstantsRoutingConstants"),y=t.UtilsNullCheck={},t.UtilsNullCheck.isNullOrUndefined=function(e){return null==e},function(e){h=t[e]={};class s{constructor(){this._data={map:{},keys:[]},this.getKeys=()=>[...this._data.keys],this.has=e=>!(0,y.isNullOrUndefined)(e)&&void 0!==this._data.map[e.toLocaleLowerCase()],this.get=e=>{if(!(0,y.isNullOrUndefined)(e))return this._data.map[e.toLocaleLowerCase()]},this.set=(e,t)=>(0,y.isNullOrUndefined)(e)?this:void 0===t?this.del(e):this._mutate((s=>{void 0===s.map[e.toLocaleLowerCase()]&&s.keys.push(e),s.map[e.toLocaleLowerCase()]=t})),this.del=e=>this._mutate((t=>{let s=e.toLocaleLowerCase();this.has(s)&&(delete t.map[s],t.keys=t.keys.filter((e=>e!==s)))}))}_mutate(e){const t=(0,a.default)(this._data,e);if(t!==this._data){const e=new s;return e._data=t,e}return this}}t[e].CaseInsensitiveMap=s;class r{constructor(){this._map=new s,this.add=e=>{if(null==e)return this;const t=this._map.set(e,e);if(t!==this._map){const e=new r;return e._map=t,e}return this},this.values=()=>this._map.getKeys(),this.del=e=>{const t=this._map.del(e);if(t!==this._map){const e=new r;return e._map=t,e}return this},this.has=e=>this._map.has(e),this.length=()=>this._map.getKeys().length}}t[e].CaseInsensitiveStringSet=r}("DataStructuresCaseInsensitiveDataStructures"),function(e){b=t[e]={};class s{constructor(e){if(this.add=e=>{if((0,y.isNullOrUndefined)(e))return this;const t=(0,a.default)(this._map,(t=>{this.has(e)||(t[e]=1)}));if(t!==this._map){const e=new s;return e._map=t,e}return this},this.values=()=>Object.keys(this._map).map((e=>Number(e))),this.del=e=>{if((0,y.isNullOrUndefined)(e))return this;const t=(0,a.default)(this._map,(t=>{this.has(e)&&delete t[e]}));if(t!==this._map){const e=new s;return e._map=t,e}return this},this.has=e=>!(0,y.isNullOrUndefined)(e)&&void 0!==this._map[e],this.length=()=>Object.keys(this._map).length,this._map={},e){const t=e.reduce(((e,t)=>(e[t]=1,e)),{});this._map=t}}}t[e].NumberSet=s}("DataStructuresNumberSet"),R=t.DataStructuresindex={},__exportStar(h,t.DataStructuresindex),__exportStar(b,t.DataStructuresindex),function(e){T=t[e]={},function(e){e[e.Proposed=1e3]="Proposed",e[e.InProgress=2e3]="InProgress",e[e.Resolved=3e3]="Resolved",e[e.Completed=4e3]="Completed",e[e.Removed=5e3]="Removed"}(t[e].WorkItemStateCategory||(t[e].WorkItemStateCategory={})),function(e){e[e.Effort=1]="Effort",e[e.Order=2]="Order",e[e.RemainingWork=3]="RemainingWork",e[e.Team=4]="Team",e[e.Activity=5]="Activity",e[e.Requestor=6]="Requestor",e[e.ApplicationType=7]="ApplicationType",e[e.ApplicationStartInformation=8]="ApplicationStartInformation",e[e.ApplicationLaunchInstructions=9]="ApplicationLaunchInstructions",e[e.FeedbackNotes=10]="FeedbackNotes",e[e.ClosedDate=11]="ClosedDate"}(t[e].BacklogFieldTypes||(t[e].BacklogFieldTypes={}))}("ReduxBacklogConfigurationBacklogConfigurationContracts"),function(e){C=t[e]={},t[e].BacklogConfigurationActions={backlogConfigurationLoaded:e=>(0,o.createAction)("BacklogConfiguration/BacklogConfigurationLoaded",{backlogConfiguration:e})}}("ReduxBacklogConfigurationBacklogConfigurationActions"),function(e){_=t[e]={},t[e].backlogConfigurationReducer=function(e,t){return e=e||null,"BacklogConfiguration/BacklogConfigurationLoaded"===t.type?t.payload.backlogConfiguration:e}}("ReduxBacklogConfigurationBacklogConfigurationReducer"),function(e){S=t[e]={},t[e].loadBacklogConfiguration=function*(){const e=yield i.effects.getContext("pageContext"),t=yield i.effects.call([e,e.getService],"IVssContributionService"),s=yield i.effects.call([t,t.getData],"ms.vss-work-web.agile-backlog-configuration-data-provider");yield i.effects.put(C.BacklogConfigurationActions.backlogConfigurationLoaded(s))}}("ReduxBacklogConfigurationBacklogConfigurationSagas"),function(e){t[e]={},t[e].BacklogConfigurationModule={id:"backlogconfiguration",reducerMap:{backlogConfiguration:_.backlogConfigurationReducer},sagas:[S.loadBacklogConfiguration]}}("ReduxBacklogConfigurationBacklogConfigurationModule"),function(e){t[e]={};t[e].getBacklogConfiguration=e=>e.backlogConfiguration,t[e].getTeamFieldRefName=function(e){return e.backlogConfiguration.backlogFields.typeFields[T.BacklogFieldTypes.Team]},t[e].getEffortFieldRefName=function(e){return e.backlogConfiguration.backlogFields.typeFields[T.BacklogFieldTypes.Effort]},t[e].getStateCategoriesByWorkItemType=n.createSelector(t[e].getBacklogConfiguration,(e=>{const t=new R.CaseInsensitiveMap;return e.workItemTypeMappedStates.reduce(((e,t)=>e.set(t.workItemTypeName,t.states)),t)})),t[e].getRequirementWorkItemTypes=function(e){return e.backlogConfiguration.requirementBacklog.workItemTypes},t[e].getRequirementDefaultWorkItemType=function(e){return e.backlogConfiguration.requirementBacklog.defaultWorkItemType},t[e].getTaskWorkItemTypes=function(e){return e.backlogConfiguration.taskBacklog.workItemTypes}}("ReduxBacklogConfigurationBacklogConfigurationSelectors"),function(e){t[e]={},t[e].HubTeamActions={initialize:e=>(0,o.createAction)("HubTeam/Initialize",{team:e})}}("ReduxHubTeamHubTeamActions"),t.ReduxHubTeamHubTeamContracts={},function(e){k=t[e]={},t[e].hubTeamReducer=function(e,t){return(0,a.default)(e||{},(e=>{switch(t.type){case"HubTeam/Initialize":{const{team:s}=t.payload;e.team=s;break}}}))}}("ReduxHubTeamHubTeamReducer"),function(e){t[e]={},t[e].HubTeamModule={id:"hub-team-module",reducerMap:{hubteamState:k.hubTeamReducer}}}("ReduxHubTeamHubTeamModule"),function(e){t[e]={},t[e].getTeam=function(e){if(!e.hubteamState.team)throw Error("Team information is not loaded yet");return e.hubteamState.team}}("ReduxHubTeamHubTeamSelector"),function(e){v=t[e]={},t[e].TeamSettingsActionsCreator={teamSettingsLoaded:e=>(0,o.createAction)("TeamSettingsLoaded",e)}}("ReduxTeamSettingsTeamSettingsActions"),B=t.ReduxTeamSettingsTeamSettingsContracts={},function(e){E=t[e]={},t[e].teamSettingsReducer=function(e,t){return e=e||{teamSettings:{backlogIteration:{name:"",displayText:"",path:"",friendlyPath:"",id:""},currentIteration:{name:"",displayText:"",path:"",friendlyPath:"",id:""},futureIterations:[],previousIterations:[],teamFieldDefaultValue:"",teamFieldName:"",teamFieldValues:[],showBugCategoryWorkItem:!1,bugsBehavior:0,backlogVisibilities:{},weekends:{canEditWeekends:!1,days:[]},referencedNodes:{areaNodes:[],iterationNodes:[]}}},(0,a.default)(e,(e=>{if("TeamSettingsLoaded"===t.type)e.teamSettings=t.payload}))}}("ReduxTeamSettingsTeamSettingsReducer"),function(e){function s(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function r(e){return new Date(e.getTime()-60*e.getTimezoneOffset()*1e3)}I=t.UtilsDate={},t.UtilsDate.getUtcDate=s,t.UtilsDate.adjustDateRangeFromServer=function(e){return{start:s(e.start),end:s(e.end)}},t.UtilsDate.getLocalDate=r,t.UtilsDate.getLocalDateRange=function(e){return{start:r(e.start),end:r(e.end)}},t.UtilsDate.getCurrentDate=function(){return new Date((new Date).setHours(0,0,0,0))},t.UtilsDate.adjustIterationDatesFromServer=function(e){return Object.assign(Object.assign({},e),{startDate:e.startDate?s(e.startDate):void 0,finishDate:e.finishDate?s(e.finishDate):void 0})},t.UtilsDate.addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}}(),function(e){w=t[e]={},t[e].loadTeamSettings=function*(){const e=yield i.effects.getContext("pageContext"),t=yield i.effects.call([e,e.getService],"IVssContributionService"),s=yield i.effects.call([t,t.getData],"ms.vss-work-web.team-wit-settings-data-provider");[...s.currentIteration?[s.currentIteration]:[],...s.futureIterations||[],...s.previousIterations||[]].forEach((e=>{e.startDate&&(e.startDate=(0,I.getUtcDate)(e.startDate)),e.finishDate&&(e.finishDate=(0,I.getUtcDate)(e.finishDate))})),yield i.effects.put(v.TeamSettingsActionsCreator.teamSettingsLoaded(s))}}("ReduxTeamSettingsTeamSettingsSagas"),function(e){q=t[e]={};t[e].getTeamSettings=e=>e.teamSettingsState.teamSettings;t[e].getWeekends=e=>e.teamSettingsState.teamSettings.weekends.days,t[e].getAllIterations=n.createSelector(t[e].getTeamSettings,(e=>{const{previousIterations:t=[],futureIterations:s=[],currentIteration:r}=e;return[...t,...r?[r]:[],...s]}));t[e].getIteration=(s,r)=>(0,t[e].getAllIterations)(s).find((e=>(0,u.equals)(e.id,r,!0)));t[e].isCurrentIteration=(e,t)=>!!e.teamSettingsState.teamSettings.currentIteration&&(0,u.equals)(e.teamSettingsState.teamSettings.currentIteration.id,t,!0)}("ReduxTeamSettingsTeamSettingsSelectors"),function(e){t[e]={},__exportStar(v,t[e]),__exportStar(B,t[e]),__exportStar(E,t[e]),__exportStar(w,t[e]),__exportStar(q,t[e])}("ReduxTeamSettingsTeamSettings"),function(e){t[e]={},t[e].TeamSettingsModule={id:"teamsettings",reducerMap:{teamSettingsState:E.teamSettingsReducer},sagas:[w.loadTeamSettings]}}("ReduxTeamSettingsTeamSettingsModule"),function(e){t[e]={},t[e].getAgileHubContentUrl=function(e,t,s,r){const a=e.getService("IVssLocationService"),o={[f.RouteParameters.Project]:t,[f.RouteParameters.TeamName]:s};return a.routeUrl(r,o)},t[e].getAgileHubRootUrl=function(e,t,s){const r=e.getService("IVssLocationService"),a={[f.RouteParameters.Project]:t};return r.routeUrl(s,a)},t[e].getAgileHubPivotContentUrl=function(e,t,s,r,a,o){const i=e.getService("IVssLocationService"),n={[f.RouteParameters.Project]:t,[f.RouteParameters.TeamName]:s,[f.RouteParameters.Pivot]:r};return o&&(n[f.RouteParameters.BacklogLevel]=o),i.routeUrl(a,n)}}("RoutesAgileHubUrlUtils"),function(e){t[e]={},t[e].getSprintsContentRoute=function(e,t,s,r,a){const o=e.getService("IVssLocationService"),i={[f.RouteParameters.Project]:t,[f.RouteParameters.TeamName]:s,[f.RouteParameters.Iteration]:r};return i[f.RouteParameters.Pivot]=a||f.SprintPivots.Taskboard,o.routeUrl(f.RouteContributions.SprintsContentRoute,i)}}("RoutesSprintsRoutingHelpers"),function(e){function s(e,t){return e=e.toLocaleLowerCase(),t.find((t=>0===e.indexOf(t.friendlyPath.toLocaleLowerCase())))}t[e]={},t[e].isMemberOfBacklog=function(e,t,r,a){const{workItemType:o,teamFieldValue:i,iterationPath:n}=e,c=[];return t.forEach((e=>c.push(...e.workItemTypes))),function(e,t){return t.some((t=>0===(0,u.localeIgnoreCaseComparer)(t,e)))}(o,c)&&!!s(n,a)&&function(e,t){return e=e.toLocaleLowerCase(),t.some((t=>{const s=t.value.toLocaleLowerCase();return s===e||!!t.includeChildren&&0===e.indexOf(s+"\\")}))}(i,r)},t[e].getMatchingIteration=s}("UtilsBacklogMembershipEvaluator"),function(e){function s(e,t,s,i,n){if(!e||!e.start||!e.end)return 0;let u=0,c=e.start;for(;c<=e.end;)o(c,t)||!a(c,i,n)||r(c,s)||u++,c=(0,I.addDays)(c,1);return u}function r(e,t){if(!t)return!1;for(const s of t)if(e>=s.start&&e<=s.end)return!0;return!1}function a(e,t,s){return!t||!s||e>=t&&e<=s}function o(e,t){const s=e.getDay();return-1!==t.findIndex((e=>e===s))}function i(e,t,s,r){let a=0,o=new Date(e.getTime());for(;o<=t;)-1!==s.indexOf(o.getDay())||c(o,r)||(a+=1),o.setDate(o.getDate()+1);return a}function n(){return u(new Date(Date.now()))}function u(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function c(e,t){for(const s of t)if(e>=s.start&&e<=s.end)return!0;return!1}t[e]={},t[e].calculateTotalNetDaysOff=function(e,t,r,a,o){return e.reduce(((e,i)=>e+s(i,t,r,a,o)),0)},t[e].calculateNetDaysOff=s,t[e].calculateRemainingWorkingDays=function(e,t,s,i,n,u){if(n&&i){let c=0,d=function(e,t){return t?e>t?e:t:e}(e,i);for(;d<=n;)o(d,t)||!a(d,i,n)||r(d,u)||r(d,s)||c++,d=(0,I.addDays)(d,1);return c}return 0},t[e].getNumberOfWorkingDays=i,t[e].getNumberWorkingDaysLeft=function(e,t,s){return i(n(),e,t,s)},t[e].getTodayInLocalTimeWithNoHours=n,t[e].isTodayInSprint=function(e,t){const s=n();return e<=s&&t>=s},t[e].stripTimeFromDate=u,t[e].hasOverlapWithTeamDaysOff=c,t[e].getWeekendsFromWorkingDays=function(e){return[0,1,2,3,4,5,6].filter((t=>-1===e.indexOf(t)))}}("UtilsCapacityDateUtils"),x=t.UtilsQueuedRequestManagerQueuedRequestManagertypes={},function(e){D=t[e]={};class s extends Error{constructor(){super("Successors of an earlier request were cleared as a result of a chosen completion action."),this.name=this.constructor.name,Object.setPrototypeOf(this,s.prototype)}}t[e].QueueClearedDueToRejectionError=s,t[e].stringifyEntityReference=function(e){return`${e.entityType}-${e.entityId.toString()}`}}("UtilsQueuedRequestManagerUtils"),function(e){U=t[e]={};t[e].RequestNode=class{constructor(e,t,s,r){this.successorNodes=[],this.predecessorNodes=[],this.state=0,this._stringifiedKey=(0,D.stringifyEntityReference)(e.targetEntity),this._predecessorTypes=e.predecessorTypes||[],this._targetEntity=e.targetEntity,this._successBehavior=null==e.successBehavior?0:e.successBehavior,this._failureBehavior=null==e.failureBehavior?1:e.failureBehavior,this._getUpdatedId=e.getUpdatedId,this._executeRequest=t.executeRequest,this._resolve=s,this._reject=r}get entityId(){return this._targetEntity.entityId}get entityType(){return this._targetEntity.entityType}get entityKey(){return this._stringifiedKey}get predecessorTypes(){return this._predecessorTypes}get successBehavior(){return this._successBehavior}get failureBehavior(){return this._failureBehavior}get isPending(){return 0===this.state}get isExecuting(){return 1===this.state}get isSettled(){return 2===this.state}invokeResolve(e){this._resolve(e)}invokeReject(e){this._reject(e)}executeRequest(){return this._executeRequest()}swapEntityId(e){this._targetEntity.entityId=e,this._stringifiedKey=(0,D.stringifyEntityReference)(this)}evaluateGetUpdatedEntityId(e){if(!this._getUpdatedId)return this._targetEntity.entityId;const t=this._getUpdatedId(e);return null==t?this._targetEntity.entityId:t}removePredecessor(e){const t=e.predecessorNodes.findIndex((e=>e.node===this));if(t<0)throw new Error("The specified node was not found as a predecessor to this node.");const s=e.predecessorNodes[t];s.entityRefToUpdate&&(s.entityRefToUpdate.entityId=this.entityId),e.predecessorNodes.splice(t,1)}}}("UtilsQueuedRequestManagerRequestNode"),function(e){P=t[e]={};t[e].QueuedRequestManager=class{constructor(){this._lastRequestsByEntity={},this._lastRequestsByEntityType={}}createRef(e,t){return{entityId:t,entityType:e}}waitForPredecessors(e){return new Promise(((t,s)=>{let r;r=this.queueRequest(e,{executeRequest:()=>new Promise(((e,s)=>t({registerFinished:async t=>(e(t),r),registerFailed:async()=>(s(),r)})))}).catch((e=>{e instanceof D.QueueClearedDueToRejectionError&&s(e)}))}))}queueRequest(e,t){return new Promise(((s,r)=>{const a=new U.RequestNode(e,t,s,r),o=(e.predecessors||[]).map((e=>({node:this._lastRequestsByEntity[(0,D.stringifyEntityReference)(e)],entityRefToUpdate:e}))).filter((e=>!!e.node));a.entityKey in this._lastRequestsByEntity&&o.push({entityRefToUpdate:null,node:this._lastRequestsByEntity[a.entityKey]});for(const e of a.predecessorTypes)e in this._lastRequestsByEntityType&&o.push({entityRefToUpdate:null,node:this._lastRequestsByEntityType[e]});a.predecessorNodes=o;for(const e of a.predecessorNodes)e.node.successorNodes.push(a);this._lastRequestsByEntity[a.entityKey]=a,this._lastRequestsByEntityType[a.entityType]=a,this._startRequestIfPossible(a)}))}isActive(){return 0!==Object.keys(this._lastRequestsByEntity).length}areEntityTypesActive(...e){return Object.keys(this._lastRequestsByEntity).some((t=>e.indexOf(this._lastRequestsByEntity[t].entityType)>=0))}_startRequestIfPossible(e){0===e.predecessorNodes.length&&this._startRequest(e)}_startRequest(e){if(!e.isPending)throw new Error("This request is already complete or executing; it can't be started again.");e.state=1,e.executeRequest().then((t=>{e.state=2,this._evaluateIdUpdate(e,t),e.invokeResolve(t),this._executeCompletionBehavior(e.successBehavior,e)}),(t=>{e.state=2,t instanceof D.QueueClearedDueToRejectionError||this._onRequestRejected(e),e.invokeReject(t)}))}_propagateIdUpdateForTargetEntity(e,t){for(const s of e.successorNodes.filter((t=>t.entityKey===e.entityKey)))this._propagateIdUpdateForTargetEntity(s,t);e.swapEntityId(t)}_evaluateIdUpdate(e,t){const s=e.evaluateGetUpdatedEntityId(t),r=e.entityId,a=e.entityKey;s!==r&&(this._propagateIdUpdateForTargetEntity(e,s),this._swapLastRequestsByEntityKey(a,e.entityKey))}_cancelRequest(e){e.state=2,e.invokeReject(new D.QueueClearedDueToRejectionError)}_swapLastRequestsByEntityKey(e,t){const s=this._lastRequestsByEntity[e];delete this._lastRequestsByEntity[e],this._lastRequestsByEntity[t]=s}_popAndExecuteSuccessors(e){let t=!0;for(const s of e.successorNodes)s.entityKey===e.entityKey&&(t=!1),e.removePredecessor(s),this._startRequestIfPossible(s);t&&delete this._lastRequestsByEntity[e.entityKey],this._lastRequestsByEntityType[e.entityType]===e&&delete this._lastRequestsByEntityType[e.entityType]}_popAndFlushSuccessors(e){for(const t of e.successorNodes)this._popAndFlushSuccessors(t),e.removePredecessor(t),this._cancelRequest(t);delete this._lastRequestsByEntity[e.entityKey],this._lastRequestsByEntityType[e.entityType]===e&&delete this._lastRequestsByEntityType[e.entityType]}_executeCompletionBehavior(e,t){switch(e){case 1:this._popAndFlushSuccessors(t);break;case 0:this._popAndExecuteSuccessors(t);break;default:throw new Error(`The specified completion behavior "${e}" is invalid.`)}}_onRequestRejected(e){this._executeCompletionBehavior(e.failureBehavior,e)}}}("UtilsQueuedRequestManagerQueuedRequestManager"),function(e){N=t[e]={},t[e].queueRequestSaga=function*(e){const t=yield i.effects.call([e.requestManager,e.requestManager.waitForPredecessors],e.requestMetadata);try{const s=yield i.effects.call(e.saga,e.sagaArgs);return yield i.effects.call([t,t.registerFinished],s)}catch(e){throw yield i.effects.call([t,t.registerFailed],e),e}}}("UtilsQueuedRequestManagerQueuedRequestManagerSagaUtils"),function(e){t[e]={},__exportStar(P,t[e]),__exportStar(x,t[e]),__exportStar(N,t[e]),__exportStar(D,t[e])}("UtilsQueuedRequestManagerindex"),t.UtilsTeamDateUtils={},function(e){e[e.Past=0]="Past",e[e.Current=1]="Current",e[e.Future=2]="Future"}(V=t.UtilsTeamDateUtils.IterationTimeframe||(t.UtilsTeamDateUtils.IterationTimeframe={})),t.UtilsTeamDateUtils.parseIterationTimeframe=function(e){return"number"==typeof e?e:(e=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),V[e])},function(e){L=t[e]={};class s extends c.VssComponent{render(){const e=this.props.assets.map((e=>(0,d.getAssetLocation)(this.context.pageContext,e)));return this.props.children(e)}}t[e].AssetResolver=s}("ComponentsAssetResolverAssetResolver"),function(e){t[e]={};class s extends g.Component{constructor(e){super(e)}render(){const e=g.createElement("div",{className:this.props.className},this.props.exceptionsInfo.map(((e,t)=>g.createElement("div",{key:t},this._getErrorsList(e),this._getErrorLinks(e))))),t=this.props.exceptionsInfo.some((e=>e.isSettingsException||!1)),s=t?"ms.vss-work-web/agile-assets/Content/configuration-required.svg":"ms.vss-work-web/agile-assets/Content/hub-error-general.svg",r=t?m.ConfigurationRequired:m.GeneralErrorTitle;return g.createElement("div",{className:"hub-error"},g.createElement(L.AssetResolver,{assets:[s]},(([t])=>g.createElement(p.ZeroData,{imagePath:t,imageAltText:r,primaryText:r,secondaryText:e}))))}_getErrorsList(e){const t=!!e.additionalMessages&&e.additionalMessages.length>0;return g.createElement("div",null,g.createElement("div",null,e.exceptionMessage),t&&g.createElement("ul",null,e.additionalMessages.map(((e,t)=>g.createElement("li",{key:`Error${t}`},e)))))}_getErrorLinks(e){let t,s;return e.primaryLinkHref&&e.primaryLinkText&&(t=g.createElement("p",null,g.createElement(l.Link,{href:e.primaryLinkHref},e.primaryLinkText))),e.secondaryLinkHref&&e.secondaryLinkText&&(s=g.createElement("p",null,g.createElement(l.Link,{href:e.secondaryLinkHref},e.secondaryLinkText))),g.createElement("div",null,t,s)}}t[e].HubError=s}("ComponentsHubErrorHubError")}),["Resources","BoardsHubConstants","Client/RestClient/Boards","Constants/BacklogsHubTelemetryConstants","Constants/RoutingConstants","Utils/NullCheck","DataStructures/CaseInsensitiveDataStructures","DataStructures/NumberSet","DataStructures/index","Redux/BacklogConfiguration/BacklogConfigurationContracts","Redux/BacklogConfiguration/BacklogConfigurationActions","Redux/BacklogConfiguration/BacklogConfigurationReducer","Redux/BacklogConfiguration/BacklogConfigurationSagas","Redux/BacklogConfiguration/BacklogConfigurationModule","Redux/BacklogConfiguration/BacklogConfigurationSelectors","Redux/HubTeam/HubTeamActions","Redux/HubTeam/HubTeamContracts","Redux/HubTeam/HubTeamReducer","Redux/HubTeam/HubTeamModule","Redux/HubTeam/HubTeamSelector","Redux/TeamSettings/TeamSettingsActions","Redux/TeamSettings/TeamSettingsContracts","Redux/TeamSettings/TeamSettingsReducer","Utils/Date","Redux/TeamSettings/TeamSettingsSagas","Redux/TeamSettings/TeamSettingsSelectors","Redux/TeamSettings/TeamSettings","Redux/TeamSettings/TeamSettingsModule","Routes/AgileHubUrlUtils","Routes/SprintsRoutingHelpers","Utils/BacklogMembershipEvaluator","Utils/CapacityDateUtils","Utils/QueuedRequestManager/QueuedRequestManager.types","Utils/QueuedRequestManager/Utils","Utils/QueuedRequestManager/RequestNode","Utils/QueuedRequestManager/QueuedRequestManager","Utils/QueuedRequestManager/QueuedRequestManagerSagaUtils","Utils/QueuedRequestManager/index","Utils/TeamDateUtils","Components/AssetResolver/AssetResolver","Components/HubError/HubError"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-work-web.agile-common-bundle"}}));