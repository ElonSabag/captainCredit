"use strict";define("Test/TestPlansHubRefresh/KeyboardShortcutsModule",["require","exports","VSS/Platform/Context","Test/TestPlansHubRefresh/TestHub/Constants","Test/TestPlansHubRefresh/TestHub/Redux/Suites/SuitesActions","Test/TestPlansHubRefresh/TestHub/Redux/TelemetryActions","Test/TestPlansHubRefresh/TestHub/Redux/TestHubRefresh/TestHubRefreshSelector","Test/TestPlansHubRefresh/Pivots/AuthorPivot/Resources","Test/TestPlansHubRefresh/Pivots/AuthorPivot/AuthorConstants","Test/TestPlansHubRefresh/Pivots/AuthorPivot/Redux/AuthorActions"],(function(e,t,s,r,i,a,o,n,d,u){!function(e){t[e]={};class n extends s.VssService{_serviceStart(e){super._serviceStart(e),this.pageContext=e}_serviceRestart(e){super._serviceRestart(e)}registerKeyboardShortcuts(e){this.pageContext.getService("IVssKeyboardShortcutService").registerShortcut(r.SuitesConstants.SUITE_TREE,{combos:["f2"],description:r.TestHubRefreshConstants.RenameTestSuite,action:()=>{this.renameTestSuite(e)}})}renameTestSuite(e){if(e.suite.id){e.dispatch(i.SuitesActions.editTestSuiteName(e.suite.id,e.suite.title));const t={suiteId:e.suite.id,planId:e.planId,isAdvancedLicenseEnabled:o.isAdvancedLicenseEnabled};e.dispatch(a.TelemetryActions.publishTelemetry(r.TelemetryConstants.RENAME_TEST_SUITE_KEYBOARD,t))}}unregisterKeyboardShortcuts(){this.pageContext.getService("IVssKeyboardShortcutService").removeShortcutGroup(r.SuitesConstants.SUITE_TREE)}}t[e].SuiteTreeKeyboardShortcutProvider=n,s.Services.add("SuiteTreeKeyboardShortcutProvider",{serviceFactory:n})}("SuiteTreeKeyboardShortcutProvider"),function(e){t[e]={};class i extends s.VssService{_serviceStart(e){super._serviceStart(e),this.pageContext=e}_serviceRestart(e){super._serviceRestart(e)}registerKeyboardShortcuts(e){const t=this.pageContext.getService("IVssKeyboardShortcutService");t.registerShortcut(d.TestCaseWorkItemType,{combos:["alt+e"],description:n.AddExistingTestCases,action:()=>{this.addExistingTestCases(e)}}),t.registerShortcut(d.TestCaseWorkItemType,{combos:["alt+n"],description:n.NewTestCase,action:()=>{this.addNewTestCase(e)}}),t.registerShortcut(d.TestCaseWorkItemType,{combos:["del"],description:n.RemoveTestCase,action:()=>{this.removeTestCasesOnDeleteKey(e)}})}addExistingTestCases(e){if(1!=e.suiteType){e.dispatch(u.AuthorActions.addExistingTestCases(e.planId,e.suiteId,e.areaPath));const t={suiteId:e.suiteId,suiteType:e.suiteType,planId:e.planId,areaPath:e.areaPath,isAdvancedLicenseEnabled:o.isAdvancedLicenseEnabled};e.dispatch(a.TelemetryActions.publishTelemetry(r.TelemetryConstants.ADD_EXISTING_TEST_CASES_USING_KEYBOARD,t))}}addNewTestCase(e){if(1!=e.suiteType){e.dispatch(u.AuthorActions.openNewTestCaseWitForm(e.planId,e.suiteId,e.areaPath,e.iterationPath));const t={suiteId:e.suiteId,suiteType:e.suiteType,planId:e.planId,areaPath:e.areaPath,isAdvancedLicenseEnabled:o.isAdvancedLicenseEnabled};e.dispatch(a.TelemetryActions.publishTelemetry(r.TelemetryConstants.ADD_TEST_CASES_USING_KEYBOARD,t))}}removeTestCasesOnDeleteKey(e){if(e.selection&&e.testCases){const t={suiteId:e.suiteId,suiteType:e.suiteType,planId:e.planId,areaPath:e.areaPath},s=this._getSelectedTestCaseIds(e.selection,e.testCases);if(void 0!==s&&s.length>0)window.confirm(n.RemoveTestCaseViaDeleteKeyConfirmDialogText)&&e.dispatch(u.AuthorActions.removeTestCasesFromSuite(t.planId,t.suiteId,s,e.selection))}}_getSelectedTestCaseIds(e,t){let s=[];const r=e.value.length;for(let i=0;i<r;i++)for(let r=e.value[i].beginIndex;r<=e.value[i].endIndex;r++)s.push(t[r].id);return s}unregisterKeyboardShortcuts(){this.pageContext.getService("IVssKeyboardShortcutService").removeShortcutGroup(d.TestCaseWorkItemType)}}t[e].AuthorTabKeyboardShortcutProvider=i,s.Services.add("AuthorTabKeyboardShortcutProvider",{serviceFactory:i})}("AuthorTabKeyboardShortcutProvider")}),["SuiteTreeKeyboardShortcutProvider","AuthorTabKeyboardShortcutProvider"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-test-web.keyboard-shortcuts-module"}}));