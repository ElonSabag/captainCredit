"use strict";define("Widgets/Burndown",["require","exports","Analytics/Boards/BoardsQueries/ProcessesQuery","Analytics/Boards/BurndownQueries/WorkItemTypeFieldsQuery","Dashboards/WidgetCommon/DashboardsCacheableQueryService","Tfs/Widget/Context","VSS/Core/Util/String","Wit/UI/Services/WorkItemTypeIconMetadataService","WidgetCommon/ModernWidgetTypes/ActionCreatorBase","Analytics/Common/Utilities/QueryUtilities","VSS/Features/Charts/Contracts","WidgetCommon/DateUtils/DateUtils","WidgetCommon/ModernWidgetTypes/ChartOptionFactoryBase","Analytics/Boards/BoardsQueries/BacklogsQuery","Dashboards/WidgetCommon/WidgetTelemetry","WidgetCommon/ModernWidgetTypes/CommonConfigurationTypes","WidgetCommon/ModernWidgetTypes/SettingsManagerBase","Analytics/Boards/BurndownQueries/CompletedWorkItemsQuery","Analytics/Boards/BurndownQueries/CurrentEffortQuery","Analytics/Boards/BurndownQueries/EffortSnapshotsQuery","Analytics/Boards/BurndownQueries/ProjectsIterationsByDateQuery","Analytics/Boards/BurndownQueries/ProjectsIterationsByIdQuery","Analytics/Boards/BurndownQueries/UnestimatedWorkItemsQueries","Analytics/Boards/BurndownQueries/WorkItemIdsSnapshotQuery","Analytics/Common/Utilities/AnalyticsExceptionUtilities","Analytics/Queries/PingServiceQuery","Reporting/Visuals/LayoutComponents/Widgets/Demands/DemandType","Reporting/Visuals/LayoutComponents/Widgets/LayoutState","WidgetCommon/ModernWidgetTypes/WidgetDataManagerBase","WidgetCommon/WitUtils/Constants","WidgetCommon/WitUtils/WiqlUrlBuilder","VSS/Platform/Feature","Analytics/Common/Resources","react","Reporting/Lightbox/Lightbox","Reporting/Visuals/LayoutComponents/Widgets/ComponentLayoutEngine","VSS/Platform/Components/Format","VSS/Platform/Location","WidgetCommon/ModernWidgetTypes/ViewComponentBase","Dashboards/WidgetContracts/WidgetProps","VSS/Platform/Layout"],(function(e,t,n,r,o,a,i,s,d,l,u,c,g,m,p,h,f,y,C,D,w,B,S,W,I,T,k,v,E,b,P,A,M,R,F,x,N,_,L,O,Q){var U,V,j,H,z,$,q,J,G,K,X,Y,Z,ee,te,ne,re,oe,ae;U=t.Resources={},t.Resources.Config_InvalidQueryValues="VS403648: There was an issue processing your configuration. Please configure your widget and try again.",t.Resources.BurndownWidget_CompletedEffortSeriesName="Completed",t.Resources.BurndownWidget_RemainingEffortSeriesName="Remaining",t.Resources.BurndownWidget_HeroDescription="Remaining",t.Resources.BurndownWidget_CompletedMetricName="Completed",t.Resources.BurndownWidget_AverageBurndownMetricName="Average burndown",t.Resources.BurndownWidget_AverageBurnupMetricName="Average burnup",t.Resources.BurndownWidget_TotalScopeIncreaseMetricName="Total Scope Increase",t.Resources.BurndownWidget_ItemsNotEstimatedMetricName="Items not estimated",t.Resources.BurndownWidget_ProjectCompletionForecastFormat="Projected completion: {0}",t.Resources.BurndownWidget_ProjectCompletionForecastOutsideChartFormat="Projected completion: {0} ({1} more {2})",t.Resources.TimePeriod_IterationSingular="iteration",t.Resources.TimePeriod_IterationPlural="iterations",t.Resources.TimePeriod_DaySingular="day",t.Resources.TimePeriod_DayPlural="days",t.Resources.TimePeriod_WeekSingular="week",t.Resources.TimePeriod_WeekPlural="weeks",t.Resources.TimePeriod_MonthSingular="month",t.Resources.TimePeriod_MonthPlural="months",t.Resources.BurndownWidget_TotalScopeTrendlineSeriesName="Total Scope",t.Resources.BurndownWidget_BurndownTrendlineSeriesName="Burndown",t.Resources.BurnupWidget_BurnupTrendlineSeriesName="Burnup",t.Resources.ModernWidget_PluralBacklogNameErrorFormat="VS403645: Unable to retrieve plural backlog name. {0}",t.Resources.BurndownWidget_LearnMore="Learn more about the Burndown Widget",t.Resources.BurndownWidget_LearnMoreLink="https://go.microsoft.com/fwlink/?linkid=839428",t.Resources.BurnupWidget_LearnMoreLink="https://go.microsoft.com/fwlink/?linkid=839428",t.Resources.BurndownWidgetDataManager_NoWidgetSettingsFound="Error: Widget has no configuration settings.",t.Resources.ConfigError_NoIterations="No iterations were found.",t.Resources.ConfigError_NoTeamsFound="No teams were found",t.Resources.ConfigError_NoEndDateOnIteration="An iteration could not be handled, as it was not configured with an end date",t.Resources.BurndownWidget_SetIterationDatesAriaLabel="Set start and end dates for iterations",t.Resources.BurndownWidget_SetIterationDatesLink="Set iteration dates",V=t[ae="BurndownLegacyContracts"]={},(oe=t[ae].BurnDirection||(t[ae].BurnDirection={}))[oe.Down=0]="Down",oe[oe.Up=1]="Up",(re=t[ae].ChangeFlags||(t[ae].ChangeFlags={}))[re.none=0]="none",re[re.name=1]="name",re[re.sizeInPixels=2]="sizeInPixels",re[re.customSettings=4]="customSettings",re[re.all=7]="all",(ne=t[ae].WidgetFrameworkOperationId||(t[ae].WidgetFrameworkOperationId={}))[ne.preload=0]="preload",ne[ne.load=1]="load",ne[ne.reload=2]="reload",ne[ne.lightbox=3]="lightbox",ne[ne.listen_lightboxResized=4]="listen_lightboxResized",ne[ne.listen_lightboxOptions=5]="listen_lightboxOptions",function(e){j=t[e]={},function(e){e[e.ByDateInterval=0]="ByDateInterval",e[e.ByIterations=1]="ByIterations"}(t[e].DateSampleMode||(t[e].DateSampleMode={}))}("BurndownWidgetComponentsBurndownSettings"),function(e){H=t[e]={},function(e){e.Proposed="Proposed",e.InProgress="InProgress",e.Resolved="Resolved",e.Completed="Completed",e.Removed="Removed",e.DefaultWorkItemStateCategory="InProgress"}(t[e].WorkItemStateCategoryNames||(t[e].WorkItemStateCategoryNames={})),function(e){e[e.WorkItemType=0]="WorkItemType",e[e.BacklogCategory=1]="BacklogCategory"}(t[e].WorkItemTypeFilterMode||(t[e].WorkItemTypeFilterMode={}))}("BurndownWidgetComponentsBurndownDataContract"),function(e){z=t[e]={};class d{static async getWitColorDictionary(e,t,n){const r=e.getService(s.WorkItemTypeIconMetadataServiceId),o={};for(const e of t){const t=await r.getWorkItemIcon(n,e);o[e]=`#${t.color.substr(-6)}`}return o}static async getWorkItemTypes(e,t,n,r){if(t.identifier==H.WorkItemTypeFilterMode[H.WorkItemTypeFilterMode.WorkItemType])return Promise.resolve([t.settings]);{const o=(0,a.getProject)(e);return d.getProjectWorkItemTypesOfBacklogCategory(e,o.id,t.settings,n,r)}}static async getWorkItemTypesForTeam(e,t,n,r){if(t.identifier==H.WorkItemTypeFilterMode[H.WorkItemTypeFilterMode.WorkItemType])return Promise.resolve([t.settings]);{const o=(0,a.getProject)(e);return d.getProjectWorkItemTypesOfBacklogCategoryForTeam(e,o.id,t.settings,n,r)}}static async getWorkItemTypeFieldsPromise(e,t,n,o,a,i){const s=new r.WorkItemTypeFieldsQuery(e,n,t,i).setAutomationMode(a);return o.getCacheableQueryResult(s)}static async getProjectWorkItemTypesOfBacklogCategory(e,t,r,a,i){return e.getService(o.IDashboardsCacheableQueryServiceName).getCacheableQueryResult(n.ProcessesQuery.onProject(e,t).setAutomationMode(i)).then((e=>{const t=[];for(const n of e){const e=n.BacklogCategoryReferenceName===r,o=n.IsBugType&&a&&r===d.WitRequirementsCategory;(e||o)&&t.indexOf(n.WorkItemType)<0&&t.push(n.WorkItemType)}return t}))}static async getProjectWorkItemTypesOfBacklogCategoryForTeam(e,t,r,a,i){return e.getService(o.IDashboardsCacheableQueryServiceName).getCacheableQueryResult(n.ProcessesQuery.onTeam(e,t,a).setAutomationMode(i)).then((e=>{const t=[];for(const n of e){n.BacklogCategoryReferenceName===r&&t.push(n.WorkItemType)}return t}))}static async getLegacyProjectData(e){const t=e.getService("IVssContributionService"),n=await t.getDataAsync("ms.vss-dashboards-web.legacy-project-data-provider");return n?n.value:{ProjectUsesKnownBugCategoryName:!1}}static async getPluralBacklogNameOfBacklogCategory(e,t,r,a){const s=e.getService(o.IDashboardsCacheableQueryServiceName);try{return await s.getCacheableQueryResult(n.ProcessesQuery.onProject(e,t).setAutomationMode(a)).then((e=>{const t=e.findIndex((e=>e.BacklogCategoryReferenceName===r)),n=-1!=t?e[t]:null;return null!=n?n.BacklogName:(e=>Promise.reject(`Failed to find the backlog category '${e}' in the process configuration.`))(r)}))}catch(e){return Promise.reject((0,i.format)(U.ModernWidget_PluralBacklogNameErrorFormat,e))}}}t[e].AsyncDataHelpers=d,d.WitRequirementsCategory="Microsoft.RequirementCategory"}("BurndownWidgetComponentsAsyncDataHelpers"),function(e){$=t[e]={},function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"}(t[e].BurnDirection||(t[e].BurnDirection={}))}("BurndownWidgetComponentsBurnDirection"),function(e){q=t[e]={};class n extends d.ActionCreatorBase{}t[e].BurndownActionCreator=n}("BurndownWidgetComponentsBurndownActionCreator"),function(e){J=t[e]={};class n{}t[e].BurndownConstants=n,n.featureName="BurndownWidget",n.featureFlagName="Analytics.ProcessAnalyticsUseWitDefinition",n.featureFlagName_ShowResolvedItemsAsCompleted="WebAccess.Widgets.ShowResolvedItemsAsCompleted",n.command="Burndown",n.remainingEffortSeriesColor="#0078d4",n.completedEffortSeriesColor="#107c10",n.burnTrendLineColor="#9D9D9D",n.scopeTrendLineColor="#FFA438",n.forecastAnnotationOutsideChartLabelColor="#a80000"}("BurndownWidgetComponentsBurndownConstants"),function(e){G=t[e]={};t[e].BurndownDataFactory=class{static getCompletedEffort(e,t=!1){if(null==e)throw new Error("effort must be defined");return t?e.filter((e=>e.StateCategory===H.WorkItemStateCategoryNames.Completed||e.StateCategory===H.WorkItemStateCategoryNames.Resolved||e.State===H.WorkItemStateCategoryNames.Resolved)):e.filter((e=>e.StateCategory===H.WorkItemStateCategoryNames.Completed))}static getRemainingEffort(e,t=!1){if(null==e)throw new Error("effort must be defined");return t?e.filter((e=>e.StateCategory!==H.WorkItemStateCategoryNames.Completed&&e.StateCategory!==H.WorkItemStateCategoryNames.Resolved&&e.State!==H.WorkItemStateCategoryNames.Resolved)):e.filter((e=>e.StateCategory!==H.WorkItemStateCategoryNames.Completed))}static getEffortByDate(e){const t={};return e.forEach((e=>{const n=e.Date;null==t[n]?t[n]=e.AggregatedEffort:t[n]+=e.AggregatedEffort})),t}static getAverageChange(e,t){if(t.length<=1)return 0;const n=e[t[0]];return(e[t[t.length-1]]-n)/(t.length-1)}static getSumOfAggregatedEffort(e){let t=0;return e.forEach((e=>{t+=e.AggregatedEffort})),t}static formatAverageBurn(e){let t=0;return t=e<1&&e>-1?Math.round(10*e)/10:Math.round(e),t}static getCompletedPercentage(e,t=!1){let n=0,r=0;return e.forEach((e=>{(t&&(e.StateCategory===H.WorkItemStateCategoryNames.Resolved||e.State===H.WorkItemStateCategoryNames.Resolved)||e.StateCategory===H.WorkItemStateCategoryNames.Completed)&&(n+=e.AggregatedEffort),r+=e.AggregatedEffort})),0===r?0:Math.floor(100*n/r)}static isWorkItemCompleted(e,t,n=!1){return e===H.WorkItemStateCategoryNames.Completed||!!n&&(e===H.WorkItemStateCategoryNames.Resolved||t===H.WorkItemStateCategoryNames.Resolved)}}}("BurndownWidgetComponentsBurndownDataFactory"),function(e){K=t[e]={};function n(e){return e[e.length-1]}function r(e){return e[e.length-2]}function o(e){return(0,c.parseIsoDateStringInLocalTime)(e).toLocaleDateString()}class a{constructor(e){this.chartInputs=e}getBurndownColumnSeries(){const e=this.getPrimaryEffortColumnSeries(this.chartInputs.remainingEffort,U.BurndownWidget_RemainingEffortSeriesName,J.BurndownConstants.remainingEffortSeriesColor);return this.chartInputs.showOtherEffort&&e.push(this.getCompletedEffortSeriesForBurdownSecondary()),e}getBurnupColumnSeries(){const e=this.getPrimaryEffortColumnSeries(this.chartInputs.completedEffort,U.BurndownWidget_CompletedEffortSeriesName,J.BurndownConstants.completedEffortSeriesColor);return this.chartInputs.showOtherEffort&&e.push(this.getRemainingEffortSeriesForBurdownSecondary()),e}getSampleDates(){return this.chartInputs.sampleDates}getPrimaryEffortColumnSeries(e,t,n){return this.chartInputs.showStackedWorkItemTypes?d(e,this.getSampleDates(),this.chartInputs.todayInAccountTimezone,this.chartInputs.workItemTypeColorDictionary):[{name:t,data:s(e,this.getSampleDates(),this.chartInputs.todayInAccountTimezone),color:n}]}getCompletedEffortSeriesForBurdownSecondary(){return{name:U.BurndownWidget_CompletedEffortSeriesName,data:s(this.chartInputs.completedEffort,this.getSampleDates(),this.chartInputs.todayInAccountTimezone),color:J.BurndownConstants.completedEffortSeriesColor}}getRemainingEffortSeriesForBurdownSecondary(){return{name:U.BurndownWidget_RemainingEffortSeriesName,data:s(this.chartInputs.remainingEffort,this.getSampleDates(),this.chartInputs.todayInAccountTimezone),color:J.BurndownConstants.remainingEffortSeriesColor}}}function s(e,t,n){const r=G.BurndownDataFactory.getEffortByDate(e),o=[],a=t;for(const e of a){const t=null!=r[e]?r[e]:(0,i.localeIgnoreCaseComparer)(e,n)<=0?0:null;o.push(t)}return o}function d(e,t,n,r){const o=[],a={};for(const t of e)null==a[t.WorkItemType]?a[t.WorkItemType]=[t]:a[t.WorkItemType].push(t);for(const e in a)o.push({name:e,data:s(a[e],t,n),color:null!=r?r[e]:void 0});return o.sort(((e,t)=>(0,i.localeIgnoreCaseComparer)(e.name,t.name))),o}t[e].ChartOptionStrategy=a,t[e].reduceEffortToSeriesData=s,t[e].getWorkItemStackedEffortColumnSeries=d;class m extends a{getLabelValues(){const e=[o(this.chartInputs.startDate)];return this.chartInputs.iterations&&e.push(...this.chartInputs.iterations.map((e=>e.IterationName||""))),e}}t[e].IterationChartOptionStrategy=m;class p extends a{getLabelValues(){return null!=this.chartInputs.sampleDates?this.chartInputs.sampleDates.map((e=>o(e))):[]}}t[e].DateIntervalChartOptionStrategy=p;class h extends g.ChartOptionFactoryBase{constructor(e){super(),this.pageContext=e}static maxValue(e){if(null==e)throw new Error("values must be defined for maxValue()");return Math.max(...e.filter((e=>!isNaN(e))))}static customTooltipMapping(e){return e.map((e=>{const t=(Math.round(10*+e.values[0])/10).toLocaleString();return{styleType:{color:e.color,type:1},text:`${e.seriesName}: ${t}`}}))}createChartOptions(e){if(null==e.sampleDates)throw new Error("featureChartData.sampleDates must be defined");const t=class{static getStrategy(e){return null!=e.iterations?new m(e):new p(e)}}.getStrategy(e),o={title:"",pageContext:this.pageContext,chartType:u.ChartTypesConstants.Hybrid,series:[],xAxis:{labelValues:t.getLabelValues()},yAxis:{endOnTick:!1,min:0,softMax:1},specializedOptions:{chartTypes:[]},suppressAnimation:e.suppressAnimations};e.allowChartClicks&&(o.click=t=>this._handleClick(t,e));const a=o.specializedOptions;let s;s=e.burnDirection===$.BurnDirection.Up?t.getBurnupColumnSeries():t.getBurndownColumnSeries(),o.series.push(...s);const d=e.showFillAsArea?u.ChartTypesConstants.StackedArea:u.ChartTypesConstants.StackedColumn;o.series.forEach((()=>a.chartTypes.push(d)));const g=e.todayInAccountTimezone,f=e.sampleDates.filter((e=>e.toLowerCase().localeCompare(g.toLowerCase())<=0)),y=e.datesToTotalEffort;let C,D=0;if((e.showScopeTrendline||e.burnDirection===$.BurnDirection.Up&&e.showBurnTrendline)&&(D=G.BurndownDataFactory.getAverageChange(y,f)),e.showBurnTrendline){const t=f.map((t=>e.datesToPrimarySeriesEffort[t])),s=e.datesToPrimarySeriesEffort[n(f)];let d,g;if(e.burnDirection===$.BurnDirection.Down&&e.averageBurn>0?(d=Math.ceil(s/e.averageBurn),g=s/d):e.burnDirection===$.BurnDirection.Up&&e.showBurnTrendline&&-e.averageBurn-D>0?(d=Math.ceil((y[n(f)]-s)/(-e.averageBurn-D)),g=-(y[n(f)]+D*d-s)/d):(g=e.averageBurn,d=e.sampleDates.length-f.length),f.length>=2){const a=this.pushWithinChartTrendPrediction(t,g,e.sampleDates.length);if(e.averageBurn>0&&e.burnDirection===$.BurnDirection.Down||-e.averageBurn>D&&e.burnDirection===$.BurnDirection.Up){const s=null!=e.iterations||e.lastGeneratedIntervalSampleDate===n(e.sampleDates),u=f.length+d>(s?e.sampleDates.length:e.sampleDates.length-1);let m,p,h=U.BurndownWidget_ProjectCompletionForecastFormat;const y=this.pageContext.getService("IVssThemeService");if(y){const e=y.getThemeValue("text-primary-color");m=e,p=e}let C,D;if(u){C=t.length-1,h=U.BurndownWidget_ProjectCompletionForecastOutsideChartFormat,m=y?y.getThemeValue("status-error-strong"):J.BurndownConstants.forecastAnnotationOutsideChartLabelColor,p="rgba(0,0,0,0)";const o=f.length+d-(s?e.sampleDates.length:e.sampleDates.length-1);let u;if(null!=e.iterations){const t=n(e.sampleDates),r=e.iterations[f.length-2],a=r.StartDateTimeOffset&&r.EndDateTimeOffset?(0,c.daysBetweenDates)(l.QueryUtilities.parseAnalyticsDateTime(r.StartDateTimeOffset,!0),l.QueryUtilities.parseAnalyticsDateTime(r.EndDateTimeOffset,!0)):0,i=new Date(t);D=(0,c.addDays)(i,a*o),u=1===o?U.TimePeriod_IterationSingular:U.TimePeriod_IterationPlural}else{if(!s&&e.sampleDates.length>=2&&a>0){const o=(0,c.daysBetweenDates)(new Date(n(e.sampleDates)),new Date(r(e.sampleDates)));let a=1;e.sampleDatesInterval===c.DateSampleInterval.Weeks?a=o/7:e.sampleDatesInterval===c.DateSampleInterval.Months&&(a=o/30),t[t.length-1]=r(t)-g*a}const i=(0,c.parseIsoDateStringInLocalTime)(e.lastGeneratedIntervalSampleDate);switch(e.sampleDatesInterval){case c.DateSampleInterval.Days:D=(0,c.addDays)(i,o),u=1===o?U.TimePeriod_DaySingular:U.TimePeriod_DayPlural;break;case c.DateSampleInterval.Weeks:D=(0,c.addDays)(i,7*o),u=1===o?U.TimePeriod_WeekSingular:U.TimePeriod_WeekPlural;break;case c.DateSampleInterval.Months:default:D=(0,c.getEndOfMonth)((0,c.addMonths)((0,c.getStartOfMonth)(i),o)),u=1===o?U.TimePeriod_MonthSingular:U.TimePeriod_MonthPlural}}h=(0,i.format)(h,"{0}",o,u)}else C=f.length+d-1,D=(0,c.parseIsoDateStringInLocalTime)(e.sampleDates[C]);const w=D.toLocaleDateString(),B=(0,i.format)(h,w);o.xAxis&&(o.xAxis.plotLines=[{labelText:B,labelColor:m,axisPosition:C,lineColor:p}])}}o.series.push({name:e.burnDirection===$.BurnDirection.Down?U.BurndownWidget_BurndownTrendlineSeriesName:U.BurnupWidget_BurnupTrendlineSeriesName,data:t,color:J.BurndownConstants.burnTrendLineColor}),a.chartTypes.push(u.ChartTypesConstants.Line),C=h.maxValue([].concat(t))}const w=f.map((e=>y[e]||0)),B=1.25*h.maxValue(w);return e.showScopeTrendline&&(e.skipFutureScopeInTrendLine||this.pushWithinChartTrendPrediction(w,-D,e.sampleDates.length),o.series.push({name:U.BurndownWidget_TotalScopeTrendlineSeriesName,data:w,color:J.BurndownConstants.scopeTrendLineColor}),a.chartTypes.push(u.ChartTypesConstants.Line),C=h.maxValue([].concat(w))),null!=C&&C>B&&o.yAxis&&(o.yAxis.max=B),o.tooltip={customTooltipMapping:h.customTooltipMapping},o}pushWithinChartTrendPrediction(e,t,r){let o=0;const a=n(e);for(;;){const n=a-(o+1)*t;if(!(n>=0&&e.length<r))break;o++,e.push(n)}return o}_handleClick(e,t){let n=e.seriesName;const r=e.seriesDataIndex;if(n!==U.BurndownWidget_TotalScopeTrendlineSeriesName){if(n===U.BurndownWidget_BurndownTrendlineSeriesName||n===U.BurnupWidget_BurnupTrendlineSeriesName){const e=new Date;if(r&&new Date(t.sampleDates[r])>new Date(e.getFullYear(),e.getMonth(),e.getDate()))return;n=n===U.BurndownWidget_BurndownTrendlineSeriesName?U.BurndownWidget_RemainingEffortSeriesName:U.BurndownWidget_CompletedEffortSeriesName}t.onClick({seriesName:n||"",sampleDate:void 0!==r?t.sampleDates[r]:"",dataPointName:e.labelName||""})}}}t[e].BurndownChartOptionFactory=h}("BurndownWidgetComponentsBurndownChartOptionFactory"),function(e){X=t[e]={};class n extends f.SettingsManagerBase{constructor(e,t){super(),this.pageContext=e,this.teamContext=t}static async packDefaultSettings(e,t){const n=new Date,r=(0,c.addDays)(n,-14),o=t.id,i=a.getProject(e).id,s=e.getService("IDashboardsCacheableQueryService"),d=await s.getCacheableQueryResult(new m.BacklogsQuery(i,[o])),l=d.findIndex((e=>e.IsBoardVisible)),u=l>=0&&d[l].BoardCategoryReferenceName||"";return{includeBugsForRequirementCategory:!1,burndownTrendlineEnabled:!0,totalScopeTrendlineEnabled:!0,completedWorkEnabled:!1,stackByWorkItemTypeEnabled:!1,showResolvedItemsAsCompletedEnabled:!1,aggregation:{identifier:h.AggregationMode.Count,settings:""},workItemTypeFilter:{identifier:H.WorkItemTypeFilterMode[H.WorkItemTypeFilterMode.BacklogCategory],settings:u},timePeriodConfiguration:{startDate:(0,c.toLocalDateIsoString)(r),samplingConfiguration:{identifier:j.DateSampleMode.ByDateInterval,settings:{endDate:(0,c.toLocalDateIsoString)(n),lastDayOfWeek:5,sampleInterval:c.DateSampleInterval.Days}}},teams:[{teamId:t.id,projectId:a.getProject(e).id}],fieldFilters:[]}}getFeatureName(){return J.BurndownConstants.featureName}generateDefaultSettings(){return Promise.resolve(n.packDefaultSettings(this.pageContext,this.teamContext))}async hasSatisfactoryConfiguration(e){let t=this.isConfigured(e);if(t){t=1!=JSON.parse(e.settings||"").includeBugsForRequirementCategory||(await z.AsyncDataHelpers.getLegacyProjectData(this.pageContext)).ProjectUsesKnownBugCategoryName,t||(0,p.onWidgetFailure)(this.pageContext,e,"Widget Rendering blocked - usage of include bugs option was blocked on customized Xml Process, until widget is reconfigured.","BurndownSettingsManager.hasSatisfactoryConfiguration()",{ErrorDetail:"Widget Rendering blocked - usage of include bugs option was blocked on customized Xml Process, until widget is reconfigured."})}return t}}t[e].default=n}("BurndownWidgetComponentsBurndownSettingsManager"),function(e){Y=t[e]={};class n{static isIterations(e){const t=e;return void 0===t.lastDayOfWeek&&void 0===t.sampleInterval}static getIterationEndDates(e){if(null==e)throw new Error(U.ConfigError_NoIterations);return e.map((e=>{if(null==e.EndDateTimeOffset)throw new Error(U.ConfigError_NoEndDateOnIteration);return e.EndDateTimeOffset.substr(0,"yyyy-MM-dd".length)}))}static stripTimeFromDate(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}static getSampleDates(e,t){const r=[e];let o,a=!1;if(n.isIterations(t))r.push(...n.getIterationEndDates(t));else{const i=(0,c.parseIsoDateStringInLocalTime)(e),{endDate:s,lastDayOfWeek:d,sampleInterval:l}=t,u=(0,c.parseIsoDateStringInLocalTime)(s);let g=(0,c.getEndOfDateIntervalPeriod)(i,l,d);for(a=l===c.DateSampleInterval.Days;n.stripTimeFromDate(g).getTime()<n.stripTimeFromDate(u).getTime()||n.stripTimeFromDate(g).getTime()==n.stripTimeFromDate(u).getTime();)g.getTime()!==i.getTime()&&r.push((0,c.toLocalDateIsoString)(g)),g=l===c.DateSampleInterval.Months?(0,c.getEndOfMonth)((0,c.addMonths)((0,c.getStartOfMonth)(g),1)):(0,c.addDays)(g,1*l==c.DateSampleInterval.Weeks?7:1);o=r[r.length-1],s!==r[r.length-1]&&r.push(s)}return{sampleDates:r,lastIntervalDate:o||"",isDailyInterval:a}}}t[e].TimeIntervalUtils=n}("BurndownWidgetComponentsTimeIntervalUtils"),function(e){Z=t[e]={};class n extends E.WidgetDataManagerBase{constructor(e,t,n,r,a="Burndown",i,s){super(e,n),this.allowChartClicks=r,this.command=a,this.dataService=e.getService(o.IDashboardsCacheableQueryServiceName),this.settingsManager=i||new X.default(e,t),this.isAutomationScenario=!0===s,this.teamContext=t,this.pageContext=e}async getData(){let e;return e=await this.settingsManager.hasSatisfactoryConfiguration(this.widgetPropsForTelemetry)?this.demandsArePresent()?this.getDataImpl():Promise.resolve(this.currentState):this.configNotSatisfactory(),e}demandsArePresent(){return this.demandTracker.isDemandPresent(k.DemandType.subtitle)||this.demandTracker.isDemandPresent(k.DemandType.scalar)||this.demandTracker.isDemandPresent(k.DemandType.chart)||this.demandTracker.isDemandPresent(k.DemandType.submetrics)}getBurnDirection(){return $.BurnDirection.Down}getIterationsPromise(e,t,n){const r=e.samplingConfiguration.settings;for(const e of r)if(!e)return Promise.reject(U.Config_InvalidQueryValues);const o=j.DateSampleMode[e.samplingConfiguration.identifier]==j.DateSampleMode[j.DateSampleMode.ByIterations]?new B.ProjectsIterationsByIdQuery(this.context,t,r,this.command):new w.ProjectsIterationsByDateQuery(this.context,t,e.startDate,this.command);o.setAutomationMode(this.isAutomationScenario);const a=this.dataService.getCacheableQueryResult(o);return this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(o),n),a}async getEffortSnapshotsPromise(e,t,n,r,o){const a=new D.EffortSnapshotsQuery(this.context,r,e.teams,e.fieldFilters,e.aggregation,t,n,e.showResolvedItemsAsCompletedEnabled,this.command);a.setAutomationMode(this.isAutomationScenario);const i=this.dataService.getCacheableQueryResult(a);return this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(a),o),i}getUnestimatedCountPromise(e,t,n,r){const o=new S.UnestimatedWorkItemsCountQuery(this.context,e.teams,e.fieldFilters,t,n,e.aggregation.settings,e.showResolvedItemsAsCompletedEnabled,this.command);o.setAutomationMode(this.isAutomationScenario);const a=this.dataService.getCacheableQueryResult(o);return this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(o),r),a}getOnClickChartHandler(e,t,n,r){return o=>{let a;a=o.seriesName!==U.BurndownWidget_CompletedEffortSeriesName&&o.seriesName!==U.BurndownWidget_RemainingEffortSeriesName?[o.seriesName]:t;const i=this.getBurnDirection()!==$.BurnDirection.Down||o.seriesName===U.BurndownWidget_CompletedEffortSeriesName,s=window.open();s&&(s.opener=null);const d=new W.WorkItemIdsSnapshotQuery(this.context,o.sampleDate,e.teams,e.fieldFilters,n,e.aggregation,i,a,e.showResolvedItemsAsCompletedEnabled,this.command);this.dataService.getCacheableQueryResult(d).then((e=>{const t=e,n=`${i?U.BurndownWidget_CompletedEffortSeriesName:U.BurndownWidget_RemainingEffortSeriesName} work items - ${o.dataPointName}`;this.navigateToWorkItemList(n,t,s)})).then(void 0,(e=>{const t=(0,I.extractODataError)(e);(0,p.onWidgetFailure)(this.context,this.widgetPropsForTelemetry,t,"Handle chart click",{ErrorDetail:JSON.stringify(e)})})),this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(d),r)}}getCurrentEffortPromise(e,t,n,r){const o=new C.CurrentEffortQuery(this.context,e.teams,e.fieldFilters,e.aggregation,t,n,e.showResolvedItemsAsCompletedEnabled,this.command);o.setAutomationMode(this.isAutomationScenario);const a=this.dataService.getCacheableQueryResult(o);return this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(o),r),a}getWitColorDictionaryPromise(e,t,n){let r;if(t){const t=(0,a.getProject)(e).name;try{r=z.AsyncDataHelpers.getWitColorDictionary(e,n,t)}catch(t){const n=(0,I.extractODataError)(t);throw(0,p.onWidgetFailure)(e,this.widgetPropsForTelemetry,n,"Retrieve work item color information",{ErrorDetail:JSON.stringify(t)}),t}}else r=Promise.resolve(void 0);return r}async getDataImpl(){if(null==this.settings)throw new Error(U.BurndownWidgetDataManager_NoWidgetSettingsFound);const e=JSON.parse(this.settings);if((0,A.isFeatureFlagEnabled)(this.pageContext,J.BurndownConstants.featureFlagName_ShowResolvedItemsAsCompleted,!1)||(e.showResolvedItemsAsCompletedEnabled=!1),null==e.teams||0===e.teams.length)throw new Error(U.ConfigError_NoTeamsFound);const t=e.teams.map((e=>e.projectId)),n=new Set,r=z.AsyncDataHelpers.getWorkItemTypes(this.context,e.workItemTypeFilter,!!e.includeBugsForRequirementCategory,this.isAutomationScenario),o=r.then((e=>z.AsyncDataHelpers.getWorkItemTypeFieldsPromise(this.context,e,t,this.dataService,this.isAutomationScenario)));let a;return e.timePeriodConfiguration.samplingConfiguration.identifier===j.DateSampleMode.ByIterations&&(a=this.getIterationsPromise(e.timePeriodConfiguration,t,n)),Promise.all([r,o,a]).then((([t,r,o])=>{let a;if(this.demandTracker.isDemandPresent(k.DemandType.chart)||this.demandTracker.isDemandPresent(k.DemandType.submetrics)){const s=null!=o?Y.TimeIntervalUtils.getSampleDates(e.timePeriodConfiguration.startDate,o):Y.TimeIntervalUtils.getSampleDates(e.timePeriodConfiguration.startDate,e.timePeriodConfiguration.samplingConfiguration.settings),d=this.getEffortSnapshotsPromise(e,t,r,s,n),l=this.getCurrentEffortPromise(e,t,r,n);let u;e.aggregation.identifier===h.AggregationMode.Sum&&(u=this.getUnestimatedCountPromise(e,t,r,n));const g=this.getWitColorDictionaryPromise(this.context,e.stackByWorkItemTypeEnabled,t),m=(0,c.fetchTodayInAccountTimeZone)(this.context),p=null!=o?void 0:e.timePeriodConfiguration.samplingConfiguration.settings.sampleInterval;a=Promise.all([d,l,u,g,m]).then((async([a,d,l,u,c])=>{if(0===a.length&&null==l)return this.packMessageAsState(v.MessageType.NoData);this.resetMessageState();const g=s.sampleDates.filter((e=>(0,i.localeIgnoreCaseComparer)(e,c)<=0)),m=G.BurndownDataFactory.getRemainingEffort(a,e.showResolvedItemsAsCompletedEnabled),h=G.BurndownDataFactory.getCompletedEffort(a,e.showResolvedItemsAsCompletedEnabled),f=G.BurndownDataFactory.getEffortByDate(a),y=this.resolvePastDays(g,m,h,f),C=-G.BurndownDataFactory.getAverageChange(y,g),D=G.BurndownDataFactory.getCompletedPercentage(d,e.showResolvedItemsAsCompletedEnabled),w=G.BurndownDataFactory.getSumOfAggregatedEffort(d)-f[g[0]],B=this.allowChartClicks,S=new K.BurndownChartOptionFactory(this.context).createChartOptions({todayInAccountTimezone:c,showOtherEffort:e.completedWorkEnabled,showScopeTrendline:e.totalScopeTrendlineEnabled,showBurnTrendline:e.burndownTrendlineEnabled,iterations:o,sampleDatesInterval:p,lastGeneratedIntervalSampleDate:s.lastIntervalDate,sampleDates:s.sampleDates,datesToTotalEffort:f,remainingEffort:m,completedEffort:h,startDate:e.timePeriodConfiguration.startDate,suppressAnimations:this.suppressAnimations,showStackedWorkItemTypes:e.stackByWorkItemTypeEnabled,workItemTypeColorDictionary:u,averageBurn:C,datesToPrimarySeriesEffort:y,onClick:this.getOnClickChartHandler(e,t,r,n),burnDirection:this.getBurnDirection(),allowChartClicks:B});return this.currentState.chartData={chartOptions:S},this.currentState.submetricsData=this.getSubMetrics(e,t,r,D,B,C,w,n),n.size>0&&(this.currentState.warningsData=Array.from(n)),this.updateHeaderAndMetrics(l,s.sampleDates,e,t,r,B,n),Promise.resolve()}))}return this.handleScalarAndTitlePromise(a,e,t,r,n)})).then(void 0,(e=>this.handleError(e)))}handleScalarAndTitlePromise(e,t,n,r,o){let a;return this.demandTracker.isDemandPresent(k.DemandType.scalar)&&(a=this.getRemainingEffortForHero(t,n,r,o).then((e=>{this.currentState.scalarData=e}))),this.demandTracker.isDemandPresent(k.DemandType.title)&&(this.currentState.title={text:this.title,hideTitle:this.hideTitle}),Promise.all([e,a]).then((()=>this.currentState))}resolvePastDays(e,t,n,r){let o;return o=this.getBurnDirection()==$.BurnDirection.Down?G.BurndownDataFactory.getEffortByDate(t):G.BurndownDataFactory.getEffortByDate(n),e.forEach((e=>{o[e]||(o[e]=0),r[e]||(r[e]=0)})),o}updateHeaderAndMetrics(e,t,n,r,o,a,i){if(null!=e){const t={label:U.BurndownWidget_ItemsNotEstimatedMetricName,value:e.toString(),onClick:e>0&&a?this.getOnClickUnestimatedHandler(n,r,o,i):void 0};this.currentState.submetricsData.items.splice(2,0,t)}const s=(0,c.shiftToUtc)(new Date(n.timePeriodConfiguration.startDate)).toLocaleDateString(),d=(0,c.shiftToUtc)(new Date(t[t.length-1])).toLocaleDateString();this.currentState.subtitle={text:`${s} - ${d}`}}handleError(e){const t=(0,I.extractODataError)(e),n=s((0,I.recognizeAnalyticsException)(e));return(0,p.onWidgetFailure)(this.context,this.widgetPropsForTelemetry,t,"Retrieve burndown data",{ErrorDetail:JSON.stringify(e.stack)}),this.packMessageAsState(n,t)}getSubMetrics(e,t,n,o,a,i,s,d){return{items:[{label:U.BurndownWidget_CompletedMetricName,value:o+"%",onClick:o>0&&a?this.getOnClickCompletedHandler(e,t,n,d):void 0},{label:this.getBurnDirection()==$.BurnDirection.Down?U.BurndownWidget_AverageBurndownMetricName:U.BurndownWidget_AverageBurnupMetricName,value:((this.getBurnDirection()==$.BurnDirection.Down?1:-1)*G.BurndownDataFactory.formatAverageBurn(i)).toString()},{label:U.BurndownWidget_TotalScopeIncreaseMetricName,value:s?r(s,2).toLocaleString():"0"}]}}resetMessageState(){this.currentState.showMessage=void 0,this.currentState.messageType=void 0,this.currentState.message=void 0}getWorkItemTypeFieldName(e,t){let n="";for(const r of e)if(0===(0,i.localeIgnoreCaseComparer)(r.FieldReferenceName,t)){n=r.FieldName;break}return n}getOnClickCompletedHandler(e,t,n,r){return()=>{const o=window.open(),a=new y.CompletedWorkItemIdsQuery(this.context,e.teams,e.fieldFilters,t,n,e.aggregation,e.showResolvedItemsAsCompletedEnabled,this.command);this.dataService.getCacheableQueryResult(a).then((e=>{const t=e,n=`Completed - ${this.title}`;this.navigateToWorkItemList(n,t,o)})).then(void 0,(e=>{const t=(0,I.extractODataError)(e);(0,p.onWidgetFailure)(this.context,this.widgetPropsForTelemetry,t,"Handle clicking 'completed items' submetric",{ErrorDetail:JSON.stringify(e)})})),this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(a),r)}}getOnClickUnestimatedHandler(e,t,n,r){return()=>{const o=window.open(),a=new S.UnestimatedWorkItemIdsQuery(this.context,e.teams,e.fieldFilters,t,n,e.aggregation.settings,e.showResolvedItemsAsCompletedEnabled,this.command);this.dataService.getCacheableQueryResult(a).then((e=>{const t=e,n=`Unestimated items - ${this.title}`;this.navigateToWorkItemList(n,t,o)})).then(void 0,(e=>{const t=(0,I.extractODataError)(e);(0,p.onWidgetFailure)(this.context,this.widgetPropsForTelemetry,t,"Handle clicking 'unestimated items' submetric",{ErrorDetail:JSON.stringify(e)})})),this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(a),r)}}configNotSatisfactory(){return this.dataService.getCacheableQueryResult(new T.default(this.command).setAutomationMode(this.isAutomationScenario)).then((()=>this.packMessageAsState(v.MessageType.Unconfigured)),(e=>{const t=s((0,I.recognizeAnalyticsException)(e));return this.packMessageAsState(t,(0,I.extractODataError)(e))}))}navigateToWorkItemList(e,t,n){let r="-1,-1",o="";t.length>0&&(r=t.join(",")),o=`SELECT [${b.CoreFieldRefNames.Id}],[${b.CoreFieldRefNames.Title}] FROM WorkItems WHERE [${b.CoreFieldRefNames.Id}] IN (${r})`,this.navigateToQueryPage(o,e,n)}navigateToQueryPage(e,t,n){n&&new P.WiqlURLBuilder(this.context).BuildQueryURL(e,t,this.teamContext.id).then((e=>{n.location.href=e}))}async getRemainingEffortForHero(e,t,n,o){const i=new C.CurrentEffortQuery(this.context,e.teams,e.fieldFilters,e.aggregation,t,n,e.showResolvedItemsAsCompletedEnabled,this.command);i.setAutomationMode(this.isAutomationScenario);const s=this.dataService.getCacheableQueryResult(i).then((t=>{let n=0;return t.forEach((t=>{G.BurndownDataFactory.isWorkItemCompleted(t.StateCategory,t.State,e.showResolvedItemsAsCompletedEnabled)||(n+=t.AggregatedEffort)})),n}));let d;if(this.addDataQualityWarnings(this.dataService.getDataQualityWarnings(i),o),e.aggregation.identifier===h.AggregationMode.Count)d=e.workItemTypeFilter.identifier===H.WorkItemTypeFilterMode[H.WorkItemTypeFilterMode.BacklogCategory]?z.AsyncDataHelpers.getPluralBacklogNameOfBacklogCategory(this.context,(0,a.getProject)(this.context).id,e.workItemTypeFilter.settings,this.isAutomationScenario):Promise.resolve(e.workItemTypeFilter.settings);else{const t=this.getWorkItemTypeFieldName(n,e.aggregation.settings);d=Promise.resolve(t)}const[l,u]=await Promise.all([s,d]);return{description:U.BurndownWidget_HeroDescription,measure:u,value:r(l,2)}}addDataQualityWarnings(e,t){t&&e.then((e=>{e.forEach((e=>{t.add(e)}))}))}}t[e].BurndownDataManager=n;function r(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function s(e){let t=v.MessageType.WidgetError;return e===I.AnalyticsExceptionType.DataNotReady?t=v.MessageType.AxFaultIn:e===I.AnalyticsExceptionType.MissingAnalyticsPermissions&&(t=v.MessageType.MissingPermissions),t}t[e].BurnupDataManager=class extends n{getBurnDirection(){return $.BurnDirection.Up}},t[e].roundTo=r}("BurndownWidgetComponentsBurndownDataManager"),function(e){ee=t[e]={};class n extends L.ViewComponentBase{createDataManager(e){return this.props.burnDirection===$.BurnDirection.Down?new Z.BurndownDataManager(this.context.pageContext,this.props.teamContext,e,!this.props.openLinksInNewTab):new Z.BurnupDataManager(this.context.pageContext,this.props.teamContext,e,!this.props.openLinksInNewTab)}getLayoutMappings(){return x.ChartAndSubmetricComponentLayouts.getDefaultMappings()}createActionCreator(){return new q.BurndownActionCreator(this.context.pageContext,this.dataManager,this.store,this.actions,this.props.contributionId,I.extractODataError)}createSettingsManager(){return new X.default(this.context.pageContext,this.props.teamContext)}getMessageOptions(){return r(this.context.pageContext,this.getStoreState(),this.props)}handleSettingsError(e){if((0,I.recognizeAnalyticsException)(e)===I.AnalyticsExceptionType.MissingAnalyticsPermissions)return this.store.setState((0,v.packMessageAsState)(v.MessageType.MissingPermissions)),void this.setStoreStateAndRenderCompletion();super.handleSettingsError(e)}packWidgetLoadedTelemetryData(e){return o(this.context.pageContext,e)}}function r(e,t,n){let r;switch(t.messageType){case v.MessageType.AxFaultIn:r={actionText:U.BurndownWidget_LearnMore,actionAriaLabel:U.BurndownWidget_LearnMore,actionOnClickDelegate:()=>{window.open(U.BurndownWidget_LearnMoreLink,"_blank")}};break;case v.MessageType.MissingPermissions:r={actionOnClickDelegate:()=>{(0,F.showActionRequiredDialog)(e,M.PermissionDeniedTitleText,R.createElement(N.FormatComponent,{format:M.PermissionDeniedDetailText},R.createElement("a",{href:M.PermissionDeniedDetailLinkAddress},M.PermissionDeniedDetailLinkText)))}};break;case v.MessageType.Unconfigured:r={actionOnClickDelegate:n.onConfigure};break;case v.MessageType.SetIterationDates:const t=(0,_.routeUrl)(e,"ms.vss-admin-web.project-admin-hub-route",{project:(0,a.getProject)(e).name,adminPivot:"work"});r={actionText:U.BurndownWidget_SetIterationDatesLink,actionAriaLabel:U.BurndownWidget_SetIterationDatesAriaLabel,actionOnClickDelegate:()=>window.open(t,"_blank")};break;default:r=void 0}return r}function o(e,t){return t?{totalScopeTrendlineEnabled:t.totalScopeTrendlineEnabled,completedWorkEnabled:t.completedWorkEnabled,stackByWorkItemTypeEnabled:t.stackByWorkItemTypeEnabled,WorkItemFilterMode:t.workItemTypeFilter.identifier,includeBugsEnabled:t.includeBugsForRequirementCategory,aggregationMode:t.aggregation&&h.AggregationMode[t.aggregation.identifier],aggregationField:t.aggregation&&s(e,t.aggregation.settings),showResolvedItemsAsCompletedEnabled:t.showResolvedItemsAsCompletedEnabled,plotTimeByDates:t.timePeriodConfiguration&&t.timePeriodConfiguration.samplingConfiguration&&j.DateSampleMode[t.timePeriodConfiguration.samplingConfiguration.identifier]}:{}}function s(e,t){if(null==t)return t;const n=t.toLowerCase();if((0,A.isFeatureEnabled)(e,J.BurndownConstants.featureFlagName,!1))return n;return(0,i.startsWith)(n,"microsoft.")||(0,i.startsWith)(n,"system.")?t:"(CUSTOM)"}t[e].default=n,t[e].getMessageOptions=r,t[e].packWidgetLoadedTelemetryData=o}("BurndownWidgetComponentsBurndownViewComponent"),function(e){te=t.BurndownWidget={};class n extends Q.VssComponent{constructor(e,t){super(e,t),this.onRenderResolved=()=>{this.props.onWidgetLoaded()},this.onRenderFailed=e=>{this.props.onWidgetLoaded({outcomeDescription:e,outcome:O.LoadingStatus.failure})},this.getWidgetId=()=>Promise.resolve(this.props.id),this.state={burndownViewComponentType:void 0}}async componentDidMount(){this.context.pageContext.getService("ILegacyPlatformService").requireModules(["Widgets/Scripts/Burndown/BurndownViewComponentShim"]).then((e=>{this.setState({burndownViewComponentType:e})}))}render(){const e=this.state.burndownViewComponentType;return e&&e[0]?R.createElement(e[0].default,this.generateBurndownProps()):null}getBurnDirection(){return V.BurnDirection.Down}generateBurndownProps(){const e={resolve:this.onRenderResolved,reject:this.onRenderFailed};return{burnDirection:this.getBurnDirection(),deferredRenderCompletion:e,change:{operationId:V.WidgetFrameworkOperationId.reload,detectedChanges:V.ChangeFlags.all,widgetCreationOptions:{typeId:this.props.contributionId,getId:this.getWidgetId},config:{name:this.props.name,isLightBox:!1,sizeInPixels:this.props.size,customSettings:{data:this.props.settings,version:this.props.settingsVersion},sizeInGrid:{}}},suppressAnimations:!this.props.showLoadAnimations}}}t.BurndownWidget.LegacyBurndownWidget=n;class r extends Q.VssComponent{render(){return R.createElement(ee.default,Object.assign({},this.props,{burnDirection:this.getBurnDirection(),suppressAnimations:!this.props.showLoadAnimations,onRenderCompletion:this.props.onWidgetLoaded}))}getBurnDirection(){return V.BurnDirection.Down}}t.BurndownWidget.BurndownWidget=r;class o extends Q.VssComponent{render(){return R.createElement(r,Object.assign({},this.props))}}t.BurndownWidget.BurndownWidgetRenderer=o,Q.VssComponent.register("burndownWidget",o)}(),function(e){t.BurnupWidget={};class n extends te.LegacyBurndownWidget{getBurnDirection(){return V.BurnDirection.Up}}t.BurnupWidget.LegacyBurnupWidget=n;class r extends te.BurndownWidget{getBurnDirection(){return V.BurnDirection.Up}}t.BurnupWidget.BurnupWidget=r;class o extends Q.VssComponent{render(){return R.createElement(r,Object.assign({},this.props))}}t.BurnupWidget.BurnupWidgetRenderer=o,Q.VssComponent.register("burnupWidget",o)}()}),["Resources","BurndownLegacyContracts","BurndownWidgetComponents/BurndownSettings","BurndownWidgetComponents/BurndownDataContract","BurndownWidgetComponents/AsyncDataHelpers","BurndownWidgetComponents/BurnDirection","BurndownWidgetComponents/BurndownActionCreator","BurndownWidgetComponents/BurndownConstants","BurndownWidgetComponents/BurndownDataFactory","BurndownWidgetComponents/BurndownChartOptionFactory","BurndownWidgetComponents/BurndownSettingsManager","BurndownWidgetComponents/TimeIntervalUtils","BurndownWidgetComponents/BurndownDataManager","BurndownWidgetComponents/BurndownViewComponent","BurndownWidget","BurnupWidget"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-dashboards-web.burndown-widget-content"}}));